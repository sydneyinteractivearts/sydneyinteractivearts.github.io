/*!
 * Paper.js v0.9.25 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2014, Juerg Lehni & Jonathan Puckey
 * http://scratchdisk.com/ & http://jonathanpuckey.com/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Sun Oct 25 11:23:38 2015 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2013 Juerg Lehni
 * http://scratchdisk.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * http://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */
;var paper=new function(an){var aF=new function(){function e(C,u,w,c,B){function s(h,t){t=t||(t=p(u,h))&&(t.get?t:t.value),"string"==typeof t&&"#"===t[0]&&(t=C[t.substring(1)]||t);var a,r="function"==typeof t,n=t,i=B||r&&!t.base?t&&t.get?h in C:C[h]:null;B&&i||(r&&i&&(t.base=i),r&&c!==!1&&(a=h.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(x[a[3].toLowerCase()+a[4]]=a[2]),n&&!r&&n.get&&"function"==typeof n.get&&aF.isPlainObject(n)||(n={value:n,writable:!0}),(p(C,h)||{configurable:!0}).configurable&&(n.configurable=!0,n.enumerable=w),k(C,h,n))}var x={};if(u){for(var v in u){u.hasOwnProperty(v)&&!q.test(v)&&s(v)}for(var v in x){var A=x[v],z=C["set"+A],y=C["get"+A]||z&&C["is"+A];!y||c!==!0&&0!==y.length||s(v,{get:y,set:z})}}return C}function g(a,c,h){return a&&("length" in a&&!a.getLength&&"number"==typeof a.length?m:d).call(a,c,h=h||a),h}function b(c,h,l){for(var a in h){!h.hasOwnProperty(a)||l&&l[a]||(c[a]=h[a])}return c}var q=/^(statics|enumerable|beans|preserve)$/,m=[].forEach||function(c,h){for(var l=0,a=this.length;a>l;l++){c.call(h,this[l],l,this)}},d=function(a,c){for(var h in this){this.hasOwnProperty(h)&&a.call(c,this[h],h,this)}},j=Object.create||function(a){return{__proto__:a}},p=Object.getOwnPropertyDescriptor||function(a,c){var h=a.__lookupGetter__&&a.__lookupGetter__(c);return h?{get:h,set:a.__lookupSetter__(c),enumerable:!0,configurable:!0}:a.hasOwnProperty(c)?{value:a[c],enumerable:!0,configurable:!0,writable:!0}:null},f=Object.defineProperty||function(a,c,h){return(h.get||h.set)&&a.__defineGetter__?(h.get&&a.__defineGetter__(c,h.get),h.set&&a.__defineSetter__(c,h.set)):a[c]=h.value,a},k=function(a,c,h){return delete a[c],f(a,c,h)};return e(function(){for(var a=0,c=arguments.length;c>a;a++){b(this,arguments[a])}},{inject:function(l){if(l){var u=l.statics===!0?l:l.statics,h=l.beans,o=l.preserve;u!==l&&e(this.prototype,l,l.enumerable,h,o),e(this,u,!0,h,o)}for(var n=1,c=arguments.length;c>n;n++){this.inject(arguments[n])}return this},extend:function(){for(var c,n,a=this,l=0,h=arguments.length;h>l&&!(c=arguments[l].initialize);l++){}return c=c||function(){a.apply(this,arguments)},n=c.prototype=j(this.prototype),k(n,"constructor",{value:c,writable:!0,configurable:!0}),e(c,this,!0),arguments.length&&this.inject.apply(c,arguments),c.base=a,c}},!0).inject({inject:function(){for(var c=0,h=arguments.length;h>c;c++){var a=arguments[c];a&&e(this,a,a.enumerable,a.beans,a.preserve)}return this},extend:function(){var a=j(this);return a.inject.apply(a,arguments)},each:function(a,c){return g(this,a,c)},set:function(a){return b(this,a)},clone:function(){return new this.constructor(this)},statics:{each:g,create:j,define:k,describe:p,set:b,clone:function(a){return b(new a.constructor,a)},isPlainObject:function(a){var c=null!=a&&a.constructor;return c&&(c===Object||c===aF||"Object"===c.name)},pick:function(a,c){return a!==an?a:c}}})};"undefined"!=typeof module&&(module.exports=aF),aF.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+aF.each(this,function(a,b){if(!/^_/.test(b)){var c=typeof a;this.push(b+": "+("number"===c?ao.instance.number(a):"string"===c?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},exportJSON:function(a){return aF.exportJSON(this,a)},toJSON:function(){return aF.serialize(this)},_set:function(k,d,g){if(k&&(g||aF.isPlainObject(k))){for(var f=Object.keys(k._filtering||k),b=0,j=f.length;j>b;b++){var e=f[b];if(!d||!d[e]){var c=k[e];c!==an&&(this[e]=c)}}return !0}},statics:{exports:{enumerable:!0},extend:function bq(){var a=bq.base.apply(this,arguments),b=a.prototype._class;return b&&!aF.exports[b]&&(aF.exports[b]=a),a},equals:function(b,e){if(b===e){return !0}if(b&&b.equals){return b.equals(e)}if(e&&e.equals){return e.equals(b)}if(b&&e&&"object"==typeof b&&"object"==typeof e){if(Array.isArray(b)&&Array.isArray(e)){var a=b.length;if(a!==e.length){return !1}for(;a--;){if(!aF.equals(b[a],e[a])){return !1}}}else{var d=Object.keys(b),a=d.length;if(a!==Object.keys(e).length){return !1}for(;a--;){var c=d[a];if(!e.hasOwnProperty(c)||!aF.equals(b[c],e[c])){return !1}}}return !0}return !1},read:function(d,f,b,m){if(this===aF){var j=this.peek(d,f);return d.__index++,j}var c=this.prototype,g=c._readIndex,k=f||g&&d.__index||0;m||(m=d.length-k);var e=d[k];return e instanceof this||b&&b.readNull&&null==e&&1>=m?(g&&(d.__index=k+1),e&&b&&b.clone?e.clone():e):(e=aF.create(this.prototype),g&&(e.__read=!0),e=e.initialize.apply(e,k>0||m<d.length?Array.prototype.slice.call(d,k,k+m):d)||e,g&&(d.__index=k+e.__read,e.__read=an),e)},peek:function(a,b){return a[a.__index=b||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readAll:function(d,h,j){for(var c,g=[],f=h||0,b=d.length;b>f;f++){g.push(Array.isArray(c=d[f])?this.read(c,0,j):this.read(d,f,j,1))}return g},readNamed:function(k,d,g,f,b){var j=this.getNamed(k,d),e=j!==an;if(e){var c=k._filtered;c||(c=k._filtered=aF.create(k[0]),c._filtering=k[0]),c[d]=an}return this.read(e?[j]:k,g,f,b)},getNamed:function(c,a){var b=c[0];return c._hasObject===an&&(c._hasObject=1===c.length&&aF.isPlainObject(b)),c._hasObject?a?b[a]:c._filtered||b:an},hasNamed:function(a,b){return !!this.getNamed(a,b)},isPlainValue:function(a,b){return this.isPlainObject(a)||Array.isArray(a)||b&&"string"==typeof a},serialize:function(v,f,j,b){f=f||{};var q,e=!b;if(e&&(f.formatter=new ao(f.precision),b={length:0,definitions:{},references:{},add:function(c,l){var o="#"+c._id,a=this.references[o];if(!a){this.length++;var h=l.call(c),d=c._class;d&&h[0]!==d&&h.unshift(d),this.definitions[o]=h,a=this.references[o]=[o]}return a}}),v&&v._serialize){q=v._serialize(f,b);var k=v._class;!k||j||q._compact||q[0]===k||q.unshift(k)}else{if(Array.isArray(v)){q=[];for(var s=0,g=v.length;g>s;s++){q[s]=aF.serialize(v[s],f,j,b)}j&&(q._compact=!0)}else{if(aF.isPlainObject(v)){q={};for(var p=Object.keys(v),s=0,g=p.length;g>s;s++){var m=p[s];q[m]=aF.serialize(v[m],f,j,b)}}else{q="number"==typeof v?f.formatter.number(v,f.precision):v}}}return e&&b.length>0?[["dictionary",b.definitions],q]:q},deserialize:function(w,f,j,b){var x=w,q=!j;if(j=j||{},Array.isArray(w)){var e=w[0],k="dictionary"===e;if(1==w.length&&/^#/.test(e)){return j.dictionary[e]}e=aF.exports[e],x=[],b&&(j.dictionary=x);for(var v=e?1:0,g=w.length;g>v;v++){x.push(aF.deserialize(w[v],f,j,k))}if(e){var p=x;f?x=f(e,p):(x=aF.create(e.prototype),e.apply(x,p))}}else{if(aF.isPlainObject(w)){x={},b&&(j.dictionary=x);for(var m in w){x[m]=aF.deserialize(w[m],f,j)}}}return q&&w&&w.length&&"dictionary"===w[0][0]?x[1]:x},exportJSON:function(b,c){var a=aF.serialize(b,c);return c&&c.asString===!1?a:JSON.stringify(a)},importJSON:function(a,b){return aF.deserialize("string"==typeof a?JSON.parse(a):a,function(e,d){var g=b&&b.constructor===e?b:aF.create(e.prototype),f=g===b;if(1===d.length&&g instanceof ax&&(f||!(g instanceof aj))){var c=d[0];aF.isPlainObject(c)&&(c.insert=!1)}return e.apply(g,d),f&&(b=null),g})},splice:function(k,d,g,b){var q=d&&d.length,m=g===an;g=m?k.length:g,g>k.length&&(g=k.length);for(var c=0;q>c;c++){d[c]._index=g+c}if(m){return k.push.apply(k,d),[]}var j=[g,b];d&&j.push.apply(j,d);for(var p=k.splice.apply(k,j),c=0,f=p.length;f>c;c++){p[c]._index=an}for(var c=g+q,f=k.length;f>c;c++){k[c]._index=c}return p},capitalize:function(a){return a.replace(/\b[a-z]/g,function(b){return b.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(b,c){return c.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var aw={on:function(b,e){if("string"!=typeof b){aF.each(b,function(f,g){this.on(g,f)},this)}else{var a=this._eventTypes,d=a&&a[b],c=this._callbacks=this._callbacks||{};c=c[b]=c[b]||[],-1===c.indexOf(e)&&(c.push(e),d&&d.install&&1===c.length&&d.install.call(this,b))}return this},off:function(g,c){if("string"!=typeof g){return aF.each(g,function(a,h){this.off(h,a)},this),an}var e,d=this._eventTypes,b=d&&d[g],f=this._callbacks&&this._callbacks[g];return f&&(!c||-1!==(e=f.indexOf(c))&&1===f.length?(b&&b.uninstall&&b.uninstall.call(this,g),delete this._callbacks[g]):-1!==e&&f.splice(e,1)),this},once:function(a,b){return this.on(a,function(){b.apply(this,arguments),this.off(a,b)})},emit:function(b,f){var g=this._callbacks&&this._callbacks[b];if(!g){return !1}var a=[].slice.call(arguments,1);g=g.slice();for(var d=0,c=g.length;c>d;d++){if(g[d].apply(this,a)===!1){f&&f.stop&&f.stop();break}}return !0},responds:function(a){return !(!this._callbacks||!this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(d){var h=this._callbacks,j=d?"install":"uninstall";for(var c in h){if(h[c].length>0){var g=this._eventTypes,f=g&&g[c],b=f&&f[j];b&&b.call(this,c)}}},statics:{inject:function aQ(b){var c=b._events;if(c){var a={};aF.each(c,function(j,g){var f="string"==typeof j,d=f?j:g,i=aF.capitalize(d),e=d.substring(2).toLowerCase();a[e]=f?{}:j,d="_"+d,b["get"+i]=function(){return this[d]},b["set"+i]=function(h){var k=this[d];k&&this.off(e,k),h&&this.on(e,h),this[d]=h}}),b._eventTypes=a}return aQ.base.apply(this,arguments)}}},aB=aF.extend({_class:"PaperScope",initialize:function af(){paper=this,this.settings=new aF({applyMatrix:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=af._id++,af._scopes[this._id]=this;var b=af.prototype;if(!this.support){var e=aO.getContext(1,1);b.support={nativeDash:"setLineDash" in e||"mozDash" in e,nativeBlendModes:a4.nativeModes},aO.release(e)}if(!this.browser){var a=navigator.userAgent.toLowerCase(),d=(/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||[])[0],c=b.browser={platform:d};d&&(c[d]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:([.\d]+))?/g,function(h,k,l,g,j){if(!c.chrome){var f="opera"===k?g:l;"trident"===k&&(f=j,k="msie"),c.version=f,c.versionNumber=parseFloat(f),c.name=k,c[k]=!0}}),c.chrome&&delete c.webkit,c.atom&&delete c.chrome}},version:"0.9.25",getView:function(){return this.project&&this.project.getView()},getPaper:function(){return this},execute:function(a,b,c){paper.PaperScript.execute(a,this,b,c),aS.updateFocus()},install:function(b){var c=this;aF.each(["project","view","tool"],function(d){aF.define(b,d,{configurable:!0,get:function(){return c[d]}})});for(var a in this){!/^_/.test(a)&&this[a]&&(b[a]=this[a])}},setup:function(a){return paper=this,this.project=new al(a),this},activate:function(){paper=this},clear:function(){for(var a=this.projects.length-1;a>=0;a--){this.projects[a].remove()}for(var a=this.tools.length-1;a>=0;a--){this.tools[a].remove()}for(var a=this.palettes.length-1;a>=0;a--){this.palettes[a].remove()}},remove:function(){this.clear(),delete aB._scopes[this._id]},statics:new function(){function a(b){return b+="Attribute",function(c,d){return c[b](d)||c[b]("data-paper-"+d)}}return{_scopes:{},_id:0,get:function(b){return this._scopes[b]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),ap=aF.extend(aw,{initialize:function(a){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope){return !1}var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(aF.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),ao=aF.extend({initialize:function(a){this.precision=a||5,this.multiplier=Math.pow(10,this.precision)},number:function(a){return Math.round(a*this.multiplier)/this.multiplier},pair:function(a,b,c){return this.number(a)+(c||",")+this.number(b)},point:function(a,b){return this.number(a.x)+(b||",")+this.number(a.y)},size:function(a,b){return this.number(a.width)+(b||",")+this.number(a.height)},rectangle:function(a,b){return this.point(a,b)+(b||",")+this.size(a,b)}});ao.instance=new ao;var aK=new function(){function b(h,i,l){return i>h?i:h>l?l:h}var g=[[0.5773502691896257],[0,0.7745966692414834],[0.33998104358485626,0.8611363115940526],[0,0.5384693101056831,0.906179845938664],[0.2386191860831969,0.6612093864662645,0.932469514203152],[0,0.4058451513773972,0.7415311855993945,0.9491079123427585],[0.1834346424956498,0.525532409916329,0.7966664774136267,0.9602898564975363],[0,0.3242534234038089,0.6133714327005904,0.8360311073266358,0.9681602395076261],[0.14887433898163122,0.4333953941292472,0.6794095682990244,0.8650633666889845,0.9739065285171717],[0,0.26954315595234496,0.5190961292068118,0.7301520055740494,0.8870625997680953,0.978228658146057],[0.1252334085114689,0.3678314989981802,0.5873179542866175,0.7699026741943047,0.9041172563704749,0.9815606342467192],[0,0.2304583159551348,0.44849275103644687,0.6423493394403402,0.8015780907333099,0.9175983992229779,0.9841830547185881],[0.10805494870734367,0.31911236892788974,0.5152486363581541,0.6872929048116855,0.827201315069765,0.9284348836635735,0.9862838086968123],[0,0.20119409399743451,0.3941513470775634,0.5709721726085388,0.7244177313601701,0.8482065834104272,0.937273392400706,0.9879925180204854],[0.09501250983763744,0.2816035507792589,0.45801677765722737,0.6178762444026438,0.755404408355003,0.8656312023878318,0.9445750230732326,0.9894009349916499]],k=[[1],[0.8888888888888888,0.5555555555555556],[0.6521451548625461,0.34785484513745385],[0.5688888888888889,0.47862867049936647,0.23692688505618908],[0.46791393457269104,0.3607615730481386,0.17132449237917036],[0.4179591836734694,0.3818300505051189,0.27970539148927664,0.1294849661688697],[0.362683783378362,0.31370664587788727,0.22238103445337448,0.10122853629037626],[0.3302393550012598,0.31234707704000286,0.26061069640293544,0.1806481606948574,0.08127438836157441],[0.29552422471475287,0.26926671930999635,0.21908636251598204,0.1494513491505806,0.06667134430868814],[0.2729250867779006,0.26280454451024665,0.23319376459199048,0.18629021092773426,0.1255803694649046,0.05566856711617366],[0.24914704581340277,0.2334925365383548,0.20316742672306592,0.16007832854334622,0.10693932599531843,0.04717533638651183],[0.2325515532308739,0.22628318026289723,0.2078160475368885,0.17814598076194574,0.13887351021978725,0.09212149983772845,0.04048400476531588],[0.2152638534631578,0.2051984637212956,0.18553839747793782,0.15720316715819355,0.12151857068790319,0.08015808715976021,0.03511946033175186],[0.2025782419255613,0.19843148532711158,0.1861610000155622,0.16626920581699392,0.13957067792615432,0.10715922046717194,0.07036604748810812,0.03075324199611727],[0.1894506104550685,0.18260341504492358,0.16915651939500254,0.14959598881657674,0.12462897125553388,0.09515851168249279,0.062253523938647894,0.027152459411754096]],a=Math.abs,f=Math.sqrt,d=Math.pow,j=1e-12,c=1.12e-16;return{TOLERANCE:0.000001,EPSILON:j,MACHINE_EPSILON:c,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-7,KAPPA:4*(f(2)-1)/3,isZero:function(e){return e>=-j&&j>=e},integrate:function(A,p,e,B){for(var y=g[B-2],m=k[B-2],q=0.5*(e-p),z=q+p,n=0,x=B+1>>1,w=1&B?m[n++]*A(z):0;x>n;){var v=q*y[n];w+=m[n++]*(A(z+v)+A(z-v))}return q*w},findRoot:function(A,w,p,i,B,y,m){for(var v=0;y>v;v++){var z=A(p),q=z/w(p),x=p-q;if(a(q)<m){return x}z>0?(B=p,p=i>=x?0.5*(i+B):x):(i=p,p=x>=B?0.5*(i+B):x)}return p},solveQuadratic:function(t,i,E,I,q,A){var z,s,r=0,H=q-j,G=A+j,h=1/0,o=i;if(i/=-2,s=i*i-t*E,0!==s&&a(s)<c){var C=d(a(t*i*E),1/3);if(1e-8>C){var F=d(10,a(Math.floor(Math.log(C)*Math.LOG10E)));isFinite(F)||(F=0),t*=F,i*=F,E*=F,s=i*i-t*E}}if(a(t)<j){if(a(o)<j){return a(E)<j?-1:0}z=-E/o}else{if(s>=-c){var D=0>s?0:f(s),B=i+(0>i?-D:D);0===B?(z=E/t,h=-z):(z=B/t,h=E/B)}}return isFinite(z)&&(null==q||z>H&&G>z)&&(I[r++]=null==q?z:b(z,q,A)),h!==z&&isFinite(h)&&(null==q||h>H&&G>h)&&(I[r++]=null==q?h:b(h,q,A)),r},solveCubic:function(H,B,t,E,J,I,G){var F,L,s,A=0;if(a(H)<j){H=B,L=t,s=E,F=1/0}else{if(a(E)<j){L=B,s=t,F=0}else{var D,o,r,q,K,z,h,i=1+c;if(F=-(B/H)/3,h=H*F,L=h+B,s=L*F+t,r=(h+L)*F+s,o=s*F+E,q=o/H,K=d(a(q),1/3),z=0>q?-1:1,q=-r/H,K=q>0?1.3247179572*Math.max(K,f(q)):K,D=F-z*K,D!==F){do{if(F=D,h=H*F,L=h+B,s=L*F+t,r=(h+L)*F+s,o=s*F+E,D=0===r?F:F-o/r/i,D===F){F=D;break}}while(z*D>z*F);a(H)*F*F>a(E/F)&&(s=-E/F,L=(s-t)/F)}}}var A=aK.solveQuadratic(H,L,s,J,I,G);return isFinite(F)&&(0===A||F!==J[A-1])&&(null==I||F>I-j&&G+j>F)&&(J[A++]=null==I?F:b(F,I,G)),A}}},av={_id:1,_pools:{},get:function(a){if(a){var b=a._class,c=this._pools[b];return c||(c=this._pools[b]={_id:1}),c._id++}return this._id++}},aC=aF.extend({_class:"Point",_readIndex:!0,initialize:function(b,c){var d=typeof b;if("number"===d){var a="number"==typeof c;this.x=b,this.y=a?c:b,this.__read&&(this.__read=a?2:1)}else{"undefined"===d||null===b?(this.x=this.y=0,this.__read&&(this.__read=null===b?1:0)):(Array.isArray(b)?(this.x=b[0],this.y=b.length>1?b[1]:b[0]):null!=b.x?(this.x=b.x,this.y=b.y):null!=b.width?(this.x=b.width,this.y=b.height):null!=b.angle?(this.x=b.length,this.y=0,this.setAngle(b.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))}},set:function(a,b){return this.x=a,this.y=b,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new aC(this.x,this.y)},toString:function(){var a=ao.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var b=this._angle||0;this.set(Math.cos(b)*a,Math.sin(b)*a)}else{var c=a/this.getLength();aK.isZero(c)&&this.getAngle(),this.set(this.x*c,this.y*c)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=aC.read(arguments),b=this.getLength()*a.getLength();if(aK.isZero(b)){return NaN}var c=this.dot(a)/b;return Math.acos(-1>c?-1:c>1?1:c)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var b=this.getLength();this.set(Math.cos(a)*b,Math.sin(a)*b)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=aC.read(arguments);return 180*Math.atan2(this.cross(a),this.dot(a))/Math.PI},getDistance:function(){var b=aC.read(arguments),e=b.x-this.x,a=b.y-this.y,d=e*e+a*a,c=aF.read(arguments);return c?d:Math.sqrt(d)},normalize:function(c){c===an&&(c=1);var d=this.getLength(),a=0!==d?c/d:0,b=new aC(this.x*a,this.y*a);return a>=0&&(b._angle=this._angle),b},rotate:function(b,d){if(0===b){return this.clone()}b=b*Math.PI/180;var f=d?this.subtract(d):this,a=Math.sin(b),c=Math.cos(b);return f=new aC(f.x*c-f.y*a,f.x*a+f.y*c),d?f.add(d):f},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=aC.read(arguments);return new aC(this.x+a.x,this.y+a.y)},subtract:function(){var a=aC.read(arguments);return new aC(this.x-a.x,this.y-a.y)},multiply:function(){var a=aC.read(arguments);return new aC(this.x*a.x,this.y*a.y)},divide:function(){var a=aC.read(arguments);return new aC(this.x/a.x,this.y/a.y)},modulo:function(){var a=aC.read(arguments);return new aC(this.x%a.x,this.y%a.y)},negate:function(){return new aC(-this.x,-this.y)},isInside:function(){return aG.read(arguments).contains(this)},isClose:function(){var a=aC.read(arguments),b=aF.read(arguments);return this.getDistance(a)<b},isCollinear:function(){var a=aC.read(arguments);return aC.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=aC.read(arguments);return aC.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){return aK.isZero(this.x)&&aK.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var a=aC.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=aC.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=aC.read(arguments),b=a.isZero()?0:this.dot(a)/a.dot(a);return new aC(a.x*b,a.y*b)},statics:{min:function(){var a=aC.read(arguments),b=aC.read(arguments);return new aC(Math.min(a.x,b.x),Math.min(a.y,b.y))},max:function(){var a=aC.read(arguments),b=aC.read(arguments);return new aC(Math.max(a.x,b.x),Math.max(a.y,b.y))},random:function(){return new aC(Math.random(),Math.random())},isCollinear:function(b,c,d,a){return Math.abs(b*a-c*d)<=1e-7*Math.sqrt((b*b+c*c)*(d*d+a*a))},isOrthogonal:function(b,c,d,a){return Math.abs(b*d+c*a)<=1e-7*Math.sqrt((b*b+c*c)*(d*d+a*a))}}},aF.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new aC(b(this.x),b(this.y))}},{})),am=aC.extend({initialize:function(b,c,d,a){this._x=b,this._y=c,this._owner=d,this._setter=a},set:function(a,b,c){return this._x=a,this._y=b,c||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)}}),ay=aF.extend({_class:"Size",_readIndex:!0,initialize:function(b,c){var d=typeof b;if("number"===d){var a="number"==typeof c;this.width=b,this.height=a?c:b,this.__read&&(this.__read=a?2:1)}else{"undefined"===d||null===b?(this.width=this.height=0,this.__read&&(this.__read=null===b?1:0)):(Array.isArray(b)?(this.width=b[0],this.height=b.length>1?b[1]:b[0]):null!=b.width?(this.width=b.width,this.height=b.height):null!=b.x?(this.width=b.x,this.height=b.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))}},set:function(a,b){return this.width=a,this.height=b,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new ay(this.width,this.height)},toString:function(){var a=ao.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.width),b.number(this.height)]},add:function(){var a=ay.read(arguments);return new ay(this.width+a.width,this.height+a.height)},subtract:function(){var a=ay.read(arguments);return new ay(this.width-a.width,this.height-a.height)},multiply:function(){var a=ay.read(arguments);return new ay(this.width*a.width,this.height*a.height)},divide:function(){var a=ay.read(arguments);return new ay(this.width/a.width,this.height/a.height)},modulo:function(){var a=ay.read(arguments);return new ay(this.width%a.width,this.height%a.height)},negate:function(){return new ay(-this.width,-this.height)},isZero:function(){return aK.isZero(this.width)&&aK.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,b){return new ay(Math.min(a.width,b.width),Math.min(a.height,b.height))},max:function(a,b){return new ay(Math.max(a.width,b.width),Math.max(a.height,b.height))},random:function(){return new ay(Math.random(),Math.random())}}},aF.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new ay(b(this.width),b(this.height))}},{})),aH=ay.extend({initialize:function(b,c,d,a){this._width=b,this._height=c,this._owner=d,this._setter=a},set:function(a,b,c){return this._width=a,this._height=b,c||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),aG=aF.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(g,h,b,q){var m=typeof g,e=0;if("number"===m?(this.x=g,this.y=h,this.width=b,this.height=q,e=4):"undefined"===m||null===g?(this.x=this.y=this.width=this.height=0,e=null===g?1:0):1===arguments.length&&(Array.isArray(g)?(this.x=g[0],this.y=g[1],this.width=g[2],this.height=g[3],e=1):g.x!==an||g.width!==an?(this.x=g.x||0,this.y=g.y||0,this.width=g.width||0,this.height=g.height||0,e=1):g.from===an&&g.to===an&&(this.x=this.y=this.width=this.height=0,this._set(g),e=1)),!e){var p=aC.readNamed(arguments,"from"),l=aF.peek(arguments);if(this.x=p.x,this.y=p.y,l&&l.x!==an||aF.hasNamed(arguments,"to")){var k=aC.readNamed(arguments,"to");this.width=k.x-p.x,this.height=k.y-p.y,this.width<0&&(this.x=k.x,this.width=-this.width),this.height<0&&(this.y=k.y,this.height=-this.height)}else{var j=ay.read(arguments);this.width=j.width,this.height=j.height}e=arguments.__index}this.__read&&(this.__read=e)},set:function(b,c,d,a){return this.x=b,this.y=c,this.width=d,this.height=a,this},clone:function(){return new aG(this.x,this.y,this.width,this.height)},equals:function(a){var b=aF.isPlainValue(a)?aG.read(arguments):a;return b===this||b&&this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height||!1},toString:function(){var a=ao.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y),b.number(this.width),b.number(this.height)]},getPoint:function(a){var b=a?aC:am;return new b(this.x,this.y,this,"setPoint")},setPoint:function(){var a=aC.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){var b=a?ay:aH;return new b(this.width,this.height,this,"setSize")},setSize:function(){var a=ay.read(arguments);this._fixX&&(this.x+=(this.width-a.width)*this._fixX),this._fixY&&(this.y+=(this.height-a.height)*this._fixY),this.width=a.width,this.height=a.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(a){this._fixW||(this.width-=a-this.x),this.x=a,this._fixX=0},getTop:function(){return this.y},setTop:function(a){this._fixH||(this.height-=a-this.y),this.y=a,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(a){this._fixX!==an&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=a-this.width:this.width=a-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(a){this._fixY!==an&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=a-this.height:this.height=a-this.y,this._fixY=1},getCenterX:function(){return this.x+0.5*this.width},setCenterX:function(a){this.x=a-0.5*this.width,this._fixX=0.5},getCenterY:function(){return this.y+0.5*this.height},setCenterY:function(a){this.y=a-0.5*this.height,this._fixY=0.5},getCenter:function(a){var b=a?aC:am;return new b(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=aC.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(a){return a&&a.width!==an||4==(Array.isArray(a)?a:arguments).length?this._containsRectangle(aG.read(arguments)):this._containsPoint(aC.read(arguments))},_containsPoint:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b<=this.x+this.width&&c<=this.y+this.height},_containsRectangle:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b+a.width<=this.x+this.width&&c+a.height<=this.y+this.height},intersects:function(){var a=aG.read(arguments);return a.x+a.width>this.x&&a.y+a.height>this.y&&a.x<this.x+this.width&&a.y<this.y+this.height},touches:function(){var a=aG.read(arguments);return a.x+a.width>=this.x&&a.y+a.height>=this.y&&a.x<=this.x+this.width&&a.y<=this.y+this.height},intersect:function(){var b=aG.read(arguments),d=Math.max(this.x,b.x),f=Math.max(this.y,b.y),a=Math.min(this.x+this.width,b.x+b.width),c=Math.min(this.y+this.height,b.y+b.height);return new aG(d,f,a-d,c-f)},unite:function(){var b=aG.read(arguments),d=Math.min(this.x,b.x),f=Math.min(this.y,b.y),a=Math.max(this.x+this.width,b.x+b.width),c=Math.max(this.y+this.height,b.y+b.height);return new aG(d,f,a-d,c-f)},include:function(){var b=aC.read(arguments),d=Math.min(this.x,b.x),f=Math.min(this.y,b.y),a=Math.max(this.x+this.width,b.x),c=Math.max(this.y+this.height,b.y);return new aG(d,f,a-d,c-f)},expand:function(){var a=ay.read(arguments),b=a.width,c=a.height;return new aG(this.x-b/2,this.y-c/2,this.width+b,this.height+c)},scale:function(a,b){return this.expand(this.width*a-this.width,this.height*(b===an?a:b)-this.height)}},aF.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(w,p){var h=w.join(""),k=/^[RL]/.test(h);p>=4&&(w[1]+=k?"Y":"X");var b=w[k?0:1],x=w[k?1:0],v="get"+b,g="get"+x,j="set"+b,u="set"+x,q="get"+h,m="set"+h;this[q]=function(a){var c=a?aC:am;return new c(this[v](),this[g](),this,m)},this[m]=function(){var a=aC.read(arguments);this[j](a.x),this[u](a.y)}},{beans:!0})),aE=aG.extend({initialize:function(b,f,g,a,d,c){this.set(b,f,g,a,!0),this._owner=d,this._setter=c},set:function(b,d,f,a,c){return this._x=b,this._y=d,this._width=f,this._height=a,c||this._owner[this._setter](this),this}},new function(){var a=aG.prototype;return aF.each(["x","y","width","height"],function(c){var d=aF.capitalize(c),b="_"+c;this["get"+d]=function(){return this[b]},this["set"+d]=function(e){this[b]=e,this._dontNotify||this._owner[this._setter](this)}},aF.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(b){var c="set"+b;this[c]=function(){this._dontNotify=!0,a[c].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(b){var c=this._owner;c.setSelected&&(c._boundsSelected=b,c.setSelected(b||c._selectedSegmentState>0))}}))}),aD=aF.extend({_class:"Matrix",initialize:function bn(a){var b=arguments.length,c=!0;if(6===b?this.set.apply(this,arguments):1===b?a instanceof bn?this.set(a._a,a._c,a._b,a._d,a._tx,a._ty):Array.isArray(a)?this.set.apply(this,a):c=!1:0===b?this.reset():c=!1,!c){throw Error("Unsupported matrix parameters")}},set:function(d,h,j,c,g,f,b){return this._a=d,this._c=h,this._b=j,this._d=c,this._tx=g,this._ty=f,b||this._changed(),this},_serialize:function(a){return aF.serialize(this.getValues(),a)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(9))},clone:function(){return new aD(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty||!1},toString:function(){var a=ao.instance;return"[["+[a.number(this._a),a.number(this._b),a.number(this._tx)].join(", ")+"], ["+[a.number(this._c),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,a||this._changed(),this},apply:function(b,c){var a=this._owner;return a?(a.transform(null,!0,aF.pick(b,!0),c),this.isIdentity()):!1},translate:function(){var a=aC.read(arguments),b=a.x,c=a.y;return this._tx+=b*this._a+c*this._b,this._ty+=b*this._c+c*this._d,this._changed(),this},scale:function(){var a=aC.read(arguments),b=aC.read(arguments,0,{readNull:!0});return b&&this.translate(b),this._a*=a.x,this._c*=a.x,this._b*=a.y,this._d*=a.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(w){w*=Math.PI/180;var k=aC.read(arguments,1),g=k.x,j=k.y,b=Math.cos(w),x=Math.sin(w),q=g-g*b+j*x,f=j-g*x-j*b,v=this._a,h=this._b,p=this._c,m=this._d;return this._a=b*v+x*h,this._b=-x*v+b*h,this._c=b*p+x*m,this._d=-x*p+b*m,this._tx+=q*v+f*h,this._ty+=q*p+f*m,this._changed(),this},shear:function(){var b=aC.read(arguments),c=aC.read(arguments,0,{readNull:!0});c&&this.translate(c);var d=this._a,a=this._c;return this._a+=b.y*this._b,this._c+=b.y*this._d,this._b+=b.x*d,this._d+=b.x*a,c&&this.translate(c.negate()),this._changed(),this},skew:function(){var b=aC.read(arguments),c=aC.read(arguments,0,{readNull:!0}),d=Math.PI/180,a=new aC(Math.tan(b.x*d),Math.tan(b.y*d));return this.shear(a,c)},concatenate:function(q){var k=this._a,d=this._b,g=this._c,b=this._d,v=q._a,m=q._b,c=q._c,j=q._d,p=q._tx,f=q._ty;return this._a=v*k+c*d,this._b=m*k+j*d,this._c=v*g+c*b,this._d=m*g+j*b,this._tx+=p*k+f*d,this._ty+=p*g+f*b,this._changed(),this},preConcatenate:function(y){var p=this._a,g=this._b,k=this._c,b=this._d,z=this._tx,w=this._ty,f=y._a,m=y._b,x=y._c,j=y._d,v=y._tx,q=y._ty;return this._a=f*p+m*k,this._b=f*g+m*b,this._c=x*p+j*k,this._d=x*g+j*b,this._tx=f*z+m*w+v,this._ty=x*z+j*w+q,this._changed(),this},chain:function(y){var p=this._a,g=this._b,k=this._c,b=this._d,z=this._tx,w=this._ty,f=y._a,m=y._b,x=y._c,j=y._d,v=y._tx,q=y._ty;return new aD(f*p+x*g,f*k+x*b,m*p+j*g,m*k+j*b,z+v*p+q*g,w+v*k+q*b)},isIdentity:function(){return 1===this._a&&0===this._c&&0===this._b&&1===this._d&&0===this._tx&&0===this._ty},orNullIfIdentity:function(){return this.isIdentity()?null:this},isInvertible:function(){return !!this._getDeterminant()},isSingular:function(){return !this._getDeterminant()},transform:function(a,b,c){return arguments.length<3?this._transformPoint(aC.read(arguments)):this._transformCoordinates(a,b,c)},_transformPoint:function(b,d,f){var a=b.x,c=b.y;return d||(d=new aC),d.set(a*this._a+c*this._b+this._tx,a*this._c+c*this._d+this._ty,f)},_transformCoordinates:function(d,h,k){for(var c=0,g=0,f=2*k;f>c;){var b=d[c++],j=d[c++];h[g++]=b*this._a+j*this._b+this._tx,h[g++]=b*this._c+j*this._d+this._ty}return h},_transformCorners:function(b){var f=b.x,g=b.y,a=f+b.width,d=g+b.height,c=[f,g,a,g,a,d,f,d];return this._transformCoordinates(c,c,4)},_transformBounds:function(l,j,d){for(var f=this._transformCorners(l),b=f.slice(0,2),m=b.slice(),k=2;8>k;k++){var c=f[k],g=1&k;c<b[g]?b[g]=c:c>m[g]&&(m[g]=c)}return j||(j=new aG),j.set(b[0],b[1],m[0]-b[0],m[1]-b[1],d)},inverseTransform:function(){return this._inverseTransform(aC.read(arguments))},_getDeterminant:function(){var a=this._a*this._d-this._b*this._c;return isFinite(a)&&!aK.isZero(a)&&isFinite(this._tx)&&isFinite(this._ty)?a:null},_inverseTransform:function(b,f,g){var a=this._getDeterminant();if(!a){return null}var d=b.x-this._tx,c=b.y-this._ty;return f||(f=new aC),f.set((d*this._d-c*this._b)/a,(c*this._a-d*this._c)/a,g)},decompose:function(){var b=this._a,f=this._b,h=this._c,a=this._d;if(aK.isZero(b*a-f*h)){return null}var d=Math.sqrt(b*b+f*f);b/=d,f/=d;var c=b*h+f*a;h-=b*c,a-=f*c;var g=Math.sqrt(h*h+a*a);return h/=g,a/=g,c/=g,f*h>b*a&&(b=-b,f=-f,c=-c,d=-d),{scaling:new aC(d,g),rotation:180*-Math.atan2(f,b)/Math.PI,shearing:c}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return new aC(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var a=this._getDeterminant();return a&&new aD(this._d/a,-this._c/a,-this._b/a,this._a/a,(this._b*this._ty-this._d*this._tx)/a,(this._c*this._tx-this._a*this._ty)/a)},shiftless:function(){return new aD(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(a){a.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},aF.each(["a","c","b","d","tx","ty"],function(b){var c=aF.capitalize(b),a="_"+b;this["get"+c]=function(){return this[a]},this["set"+c]=function(d){this[a]=d,this._changed()}},{})),aL=aF.extend({_class:"Line",initialize:function(b,f,g,a,d){var c=!1;arguments.length>=4?(this._px=b,this._py=f,this._vx=g,this._vy=a,c=d):(this._px=b.x,this._py=b.y,this._vx=f.x,this._vy=f.y,c=g),c||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new aC(this._px,this._py)},getVector:function(){return new aC(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,b){return aL.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,b)},getSide:function(a,b){return aL.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,b)},getDistance:function(a){return Math.abs(aL.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0))},isCollinear:function(a){return aC.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return aC.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(j,F,z,C,q,k,x,h,B,H){B||(z-=j,C-=F,x-=q,h-=k);var G=z*h-C*x;if(!aK.isZero(G)){var E=j-q,D=F-k,I=(x*D-h*E)/G,b=(z*D-C*E)/G,w=1e-12,A=-w,a=1+w;if(H||I>A&&a>I&&b>A&&a>b){return H||(I=0>=I?0:I>=1?1:I),new aC(j+I*z,F+I*C)}}},getSide:function(q,k,d,g,b,v,m,c){m||(d-=q,g-=k);var j=b-q,p=v-k,f=j*g-p*d;return 0!==f||c||(f=(j*d+j*d)/(d*d+g*g),f>=0&&1>=f&&(f=0)),0>f?-1:f>0?1:0},getSignedDistance:function(d,h,j,c,g,f,b){return b||(j-=d,c-=h),0===j?c>0?g-d:d-g:0===c?0>j?f-h:h-f:((g-d)*c-(f-h)*j)/Math.sqrt(j*j+c*c)}}}),al=ap.extend({_class:"Project",_list:"projects",_reference:"project",initialize:function(a){ap.call(this,!0),this.layers=[],this._activeLayer=null,this.symbols=[],this._currentStyle=new bb(null,null,this),this._view=aS.create(this,a||aO.getCanvas(1,1)),this._selectedItems={},this._selectedItemCount=0,this._updateVersion=0},_serialize:function(a,b){return aF.serialize(this.layers,a,!0,b)},clear:function(){for(var a=this.layers.length-1;a>=0;a--){this.layers[a].remove()}this.symbols=[]},isEmpty:function(){return 0===this.layers.length},remove:function bi(){return bi.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.initialize(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getActiveLayer:function(){return this._activeLayer||new aj({project:this})},getSelectedItems:function(){var a=[];for(var b in this._selectedItems){var c=this._selectedItems[b];c.isInserted()&&a.push(c)}return a},insertChild:function(b,c,a){return c instanceof aj?(c._remove(!1,!0),aF.splice(this.layers,[c],b,0),c._setProject(this,!0),this._changes&&c._changed(5),this._activeLayer||(this._activeLayer=c)):c instanceof ax?(this._activeLayer||this.insertChild(b,new aj(ax.NO_INSERT))).insertChild(b,c,a):c=null,c},addChild:function(a,b){return this.insertChild(an,a,b)},_updateSelection:function(a){var b=a._id,c=this._selectedItems;a._selected?c[b]!==a&&(this._selectedItemCount++,c[b]=a):c[b]===a&&(this._selectedItemCount--,delete c[b])},selectAll:function(){for(var a=this.layers,b=0,c=a.length;c>b;b++){a[b].setFullySelected(!0)}},deselectAll:function(){var a=this._selectedItems;for(var b in a){a[b].setFullySelected(!1)}},hitTest:function(){for(var b=aC.read(arguments),d=aW.getOptions(aF.read(arguments)),a=this.layers.length-1;a>=0;a--){var c=this.layers[a]._hitTest(b,d);if(c){return c}}return null},getItems:function(a){return ax._getItems(this.layers,a)},getItem:function(a){return ax._getItems(this.layers,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var b=this._activeLayer;return aF.importJSON(a,b&&b.isEmpty()&&b)},draw:function(q,f,h){this._updateVersion++,q.save(),f.applyToContext(q);for(var b=new aF({offset:new aC(0,0),pixelRatio:h,viewMatrix:f.isIdentity()?null:f,matrices:[new aD],updateMatrix:!0}),v=0,m=this.layers,e=m.length;e>v;v++){m[v].draw(q,b)}if(q.restore(),this._selectedItemCount>0){q.save(),q.strokeWidth=1;var p=this._selectedItems,g=this._scope.settings.handleSize,k=this._updateVersion;for(var j in p){p[j]._drawSelection(q,f,g,p,k)}q.restore()}}}),au=aF.extend({_class:"Symbol",initialize:function(a,b){this._id=av.get(),this.project=paper.project,this.project.symbols.push(this),a&&this.setDefinition(a,b)},_serialize:function(a,b){return b.add(this,function(){return aF.serialize([this._class,this._definition],a,!1,b)})},_changed:function(a){8&a&&ax._clearBoundsCache(this),1&a&&(this.project._needsUpdate=!0)},getDefinition:function(){return this._definition},setDefinition:function(a,b){a._parentSymbol&&(a=a.clone()),this._definition&&(this._definition._parentSymbol=null),this._definition=a,a.remove(),a.setSelected(!1),b||a.setPosition(new aC),a._parentSymbol=this,this._changed(9)},place:function(a){return new bc(this,a)},clone:function(){return new au(this._definition.clone(!1))},equals:function(a){return a===this||a&&this.definition.equals(a.definition)||!1}}),ax=aF.extend(aw,{statics:{extend:function bd(a){return a._serializeFields&&(a._serializeFields=new aF(this.prototype._serializeFields,a._serializeFields)),bd.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_applyMatrix:!0,_canApplyMatrix:!0,_boundsSelected:!1,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new aD,pivot:null,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,selected:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(d,g){var c=d&&aF.isPlainObject(d),f=c&&d.internal===!0,e=this._matrix=new aD,b=c&&d.project||paper.project;return f||(this._id=av.get()),this._applyMatrix=this._canApplyMatrix&&paper.settings.applyMatrix,g&&e.translate(g),e._owner=this,this._style=new bb(b._currentStyle,this,b),this._project||(f||c&&d.insert===!1?this._setProject(b):c&&d.parent?this.setParent(d.parent):(b._activeLayer||new aj).addChild(this)),c&&d!==ax.NO_INSERT&&this._set(d,{insert:!0,project:!0,parent:!0},!0),c},_events:aF.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(a){this[a]={install:function(b){this.getView()._installEvent(b)},uninstall:function(b){this.getView()._uninstallEvent(b)}}},{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{}}),_serialize:function(b,e){function a(g){for(var f in g){var h=c[f];aF.equals(h,"leading"===f?1.2*g.fontSize:g[f])||(d[f]=aF.serialize(h,b,"data"!==f,e))}}var d={},c=this;return a(this._serializeFields),this instanceof ah||a(this._style._defaults),[this._class,d]},_changed:function(d){var f=this._parentSymbol,a=this._parent||f,c=this._project;if(8&d&&(this._bounds=this._position=this._decomposed=this._globalMatrix=this._currentPath=an),a&&40&d&&ax._clearBoundsCache(a),2&d&&ax._clearBoundsCache(this),c&&(1&d&&(c._needsUpdate=!0),c._changes)){var b=c._changesById[this._id];b?b.flags|=d:(b={item:this,flags:d},c._changesById[this._id]=b,c._changes.push(b))}f&&f._changed(d)},set:function(a){return a&&this._set(a),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(g,j){if(this._name&&this._removeNamed(),g===+g+""){throw Error("Names consisting only of numbers are not supported.")}var c=this._parent;if(g&&c){for(var f=c._children,d=c._namedChildren,b=g,h=1;j&&f[g];){g=b+" "+h++}(d[g]=d[g]||[]).push(this),f[g]=this}this._name=g||an,this._changed(128)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},aF.each(["locked","visible","blendMode","opacity","guide"],function(a){var b=aF.capitalize(a),a="_"+a;this["get"+b]=function(){return this[a]},this["set"+b]=function(c){c!=this[a]&&(this[a]=c,this._changed("_locked"===a?128:129))}},{}),{beans:!0,_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._selectChildren){for(var a=this._children,b=0,c=a.length;c>b;b++){if(a[b].isSelected()){return !0}}}return this._selected},setSelected:function(b,d){if(!d&&this._selectChildren){for(var f=this._children,a=0,c=f.length;c>a;a++){f[a].setSelected(b)}}(b=!!b)^this._selected&&(this._selected=b,this._project._updateSelection(this),this._changed(129))},_selected:!1,isFullySelected:function(){var a=this._children;if(a&&this._selected){for(var b=0,c=a.length;c>b;b++){if(!a[b].isFullySelected()){return !1}}return !0}return this._selected},setFullySelected:function(b){var c=this._children;if(c){for(var d=0,a=c.length;a>d;d++){c[d].setFullySelected(b)}}this.setSelected(b,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(b){var c=this._position,d=b?aC:am;if(!c){var a=this._pivot;c=this._position=a?this._matrix._transformPoint(a):this.getBounds().getCenter(!0)}return new d(c.x,c.y,this,"setPosition")},setPosition:function(){this.translate(aC.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(a){var b=this._pivot;if(b){var c=a?aC:am;b=new c(b.x,b.y,this,"setPivot")}return b},setPivot:function(){this._pivot=aC.read(arguments,0,{clone:!0,readNull:!0}),this._position=an},_pivot:null},aF.each(["bounds","strokeBounds","handleBounds","roughBounds","internalBounds","internalRoughBounds"],function(b){var d="get"+aF.capitalize(b),a=b.match(/^internal(.*)$/),c=a?"get"+a[1]:null;this[d]=function(j){var g=this._boundsGetter,h=!c&&("string"==typeof g?g:g&&g[d])||d,f=this._getCachedBounds(h,j,this,c);return"bounds"===b?new aE(f.x,f.y,f.width,f.height,this,"setBounds"):f}},{beans:!0,_getBounds:function(w,m,f){var j=this._children;if(!j||0==j.length){return new aG}ax._updateBoundsCache(this,f);for(var b=1/0,x=-b,q=b,d=x,k=0,v=j.length;v>k;k++){var g=j[k];if(g._visible&&!g.isEmpty()){var p=g._getCachedBounds(w,m&&m.chain(g._matrix),f);b=Math.min(p.x,b),q=Math.min(p.y,q),x=Math.max(p.x+p.width,x),d=Math.max(p.y+p.height,d)}}return isFinite(b)?new aG(b,q,x-b,d-q):new aG},setBounds:function(){var b=aG.read(arguments),c=this.getBounds(),d=new aD,a=b.getCenter();d.translate(a),(b.width!=c.width||b.height!=c.height)&&d.scale(0!=c.width?b.width/c.width:1,0!=c.height?b.height/c.height:1),a=c.getCenter(),d.translate(-a.x,-a.y),this.transform(d)},_getCachedBounds:function(d,h,k,c){h=h&&h.orNullIfIdentity();var g=c?null:this._matrix.orNullIfIdentity(),f=(!h||h.equals(g))&&d;if(ax._updateBoundsCache(this._parent||this._parentSymbol,k),f&&this._bounds&&this._bounds[f]){return this._bounds[f].clone()}var b=this._getBounds(c||d,h||g,k);if(f){this._bounds||(this._bounds={});var j=this._bounds[f]=b.clone();j._internal=!!c}return b},statics:{_updateBoundsCache:function(b,c){if(b){var d=c._id,a=b._boundsCache=b._boundsCache||{ids:{},list:[]};a.ids[d]||(a.list.push(c),a.ids[d]=c)}},_clearBoundsCache:function(g){var h=g._boundsCache;if(h){g._bounds=g._position=g._boundsCache=an;for(var c=0,f=h.list,d=f.length;d>c;c++){var b=f[c];b!==g&&(b._bounds=b._position=an,b._boundsCache&&ax._clearBoundsCache(b))}}}}}),{beans:!0,_decompose:function(){return this._decomposed=this._matrix.decompose()},getRotation:function(){var a=this._decomposed||this._decompose();return a&&a.rotation},setRotation:function(a){var b=this.getRotation();if(null!=b&&null!=a){var c=this._decomposed;this.rotate(a-b),c.rotation=a,this._decomposed=c}},getScaling:function(b){var c=this._decomposed||this._decompose(),d=c&&c.scaling,a=b?aC:am;return d&&new a(d.x,d.y,this,"setScaling")},setScaling:function(){var a=this.getScaling();if(a){var b=aC.read(arguments,0,{clone:!0}),c=this._decomposed;this.scale(b.x/a.x,b.y/a.y),c.scaling=b,this._decomposed=c}},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.initialize.apply(a,arguments),this._applyMatrix?this.transform(null,!0):this._changed(9)},getGlobalMatrix:function(b){var c=this._globalMatrix,d=this._project._updateVersion;if(c&&c._updateVersion!==d&&(c=null),!c){c=this._globalMatrix=this._matrix.clone();var a=this._parent;a&&c.preConcatenate(a.getGlobalMatrix(!0)),c._updateVersion=d}return b?c:c.clone()},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(b,d){if(this._project!==b){this._project&&this._installEvents(!1),this._project=b;for(var f=this._children,a=0,c=f&&f.length;c>a;a++){f[a]._setProject(b)}d=!0}d&&this._installEvents(!0)},getView:function(){return this._project.getView()},_installEvents:function ak(b){ak.base.call(this,b);for(var c=this._children,d=0,a=c&&c.length;a>d;d++){c[d]._installEvents(b)}},getLayer:function(){for(var a=this;a=a._parent;){if(a instanceof aj){return a}}return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return aF.equals(this._children,a._children)},clone:function(a){return this._clone(new this.constructor(ax.NO_INSERT),a)},_clone:function(k,d,g){var f=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],b=this._children;k.setStyle(this._style);for(var j=0,e=b&&b.length;e>j;j++){k.addChild(b[j].clone(!1),!0)}for(var j=0,e=f.length;e>j;j++){var c=f[j];this.hasOwnProperty(c)&&(k[c]=this[c])}return g!==!1&&k._matrix.initialize(this._matrix),k.setApplyMatrix(this._applyMatrix),k.setPivot(this._pivot),k.setSelected(this._selected),k._data=this._data?aF.clone(this._data):null,(d||d===an)&&k.insertAbove(this),this._name&&k.setName(this._name,!0),k},copyTo:function(a){return a.addChild(this.clone(!1))},rasterize:function(m){var e=this.getStrokeBounds(),f=(m||this.getView().getResolution())/72,b=e.getTopLeft().floor(),p=e.getBottomRight().ceil(),k=new ay(p.subtract(b)),d=aO.getCanvas(k.multiply(f)),g=d.getContext("2d"),l=(new aD).scale(f).translate(b.negate());g.save(),l.applyToContext(g),this.draw(g,new aF({matrices:[l]})),g.restore();var j=new aI(ax.NO_INSERT);return j.setCanvas(d),j.transform((new aD).translate(b.add(k.divide(2))).scale(1/f)),j.insertAbove(this),j},contains:function(){return !!this._contains(this._matrix._inverseTransform(aC.read(arguments)))},_contains:function(a){if(this._children){for(var b=this._children.length-1;b>=0;b--){if(this._children[b].contains(a)){return !0}}return !1}return a.isInside(this.getInternalBounds())},isInside:function(){return aG.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new bf.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,b){return a instanceof ax?this._asPathItem().getIntersections(a._asPathItem(),null,b||a._matrix,!0).length>0:!1},hitTest:function(){return this._hitTest(aC.read(arguments),aW.getOptions(aF.read(arguments)))},_hitTest:function(k,q){function b(a,d){var c=w["get"+d]();return k.subtract(c).divide(D).length<=1?new aW(a,x,{name:aF.hyphenate(d),point:c}):an}if(this._locked||!this._visible||this._guide&&!q.guides||this.isEmpty()){return null}var E=this._matrix,A=q._totalMatrix,j=this.getView(),t=q._totalMatrix=A?A.chain(E):this.getGlobalMatrix().preConcatenate(j._matrix),D=q._tolerancePadding=new ay(bf._getPenPadding(1,t.inverted())).multiply(Math.max(q.tolerance,0.000001));if(k=E._inverseTransform(k),!this._children&&!this.getInternalRoughBounds().expand(D.multiply(2))._containsPoint(k)){return null}var z,y=!(q.guides&&!this._guide||q.selected&&!this._selected||q.type&&q.type!==aF.hyphenate(this._class)||q["class"]&&!(this instanceof q["class"])),x=this;if(y&&(q.center||q.bounds)&&this._parent){var w=this.getInternalBounds();if(q.center&&(z=b("center","Center")),!z&&q.bounds){for(var C=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],B=0;8>B&&!z;B++){z=b("bounds",C[B])}}}var e=!z&&this._children;if(e){for(var l=this._getChildHitTestOptions(q),B=e.length-1;B>=0&&!z;B--){z=e[B]._hitTest(k,l)}}return !z&&y&&(z=this._hitTestSelf(k,q)),z&&z.point&&(z.point=E.transform(z.point)),q._totalMatrix=A,z},_getChildHitTestOptions:function(a){return a},_hitTestSelf:function(a,b){return b.fill&&this.hasFill()&&this._contains(a)?new aW("fill",this):an},matches:function(d,g){function c(i,l){for(var k in i){if(i.hasOwnProperty(k)){var j=i[k],h=l[k];if(aF.isPlainObject(j)&&aF.isPlainObject(h)){if(!c(j,h)){return !1}}else{if(!aF.equals(j,h)){return !1}}}}return !0}var f=typeof d;if("object"===f){for(var e in d){if(d.hasOwnProperty(e)&&!this.matches(e,d[e])){return !1}}}else{if("function"===f){return d(this)}var b=/^(empty|editable)$/.test(d)?this["is"+aF.capitalize(d)]():"type"===d?aF.hyphenate(this._class):this[d];if(/^(constructor|class)$/.test(d)){if(!(this instanceof g)){return !1}}else{if(g instanceof RegExp){if(!g.test(b)){return !1}}else{if("function"==typeof g){if(!g(b)){return !1}}else{if(aF.isPlainObject(g)){if(!c(g,b)){return !1}}else{if(!aF.equals(b,g)){return !1}}}}}}return !0},getItems:function(a){return ax._getItems(this._children,a,this._matrix)},getItem:function(a){return ax._getItems(this._children,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function aM(B,g,k,b,C){if(!b&&"object"==typeof g){var x=g.overlapping,e=g.inside,m=x||e,A=m&&aG.read([m]);b={items:[],inside:!!e,overlapping:!!x,rect:A,path:x&&new bf.Rectangle({rectangle:A,insert:!1})},m&&(g=aF.set({},g,{inside:!0,overlapping:!0}))}var j=b&&b.items,A=b&&b.rect;k=A&&(k||new aD);for(var w=0,q=B&&B.length;q>w;w++){var z=B[w],y=k&&k.chain(z._matrix),d=!0;if(A){var m=z.getBounds(y);if(!A.intersects(m)){continue}b.inside&&A.contains(m)||b.overlapping&&(m.contains(A)||b.path.intersects(z,y))||(d=!1)}if(d&&z.matches(g)&&(j.push(z),C)){break}if(aM(z._children,g,y,b,C),C&&j.length>0){break}}return j}}},{importJSON:function(a){var b=aF.importJSON(a,this);return b!==this?this.addChild(b):b},addChild:function(a,b){return this.insertChild(an,a,b)},insertChild:function(b,c,d){var a=c?this.insertChildren(b,[c],d):null;return a&&a[0]},addChildren:function(a,b){return this.insertChildren(this._children.length,a,b)},insertChildren:function(q,e,g,b){var v=this._children;if(v&&e&&e.length>0){e=Array.prototype.slice.apply(e);for(var m=e.length-1;m>=0;m--){var d=e[m];if(!b||d instanceof b){var j=d._parent===this&&d._index<q;d._remove(!1,!0)&&j&&q--}else{e.splice(m,1)}}aF.splice(v,e,q,0);for(var p=this._project,f=p&&p._changes,m=0,k=e.length;k>m;m++){var d=e[m];d._parent=this,d._setProject(this._project,!0),d._name&&d.setName(d._name),f&&this._changed(5)}this._changed(11)}else{e=null}return e},_insertSibling:function(a,b,c){return this._parent?this._parent.insertChild(a,b,c):null},insertAbove:function(a,b){return a._insertSibling(a._index+1,this,b)},insertBelow:function(a,b){return a._insertSibling(a._index,this,b)},sendToBack:function(){return(this._parent||this instanceof aj&&this._project).insertChild(0,this)},bringToFront:function(){return(this._parent||this instanceof aj&&this._project).addChild(this)},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",reduce:function(){if(this._children&&1===this._children.length){var a=this._children[0].reduce();return a.insertAbove(this),a.setStyle(this._style),this.remove(),a}return this},_removeNamed:function(){var b=this._parent;if(b){var f=b._children,g=b._namedChildren,a=this._name,d=g[a],c=d?d.indexOf(this):-1;-1!==c&&(f[a]==this&&delete f[a],d.splice(c,1),d.length?f[a]=d[d.length-1]:delete g[a])}},_remove:function(b,d){var a=this._parent;if(a){if(this._name&&this._removeNamed(),null!=this._index&&aF.splice(a._children,null,this._index,1),this._installEvents(!1),b){var c=this._project;c&&c._changes&&this._changed(5)}return d&&a._changed(11),this._parent=null,!0}return !1},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var b=a&&a.insertBelow(this);return b&&this.remove(),b},removeChildren:function(b,d){if(!this._children){return null}b=b||0,d=aF.pick(d,this._children.length);for(var a=aF.splice(this._children,null,b,d-b),c=a.length-1;c>=0;c--){a[c]._remove(!0,!1)}return a.length>0&&this._changed(11),a},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,b=this._children.length;b>a;a++){this._children[a]._index=a}this._changed(11)}},isEmpty:function(){return !this._children||0===this._children.length},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked){return !1}a=a._parent}return !0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(b){function f(h){var i=[];do{i.unshift(h)}while(h=h._parent);return i}for(var g=f(this),a=f(b),d=0,c=Math.min(g.length,a.length);c>d;d++){if(g[d]!=a[d]){return g[d]._index<a[d]._index?1:-1}}return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(a){return -1===this._getOrder(a)},isBelow:function(a){return 1===this._getOrder(a)},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var b=this;b=b._parent;){if(b==a){return !0}}return !1},isAncestor:function(a){return a?a.isDescendant(this):!1},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var b=this._parent;b;){if(b._parent&&/^(Group|Layer|CompoundPath)$/.test(b._class)&&a.isDescendant(b)){return !0}b=b._parent}return !1},translate:function(){var a=new aD;return this.transform(a.translate.apply(a,arguments))},rotate:function(a){return this.transform((new aD).rotate(a,aC.read(arguments,1,{readNull:!0})||this.getPosition(!0)))}},aF.each(["scale","shear","skew"],function(a){this[a]=function(){var b=aC.read(arguments),c=aC.read(arguments,0,{readNull:!0});return this.transform((new aD)[a](b,c||this.getPosition(!0)))}},{}),{transform:function(D,x,k,p){D&&D.isIdentity()&&(D=null);var b=this._matrix,E=(x||this._applyMatrix)&&(!b.isIdentity()||D||x&&k&&this._children);if(!D&&!E){return this}if(D&&b.preConcatenate(D),E=E&&this._transformContent(b,k,p)){var A=this._pivot,j=this._style,q=j.getFillColor(!0),C=j.getStrokeColor(!0);A&&b._transformPoint(A,A,!0),q&&q.transform(b),C&&C.transform(b),b.reset(!0),p&&this._canApplyMatrix&&(this._applyMatrix=!0)}var m=this._bounds,z=this._position;this._changed(9);var y=m&&D&&D.decompose();if(y&&!y.shearing&&y.rotation%90===0){for(var w in m){var v=m[w];(E||!v._internal)&&D._transformBounds(v,v)}var B=this._boundsGetter,v=m[B&&B.getBounds||B||"getBounds"];v&&(this._position=v.getCenter(!0)),this._bounds=m}else{D&&z&&(this._position=D._transformPoint(z,z))}return this},_transformContent:function(b,f,g){var a=this._children;if(a){for(var d=0,c=a.length;c>d;d++){a[d].transform(b,!0,f,g)}return !0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(aC.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(aC.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(aC.read(arguments))},localToParent:function(){return this._matrix._transformPoint(aC.read(arguments))},fitBounds:function(d,h){d=aG.read(arguments);var j=this.getBounds(),c=j.height/j.width,g=d.height/d.width,f=(h?c>g:g>c)?d.width/j.width:d.height/j.height,b=new aG(new aC,new ay(j.width*f,j.height*f));b.setCenter(d.getCenter()),this.setBounds(b)},_setStyles:function(y){var p=this._style,g=p.getFillColor(),k=p.getStrokeColor(),b=p.getShadowColor();if(g&&(y.fillStyle=g.toCanvasStyle(y)),k){var z=p.getStrokeWidth();if(z>0){y.strokeStyle=k.toCanvasStyle(y),y.lineWidth=z;var w=p.getStrokeJoin(),f=p.getStrokeCap(),m=p.getMiterLimit();if(w&&(y.lineJoin=w),f&&(y.lineCap=f),m&&(y.miterLimit=m),paper.support.nativeDash){var x=p.getDashArray(),j=p.getDashOffset();x&&x.length&&("setLineDash" in y?(y.setLineDash(x),y.lineDashOffset=j):(y.mozDash=x,y.mozDashOffset=j))}}}if(b){var v=p.getShadowBlur();if(v>0){y.shadowColor=b.toCanvasStyle(y),y.shadowBlur=v;var q=this.getShadowOffset();y.shadowOffsetX=q.x,y.shadowOffsetY=q.y}}},draw:function(B,N,G){function J(a){return R?R.chain(a):a}var D=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var C=N.matrices,R=N.viewMatrix,F=this._matrix,K=C[C.length-1].chain(F);if(K.isInvertible()){C.push(K),N.updateMatrix&&(K._updateVersion=D,this._globalMatrix=K);var A,I,P,O=this._blendMode,M=this._opacity,L="normal"===O,S=a4.nativeModes[O],z=L&&1===M||N.dontStart||N.clip||(S||L&&1>M)&&this._canComposite(),E=N.pixelRatio||1;if(!z){var H=this.getStrokeBounds(J(K));if(!H.width||!H.height){return}P=N.offset,I=N.offset=H.getTopLeft().floor(),A=B,B=aO.getContext(H.getSize().ceil().add(1).multiply(E)),1!==E&&B.scale(E,E)}B.save();var j=G?G.chain(F):!this.getStrokeScaling(!0)&&J(K),q=!z&&N.clipItem,k=!j||q;if(z?(B.globalAlpha=M,S&&(B.globalCompositeOperation=O)):k&&B.translate(-I.x,-I.y),k&&(z?F:J(K)).applyToContext(B),q&&N.clipItem.draw(B,N.extend({clip:!0})),j){B.setTransform(E,0,0,E,0,0);var Q=N.offset;Q&&B.translate(-Q.x,-Q.y)}this._draw(B,N,j),B.restore(),C.pop(),N.clip&&!N.dontFinish&&B.clip(),z||(a4.process(O,B,A,M,I.subtract(P).multiply(E)),aO.release(B),N.offset=P)}}},_isUpdated:function(a){var b=this._parent;if(b instanceof a0){return b._isUpdated(a)}var c=this._updateVersion===a;return !c&&b&&b._visible&&b._isUpdated(a)&&(this._updateVersion=a,c=!0),c},_drawSelection:function(m,j,d,f,b){if((this._drawSelected||this._boundsSelected)&&this._isUpdated(b)){var p=this.getSelectedColor(!0)||this.getLayer().getSelectedColor(!0),k=j.chain(this.getGlobalMatrix(!0));if(m.strokeStyle=m.fillStyle=p?p.toCanvasStyle(m):"#009dec",this._drawSelected&&this._drawSelected(m,k,f),this._boundsSelected){var c=d/2,g=k._transformCorners(this.getInternalBounds());m.beginPath();for(var l=0;8>l;l++){m[0===l?"moveTo":"lineTo"](g[l],g[++l])}m.closePath(),m.stroke();for(var l=0;8>l;l++){m.fillRect(g[l]-c,g[++l]-c,d,d)}}}},_canComposite:function(){return !1}},aF.each(["down","drag","up","move"],function(a){this["removeOn"+aF.capitalize(a)]=function(){var b={};return b[a]=!0,this.removeOn(b)}},{removeOn:function(b){for(var d in b){if(b[d]){var f="mouse"+d,a=this._project,c=a._removeSets=a._removeSets||{};c[f]=c[f]||{},c[f][this._id]=this}}return this}})),ah=ax.extend({_class:"Group",_selectChildren:!0,_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||this.addChildren(Array.isArray(a)?a:arguments)},_changed:function aq(a){aq.base.call(this,a),1026&a&&(this._clipItem=an)},_getClipItem:function(){var c=this._clipItem;if(c===an){c=null;for(var d=0,a=this._children.length;a>d;d++){var b=this._children[d];if(b._clipMask){c=b;break}}this._clipItem=c}return c},isClipped:function(){return !!this._getClipItem()},setClipped:function(a){var b=this.getFirstChild();b&&b.setClipMask(a)},_draw:function(d,h){var k=h.clip,c=!k&&this._getClipItem(),g=!0;if(h=h.extend({clipItem:c,clip:!1}),k?this._currentPath?(d.currentPath=this._currentPath,g=!1):(d.beginPath(),h.dontStart=h.dontFinish=!0):c&&c.draw(d,h.extend({clip:!0})),g){for(var f=0,b=this._children.length;b>f;f++){var j=this._children[f];j!==c&&j.draw(d,h)}}k&&(this._currentPath=d.currentPath)}}),aj=ah.extend({_class:"Layer",initialize:function(c){var a=aF.isPlainObject(c)?new aF(c):{children:Array.isArray(c)?c:arguments},b=a.insert;a.insert=!1,ah.call(this,a),(b||b===an)&&(this._project.addChild(this),this.activate())},_remove:function bm(b,c){if(this._parent){return bm.base.call(this,b,c)}if(null!=this._index){var a=this._project;return a._activeLayer===this&&(a._activeLayer=this.getNextSibling()||this.getPreviousSibling()),aF.splice(a.layers,null,this._index,1),this._installEvents(!1),b&&a._changes&&this._changed(5),c&&(a._needsUpdate=!0),!0}return !1},getNextSibling:function ae(){return this._parent?ae.base.call(this):this._project.layers[this._index+1]||null},getPreviousSibling:function ab(){return this._parent?ab.base.call(this):this._project.layers[this._index-1]||null},isInserted:function bl(){return this._parent?bl.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_insertSibling:function bg(a,b,c){return this._parent?bg.base.call(this,a,b,c):this._project.insertChild(a,b,c)}}),ai=ax.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_boundsSelected:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(a){this._initialize(a)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&aF.equals(this._radius,a._radius)},clone:function(a){var b=new ai(ax.NO_INSERT);return b.setType(this._type),b.setSize(this._size),b.setRadius(this._radius),this._clone(b,a)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new aH(a.width,a.height,this,"setSize")},setSize:function(){var b=ay.read(arguments);if(this._size){if(!this._size.equals(b)){var d=this._type,f=b.width,a=b.height;if("rectangle"===d){var c=ay.min(this._radius,b.divide(2));this._radius.set(c.width,c.height)}else{"circle"===d?(f=a=(f+a)/2,this._radius=f/2):"ellipse"===d&&this._radius.set(f/2,a/2)}this._size.set(f,a),this._changed(9)}}else{this._size=b.clone()}},getRadius:function(){var a=this._radius;return"circle"===this._type?a:new aH(a.width,a.height,this,"setRadius")},setRadius:function(a){var b=this._type;if("circle"===b){if(a===this._radius){return}var c=2*a;this._radius=a,this._size.set(c,c)}else{if(a=ay.read(arguments),this._radius){if(this._radius.equals(a)){return}if(this._radius.set(a.width,a.height),"rectangle"===b){var c=ay.max(this._size,a.multiply(2));this._size.set(c.width,c.height)}else{"ellipse"===b&&this._size.set(2*a.width,2*a.height)}}else{this._radius=a.clone()}}this._changed(9)},isEmpty:function(){return !1},toPath:function(a){var b=this._clone(new (bf[aF.capitalize(this._type)])({center:new aC,size:this._size,radius:this._radius,insert:!1}),a);return paper.settings.applyMatrix&&b.setApplyMatrix(!0),b},_draw:function(A,M,F){var I=this._style,C=I.hasFill(),B=I.hasStroke(),P=M.dontFinish||M.clip,E=!F;if(C||B||P){var J=this._type,z=this._radius,H="circle"===J;if(M.dontStart||A.beginPath(),E&&H){A.arc(0,0,z,0,2*Math.PI,!0)}else{var O=H?z:z.width,N=H?z:z.height,L=this._size,K=L.width,Q=L.height;if(E&&"rectangle"===J&&0===O&&0===N){A.rect(-K/2,-Q/2,K,Q)}else{var q=K/2,D=Q/2,G=0.44771525016920644,b=O*G,k=N*G,j=[-q,-D+N,-q,-D+k,-q+b,-D,-q+O,-D,q-O,-D,q-b,-D,q,-D+k,q,-D+N,q,D-N,q,D-k,q-b,D,q-O,D,-q+O,D,-q+b,D,-q,D-k,-q,D-N];F&&F.transform(j,j,32),A.moveTo(j[0],j[1]),A.bezierCurveTo(j[2],j[3],j[4],j[5],j[6],j[7]),q!==O&&A.lineTo(j[8],j[9]),A.bezierCurveTo(j[10],j[11],j[12],j[13],j[14],j[15]),D!==N&&A.lineTo(j[16],j[17]),A.bezierCurveTo(j[18],j[19],j[20],j[21],j[22],j[23]),q!==O&&A.lineTo(j[24],j[25]),A.bezierCurveTo(j[26],j[27],j[28],j[29],j[30],j[31])}}A.closePath()}P||!C&&!B||(this._setStyles(A),C&&(A.fill(I.getWindingRule()),A.shadowColor="rgba(0,0,0,0)"),B&&A.stroke())},_canComposite:function(){return !(this.hasFill()&&this.hasStroke())},_getBounds:function(a,b){var c=new aG(this._size).setCenter(0,0);return"getBounds"!==a&&this.hasStroke()&&(c=c.expand(this.getStrokeWidth())),b?b._transformBounds(c):c}},new function(){function b(v,m,h){var k=v._radius;if(!k.isZero()){for(var f=v._size.divide(2),w=0;4>w;w++){var p=new aC(1&w?1:-1,w>1?1:-1),g=p.multiply(f),q=g.subtract(p.multiply(k)),j=new aG(g,q);if((h?j.expand(h):j).contains(m)){return q}}}}function c(h,l){var m=h.getAngleInRadians(),g=2*l.width,k=2*l.height,j=g*Math.sin(m),f=k*Math.cos(m);return g*k/(2*Math.sqrt(j*j+f*f))}return{_contains:function d(g){if("rectangle"===this._type){var f=b(this,g);return f?g.subtract(f).divide(this._radius).getLength()<=1:d.base.call(this,g)}return g.divide(this.size).getLength()<=0.5},_hitTestSelf:function a(j,e){var x=!1;if(this.hasStroke()){var v=this._type,i=this._radius,m=this.getStrokeWidth()+2*e.tolerance;if("rectangle"===v){var w=b(this,j,m);if(w){var k=j.subtract(w);x=2*Math.abs(k.getLength()-c(k,i))<=m}else{var t=new aG(this._size).setCenter(0,0),q=t.expand(m),p=t.expand(-m);x=q._containsPoint(j)&&!p._containsPoint(j)}}else{"ellipse"===v&&(i=c(j,i)),x=2*Math.abs(j.getLength()-i)<=m}}return x?new aW("stroke",this):a.base.apply(this,arguments)}}},{statics:new function(){function a(d,g,c,f,e){var b=new ai(aF.getNamed(e));return b._type=d,b._size=c,b._radius=f,b.translate(g)}return{Circle:function(){var c=aC.readNamed(arguments,"center"),b=aF.readNamed(arguments,"radius");return a("circle",c,new ay(2*b),b,arguments)},Rectangle:function(){var b=aG.readNamed(arguments,"rectangle"),c=ay.min(ay.readNamed(arguments,"radius"),b.getSize(!0).divide(2));return a("rectangle",b.getCenter(!0),b.getSize(!0),c,arguments)},Ellipse:function(){var b=ai._readEllipse(arguments),c=b.radius;return a("ellipse",b.center,c.multiply(2),c,arguments)},_readEllipse:function(c){var e,b;if(aF.hasNamed(c,"radius")){e=aC.readNamed(c,"center"),b=ay.readNamed(c,"radius")}else{var d=aG.readNamed(c,"rectangle");e=d.getCenter(!0),b=d.getSize(!0).divide(2)}return{center:e,radius:b}}}}}),aI=ax.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{crossOrigin:null,source:null},initialize:function(a,b){this._initialize(a,b!==an&&aC.read(arguments,1))||("string"==typeof a?this.setSource(a):this.setImage(a)),this._size||(this._size=new ay,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},clone:function(b){var d=new aI(ax.NO_INSERT),f=this._image,a=this._canvas;if(f){d.setImage(f)}else{if(a){var c=aO.getCanvas(this._size);c.getContext("2d").drawImage(a,0,0),d.setImage(c)}}return d._crossOrigin=this._crossOrigin,this._clone(d,b)},getSize:function(){var a=this._size;return new aH(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(){var a=ay.read(arguments);if(!a.equals(this._size)){if(a.width>0&&a.height>0){var b=this.getElement();this.setImage(aO.getCanvas(a)),b&&this.getContext(!0).drawImage(b,0,0,a.width,a.height)}else{this._canvas&&aO.release(this._canvas),this._size=a.clone()}}},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},isEmpty:function(){var a=this._size;return !a||0===a.width&&0===a.height},getResolution:function(){var b=this._matrix,c=new aC(0,0).transform(b),d=new aC(1,0).transform(b).subtract(c),a=new aC(0,1).transform(b).subtract(c);return new ay(72/d.getLength(),72/a.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){this._canvas&&aO.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=a&&a.complete),this._size=new ay(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var a=aO.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch(b){aO.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(513)),this._context},setContext:function(a){this._context=a},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(b){function d(){var e=a.getView();e&&(paper=e._scope,a.setImage(f),a.emit("load"),e.update())}var f,a=this,c=this._crossOrigin;f=document.getElementById(b)||new Image,c&&(f.crossOrigin=c),f.naturalWidth&&f.naturalHeight?setTimeout(d,0):(ar.add(f,{load:d}),f.src||(f.src=b)),this.setImage(f)},getCrossOrigin:function(){return this._image&&this._image.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a,this._image&&(this._image.crossOrigin=a)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=aG.read(arguments),b=aO.getContext(a.getSize());return b.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),b.canvas},getSubRaster:function(){var a=aG.read(arguments),b=new aI(ax.NO_INSERT);return b.setImage(this.getSubCanvas(a)),b.translate(a.getCenter().subtract(this.getSize().divide(2))),b._matrix.preConcatenate(this._matrix),b.insertAbove(this),b},toDataURL:function(){var a=this._image&&this._image.src;if(/^data:/.test(a)){return a}var b=this.getCanvas();return b?b.toDataURL.apply(b,arguments):null},drawImage:function(a){var b=aC.read(arguments,1);this.getContext(!0).drawImage(a,b.x,b.y)},getAverageColor:function(D){var g,k;D?D instanceof ag?(k=D,g=D.getBounds()):D.width?g=new aG(D):D.x&&(g=new aG(D.x-0.5,D.y-0.5,1,1)):g=this.getBounds();var b=32,E=Math.min(g.width,b),z=Math.min(g.height,b),e=aI._sampleContext;e?e.clearRect(0,0,b+1,b+1):e=aI._sampleContext=aO.getContext(new ay(b)),e.save();var l=(new aD).scale(E/g.width,z/g.height).translate(-g.x,-g.y);l.applyToContext(e),k&&k.draw(e,new aF({clip:!0,matrices:[l]})),this._matrix.applyToContext(e);var C=this.getElement(),w=this._size;C&&e.drawImage(C,-w.width/2,-w.height/2),e.restore();for(var q=e.getImageData(0.5,0.5,Math.ceil(E),Math.ceil(z)).data,B=[0,0,0],A=0,d=0,j=q.length;j>d;d+=4){var x=q[d+3];A+=x,x/=255,B[0]+=q[d]*x,B[1]+=q[d+1]*x,B[2]+=q[d+2]*x}for(var d=0;3>d;d++){B[d]/=A}return A?aA.read(B):null},getPixel:function(){var a=aC.read(arguments),b=this.getContext().getImageData(a.x,a.y,1,1).data;return new aA("rgb",[b[0]/255,b[1]/255,b[2]/255],b[3]/255)},setPixel:function(){var d=aC.read(arguments),h=aA.read(arguments),j=h._convert("rgb"),c=h._alpha,g=this.getContext(!0),f=g.createImageData(1,1),b=f.data;b[0]=255*j[0],b[1]=255*j[1],b[2]=255*j[2],b[3]=null!=c?255*c:255,g.putImageData(f,d.x,d.y)},createImageData:function(){var a=ay.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=aG.read(arguments);return a.isEmpty()&&(a=new aG(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},setImageData:function(a){var b=aC.read(arguments,1);this.getContext(!0).putImageData(a,b.x,b.y)},_getBounds:function(a,b){var c=new aG(this._size).setCenter(0,0);return b?b._transformBounds(c):c},_hitTestSelf:function(a){if(this._contains(a)){var b=this;return new aW("pixel",b,{offset:a.add(b._size.divide(2)).round(),color:{get:function(){return b.getPixel(this.offset)}}})}},_draw:function(a){var b=this.getElement();b&&(a.globalAlpha=this._opacity,a.drawImage(b,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return !0}}),bc=ax.extend({_class:"PlacedSymbol",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(a,b){this._initialize(a,b!==an&&aC.read(arguments,1))||this.setSymbol(a instanceof au?a:new au(a))},_equals:function(a){return this._symbol===a._symbol},getSymbol:function(){return this._symbol},setSymbol:function(a){this._symbol=a,this._changed(9)},clone:function(a){var b=new bc(ax.NO_INSERT);return b.setSymbol(this._symbol),this._clone(b,a)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(b,c,d){var a=this.symbol._definition;return a._getCachedBounds(b,c&&c.chain(a._matrix),d)},_hitTestSelf:function(a,b){var c=this._symbol._definition._hitTest(a,b);return c&&(c.item=this),c},_draw:function(a,b){this.symbol._definition.draw(a,b)}}),aW=aF.extend({_class:"HitResult",initialize:function(a,b,c){this.type=a,this.item=b,c&&(c.enumerable=!0,this.inject(c))},statics:{getOptions:function(a){return new aF({type:null,tolerance:paper.settings.hitTolerance,fill:!a,stroke:!a,segments:!a,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},a)}}}),aZ=aF.extend({_class:"Segment",beans:!0,initialize:function(k,d,g,b,q,m){var c,j,p,f=arguments.length;0===f||(1===f?"point" in k?(c=k.point,j=k.handleIn,p=k.handleOut):c=k:2===f&&"number"==typeof k?c=arguments:3>=f?(c=k,j=d,p=g):(c=k!==an?[k,d]:null,j=g!==an?[g,b]:null,p=q!==an?[q,m]:null)),new az(c,this,"_point"),new az(j,this,"_handleIn"),new az(p,this,"_handleOut")},_serialize:function(a){return aF.serialize(this.hasHandles()?[this._point,this._handleIn,this._handleOut]:this._point,a,!0)},_changed:function(b){var d=this._path;if(d){var f,a=d._curves,c=this._index;a&&(b&&b!==this._point&&b!==this._handleIn||!(f=c>0?a[c-1]:d._closed?a[a.length-1]:null)||f._changed(),b&&b!==this._point&&b!==this._handleOut||!(f=a[c])||f._changed()),d._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var a=aC.read(arguments);this._point.set(a.x,a.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var a=aC.read(arguments);this._handleIn.set(a.x,a.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var a=aC.read(arguments);this._handleOut.set(a.x,a.y)},hasHandles:function(){return !this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_selectionState:0,isSelected:function(a){var b=this._selectionState;return a?a===this._point?!!(4&b):a===this._handleIn?!!(1&b):a===this._handleOut?!!(2&b):!1:!!(7&b)},setSelected:function(b,f){var g=this._path,b=!!b,a=this._selectionState,d=a,c=f?f===this._point?4:f===this._handleIn?1:f===this._handleOut?2:0:7;b?a|=c:a&=~c,this._selectionState=a,g&&a!==d&&(g._updateSelection(this,d,a),g._changed(129))},getIndex:function(){return this._index!==an?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,b=this._index;return a?(b>0&&!a._closed&&b===a._segments.length-1&&b--,a.getCurves()[b]||null):null},getLocation:function(){var a=this.getCurve();return a?new a2(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var b=this._handleIn,c=this._handleOut,d=b._x,a=b._y;b.set(c._x,c._y),c.set(d,a)},reversed:function(){return new aZ(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new aZ(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,Array(6),!0),this._changed()},_transformCoordinates:function(l,j,d){var f=this._point,b=d&&this._handleIn.isZero()?null:this._handleIn,m=d&&this._handleOut.isZero()?null:this._handleOut,k=f._x,c=f._y,g=2;return j[0]=k,j[1]=c,b&&(j[g++]=b._x+k,j[g++]=b._y+c),m&&(j[g++]=m._x+k,j[g++]=m._y+c),l&&(l._transformCoordinates(j,j,g/2),k=j[0],c=j[1],d?(f._x=k,f._y=c,g=2,b&&(b._x=j[g++]-k,b._y=j[g++]-c),m&&(m._x=j[g++]-k,m._y=j[g++]-c)):(b||(j[g++]=k,j[g++]=c),m||(j[g++]=k,j[g++]=c))),j}}),az=aC.extend({initialize:function(g,j,c){var f,d,b;if(g){if((f=g[0])!==an){d=g[1]}else{var h=g;(f=h.x)===an&&(h=aC.read(arguments),f=h.x),d=h.y,b=h.selected}}else{f=d=0}this._x=f,this._y=d,this._owner=j,j[c]=this,b&&this.setSelected(!0)},set:function(a,b){return this._x=a,this._y=b,this._owner._changed(this),this},_serialize:function(b){var c=b.formatter,d=c.number(this._x),a=c.number(this._y);return this.isSelected()?{x:d,y:a,selected:!0}:[d,a]},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){return aK.isZero(this._x)&&aK.isZero(this._y)},setSelected:function(a){this._owner.setSelected(a,this)},isSelected:function(){return this._owner.isSelected(this)}}),a6=aF.extend({_class:"Curve",initialize:function(C,x,k,p,b,D,A,j){var q,B,m,z,y,w,v=arguments.length;3===v?(this._path=C,q=x,B=k):0===v?(q=new aZ,B=new aZ):1===v?"segment1" in C?(q=new aZ(C.segment1),B=new aZ(C.segment2)):"point1" in C?(m=C.point1,y=C.handle1,w=C.handle2,z=C.point2):Array.isArray(C)&&(m=[C[0],C[1]],z=[C[6],C[7]],y=[C[2]-C[0],C[3]-C[1]],w=[C[4]-C[6],C[5]-C[7]]):2===v?(q=new aZ(C),B=new aZ(x)):4===v?(m=C,y=x,w=k,z=p):8===v&&(m=[C,x],z=[A,j],y=[k-C,p-x],w=[b-A,D-j]),this._segment1=q||new aZ(m,null,y),this._segment2=B||new aZ(z,w,null)},_serialize:function(a){return aF.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0)},_changed:function(){this._length=this._bounds=an},clone:function(){return new a6(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},remove:function(){var a=!1;if(this._path){var b=this._segment2,c=b._handleOut;a=b.remove(),a&&this._segment1._handleOut.set(c.x,c.y)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){var a=aC.read(arguments);this._segment1._point.set(a.x,a.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var a=aC.read(arguments);this._segment2._point.set(a.x,a.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var a=aC.read(arguments);this._segment1._handleOut.set(a.x,a.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var a=aC.read(arguments);this._segment2._handleIn.set(a.x,a.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return a6.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),b=[],c=0;8>c;c+=2){b.push(new aC(a[c],a[c+1]))}return b},getLength:function(){return null==this._length&&(this._length=a6.getLength(this.getValues(),0,1)),this._length},getArea:function(){return a6.getArea(this.getValues())},getLine:function(){return new aL(this._segment1._point,this._segment2._point)},getPart:function(a,b){return new a6(a6.getPart(this.getValues(),a,b))},getPartLength:function(a,b){return a6.getLength(this.getValues(),a,b)},getIntersections:function(a){return a6._getIntersections(this.getValues(),a&&a!==this?a.getValues():null,this,a,[],{})},_getParameter:function(a,b){return b?a:a&&a.curve===this?a.parameter:a===an&&b===an?0.5:this.getParameterAt(a,0)},divide:function(F,y,k){var q=this._getParameter(F,y),b=4e-7,G=1-b,B=null;if(q>=b&&G>=q){var j=a6.subdivide(this.getValues(),q),E=j[0],m=j[1],A=k||this.hasHandles(),z=this._segment1,x=this._segment2,w=this._path;A&&(z._handleOut.set(E[2]-E[0],E[3]-E[1]),x._handleIn.set(m[4]-m[6],m[5]-m[7]));var D=E[6],C=E[7],h=new aZ(new aC(D,C),A&&new aC(E[4]-D,E[5]-C),A&&new aC(m[2]-D,m[3]-C));w?(w.insert(z._index+1,h),B=this.getNext()):(this._segment2=h,B=new a6(h,x))}return B},split:function(a,b){return this._path?this._path.split(this._segment1._index,this._getParameter(a,b)):null},reversed:function(){return new a6(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(d,h,k){var c=d._point,g=d._handleOut,f=h._handleIn,b=h._point,j=[c._x,c._y,c._x+g._x,c._y+g._y,b._x+f._x,b._y+f._y,b._x,b._y];return k&&k._transformCoordinates(j,j,4),j},subdivide:function(N,G){var J=N[0],D=N[1],A=N[2],R=N[3],F=N[4],K=N[5],z=N[6],I=N[7];G===an&&(G=0.5);var P=1-G,O=P*J+G*A,M=P*D+G*R,L=P*A+G*F,S=P*R+G*K,t=P*F+G*z,E=P*K+G*I,H=P*O+G*L,j=P*M+G*S,q=P*L+G*t,k=P*S+G*E,Q=P*H+G*q,B=P*j+G*k;return[[J,D,O,M,H,j,Q,B],[Q,B,q,k,t,E,z,I]]},solveCubic:function(y,q,g,k,a,z){var b=y[q],m=y[q+2],x=y[q+4],j=y[q+6],w=3*(m-b),v=3*(x-m)-w,p=j-b-w-v;return aK.solveCubic(p,v,w,b-g,k,a,z)},getParameterOf:function(w,k){var g=new aC(w[0],w[1]),j=new aC(w[6],w[7]),b=1e-12,x=k.isClose(g,b)?0:k.isClose(j,b)?1:null;if(null!==x){return x}for(var q=[k.x,k.y],f=[],v=2e-7,h=0;2>h;h++){for(var p=a6.solveCubic(w,h,q[h],f,0,1),m=0;p>m;m++){if(x=f[m],k.isClose(a6.getPoint(w,x),v)){return x}}}return k.isClose(g,v)?0:k.isClose(j,v)?1:null},getNearestParameter:function(D,w){function j(c){if(c>=0&&1>=c){var a=w.getDistance(a6.getPoint(D,c),!0);if(q>a){return q=a,p=c,!0}}}if(a6.isStraight(D)){var m=D[0],b=D[1],E=D[6],z=D[7],h=E-m,C=z-b,k=h*h+C*C;if(0===k){return 0}var y=((w.x-m)*h+(w.y-b)*C)/k;return 1e-12>y?0:y>0.999999999999?1:a6.getParameterOf(D,new aC(m+y*h,b+y*C))}for(var x=100,q=1/0,p=0,B=0;x>=B;B++){j(B/x)}for(var A=1/(2*x);A>4e-7;){j(p-A)||j(p+A)||(A/=2)}return p},getPart:function(b,d,f){var a=d>f;if(a){var c=d;d=f,f=c}return d>0&&(b=a6.subdivide(b,d)[1]),1>f&&(b=a6.subdivide(b,(f-d)/(1-d))[0]),a?[b[6],b[7],b[4],b[5],b[2],b[3],b[0],b[1]]:b},hasHandles:function(a){var b=aK.isZero;return !(b(a[0]-a[2])&&b(a[1]-a[3])&&b(a[4]-a[6])&&b(a[5]-a[7]))},isFlatEnough:function(A,v){var j=A[0],m=A[1],b=A[2],B=A[3],y=A[4],g=A[5],p=A[6],z=A[7],k=3*b-2*j-p,x=3*B-2*m-z,w=3*y-2*p-j,q=3*g-2*z-m;return Math.max(k*k,w*w)+Math.max(x*x,q*q)<10*v*v},getArea:function(l){var j=l[0],d=l[1],f=l[6],b=l[7],m=(l[2]+j)/2,k=(l[3]+d)/2,c=(l[4]+l[6])/2,g=(l[5]+l[7])/2;return 6*((j-m)*(k+d)+(m-c)*(g+k)+(c-f)*(b+g))/10},getBounds:function(b){for(var d=b.slice(0,2),f=d.slice(),a=[0,0],c=0;2>c;c++){a6._addBounds(b[c],b[c+2],b[c+4],b[c+6],c,0,d,f,a)}return new aG(d[0],d[1],f[0]-d[0],f[1]-d[1])},_addBounds:function(k,H,A,D,w,q,z,E,j){function C(d,f){var g=d-f,c=d+f;g<z[w]&&(z[w]=g),c>E[w]&&(E[w]=c)}var J=3*(H-A)-k+D,I=2*(k+A)-4*H,G=H-k,F=aK.solveQuadratic(J,I,G,j),K=4e-7,b=1-K;C(D,0);for(var x=0;F>x;x++){var B=j[x],a=1-B;B>K&&b>B&&C(a*a*a*k+3*a*a*B*H+3*a*B*B*A+B*B*B*D,q)}}}},aF.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var b=this._bounds[a];if(!b){var c=this._path;b=this._bounds[a]=bf[a]([this._segment1,this._segment2],!1,c&&c.getStyle())}return b.clone()}},{}),aF.each({isStraight:function(b,f,g){if(f.isZero()&&g.isZero()){return !0}if(b.isZero()){return !1}if(f.isCollinear(b)&&g.isCollinear(b)){var a=b.dot(b),d=b.dot(f)/a,c=b.dot(g)/a;return d>=0&&1>=d&&0>=c&&c>=-1}return !1},isLinear:function(b,c,d){var a=b.divide(3);return c.equals(a)&&d.negate().equals(a)}},function(a,b){this[b]=function(){var c=this._segment1,d=this._segment2;return a(d._point.subtract(c._point),c._handleOut,d._handleIn)},this.statics[b]=function(g){var h=g[0],c=g[1],f=g[6],d=g[7];return a(new aC(f-h,d-c),new aC(g[2]-h,g[3]-c),new aC(g[4]-f,g[5]-d))}},{statics:{},hasHandles:function(){return !this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAt(0.5,!0).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAt(0.5,!0).x)<1e-7}}),{beans:!1,getParameterAt:function(a,b){return a6.getParameterAt(this.getValues(),a,b)},getParameterOf:function(){return a6.getParameterOf(this.getValues(),aC.read(arguments))},getLocationAt:function(a,b){var c=b?a:this.getParameterAt(a);return null!=c&&c>=0&&1>=c?new a2(this,c):null},getLocationOf:function(){return this.getLocationAt(this.getParameterOf(aC.read(arguments)),!0)},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getNearestLocation:function(){var b=aC.read(arguments),c=this.getValues(),d=a6.getNearestParameter(c,b),a=a6.getPoint(c,d);return new a2(this,d,a,null,b.getDistance(a))},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return aF.each(a,function(b){this[b+"At"]=function(d,f){var c=this.getValues();return a6[b](c,f?d:a6.getParameterAt(c,d,0))}},{statics:{evaluateMethods:a}})},new function(){function b(D){var y=D[0],m=D[1],q=D[2],j=D[3],E=D[4],B=D[5],k=D[6],v=D[7],C=9*(q-E)+3*(k-y),p=6*(y+E)-12*q,A=3*(q-y),z=9*(j-B)+3*(v-m),x=6*(m+B)-12*j,w=3*(j-m);return function(d){var f=(C*d+p)*d+A,g=(z*d+x)*d+w;return Math.sqrt(f*f+g*g)}}function c(d,f){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(f-d))))}function a(F,V,M,R){if(null==V||0>V||V>1){return null}var J,G,Z=F[0],L=F[1],E=F[2],O=F[3],X=F[4],W=F[5],U=F[6],T=F[7],at=4e-7,D=1-at;if(0===M&&(at>V||V>D)){var K=at>V;J=K?Z:U,G=K?L:T}else{var N=3*(E-Z),q=3*(X-E)-N,B=U-Z-N-q,A=3*(O-L),Y=3*(W-O)-A,H=T-L-A-Y;if(0===M){J=((B*V+q)*V+N)*V+Z,G=((H*V+Y)*V+A)*V+L}else{if(at>V?(J=N,G=A):V>D?(J=3*(U-X),G=3*(T-W)):(J=(3*B*V+2*q)*V+N,G=(3*H*V+2*Y)*V+A),R){0===J&&0===G&&(at>V||V>D)&&(J=X-E,G=W-O);var h=Math.sqrt(J*J+G*G);h&&(J/=h,G/=h)}if(3===M){var j=6*B*V+2*q,Q=6*H*V+2*Y,z=Math.pow(J*J+G*G,1.5);J=0!==z?(J*Q-G*j)/z:0,G=0}}}return 2===M?new aC(G,-J):new aC(J,G)}return{statics:{getLength:function(e,j,g){if(j===an&&(j=0),g===an&&(g=1),0===j&&1===g&&a6.isStraight(e)){var k=e[6]-e[0],f=e[7]-e[1];return Math.sqrt(k*k+f*f)}var d=b(e);return aK.integrate(d,j,g,c(j,g))},getParameterAt:function(m,e,y){function j(d){return w+=aK.integrate(t,y,d,c(y,d)),y=d,w-e}if(y===an&&(y=0>e?1:0),0===e){return y}var n=Math.abs,x=e>0,k=x?y:0,v=x?1:y,t=b(m),q=aK.integrate(t,k,v,c(k,v));if(n(e-q)<1e-12){return x?v:k}if(n(e)>q){return null}var p=e/q,w=0;return aK.findRoot(j,t,y+p,k,v,32,1e-12)},getPoint:function(d,f){return a(d,f,0,!1)},getTangent:function(d,f){return a(d,f,1,!0)},getWeightedTangent:function(d,f){return a(d,f,1,!1)},getNormal:function(d,f){return a(d,f,2,!0)},getWeightedNormal:function(d,f){return a(d,f,2,!1)},getCurvature:function(d,f){return a(d,f,3,!1).x}}}},new function(){function b(B,N,G,J,D,C,Q,F,K,A,I){var P=N.startConnected,O=N.endConnected,M=4e-7,L=1-M;if(null==D&&(D=a6.getParameterOf(G,C)),null!==D&&D>=(P?M:0)&&(O?L:1)>=D&&(null==K&&(K=a6.getParameterOf(Q,A)),null!==K&&K>=(O?M:0)&&(P?L:1)>=K)){var R=N.renormalize;if(R){var z=R(D,K);D=z[0],K=z[1]}var E=new a2(J,D,C||a6.getPoint(G,D),I),H=new a2(F,K,A||a6.getPoint(Q,K),I),j=E.getPath()===H.getPath()&&E.getIndex()>H.getIndex(),q=j?H:E,k=N.include;E._intersection=H,H._intersection=E,(!k||k(q))&&a2.insert(B,q,!0)}}function f(bB,bA,bP,bE,bJ,bz,bG,bN,bM,bL,bK,by,bD){if(!(++bD>=24)){var bF,bv,bx=bA[0],bw=bA[1],bO=bA[6],br=bA[7],t=aL.getSignedDistance,I=t(bx,bw,bO,br,bA[2],bA[3]),bH=t(bx,bw,bO,br,bA[4],bA[5]),Q=I*bH>0?0.75:4/9,bu=Q*Math.min(0,I,bH),bt=Q*Math.max(0,I,bH),J=t(bx,bw,bO,br,bB[0],bB[1]),n=t(bx,bw,bO,br,bB[2],bB[3]),Y=t(bx,bw,bO,br,bB[4],bB[5]),U=t(bx,bw,bO,br,bB[6],bB[7]),K=h(J,n,Y,U),bI=K[0],bs=K[1];if(null!=(bF=a(bI,bs,bu,bt))&&null!=(bv=a(bI.reverse(),bs.reverse(),bu,bt))){bB=a6.getPart(bB,bF,bv);var G=bv-bF,at=bG+(bN-bG)*bF,X=bG+(bN-bG)*bv;if(bK>0.5&&G>0.5){if(X-at>bL-bM){var bC=a6.subdivide(bB,0.5),i=at+(X-at)/2;f(bA,bC[0],bE,bP,bJ,bz,bM,bL,at,i,G,!by,bD),f(bA,bC[1],bE,bP,bJ,bz,bM,bL,i,X,G,!by,bD)}else{var bC=a6.subdivide(bA,0.5),i=bM+(bL-bM)/2;f(bC[0],bB,bE,bP,bJ,bz,bM,i,at,X,G,!by,bD),f(bC[1],bB,bE,bP,bJ,bz,i,bL,at,X,G,!by,bD)}}else{if(Math.max(bL-bM,X-at)<1e-7){var W=at+(X-at)/2,e=bM+(bL-bM)/2;bB=bP.getValues(),bA=bE.getValues(),b(bJ,bz,by?bA:bB,by?bE:bP,by?e:W,null,by?bB:bA,by?bP:bE,by?W:e,null)}else{G>1e-12&&f(bA,bB,bE,bP,bJ,bz,bM,bL,at,X,G,!by,bD)}}}}}function h(A,w,m,q){var j,B=[0,A],y=[1/3,w],k=[2/3,m],v=[1,q],z=w-(2*A+q)/3,p=m-(A+2*q)/3;if(0>z*p){j=[[B,y,v],[B,k,v]]}else{var x=z/p;j=[x>=2?[B,y,v]:0.5>=x?[B,k,v]:[B,y,k,v],[B,v]]}return 0>(z||p)?j.reverse():j}function a(k,l,m,j){return k[0][1]<m?d(k,!0,m):l[0][1]>j?d(l,!1,j):k[0][0]}function d(v,q,l){for(var m=v[0][0],j=v[0][1],w=1,u=v.length;u>w;w++){var k=v[w][0],p=v[w][1];if(q?p>=l:l>=p){return p===l?k:m+(l-j)*(k-m)/(p-j)}m=k,j=p}return null}function c(bt,V,Z,N,K,U){for(var at=a6.isStraight(bt),J=at?V:bt,X=at?bt:V,bv=X[0],bu=X[1],bs=X[6],br=X[7],bx=bs-bv,I=br-bu,R=Math.atan2(-I,bx),W=Math.sin(R),F=Math.cos(R),H=[],G=0;8>G;G+=2){var bw=J[G]-bv,L=J[G+1]-bu;H.push(bw*F-L*W,bw*W+L*F)}for(var q=[],t=a6.solveCubic(H,1,0,q,0,1),G=0;t>G;G++){var Y=q[G],D=a6.getPoint(J,Y),E=a6.getParameterOf(X,D);if(null!==E){var Q=a6.getPoint(X,E),B=at?E:Y,j=at?Y:E;(!U.endConnected||j>aK.CURVETIME_EPSILON)&&b(K,U,bt,Z,B,at?Q:D,V,N,j,at?D:Q)}}}function g(p,t,k,m,l,j){var q=aL.intersect(p[0],p[1],p[6],p[7],t[0],t[1],t[6],t[7]);q&&b(l,j,p,k,null,q,t,m,null,q)}return{statics:{_getIntersections:function(bx,bC,bu,bI,bt,bz){if(!bC){return a6._getSelfIntersection(bx,bu,bt,bz)}var bG=bx[0],bF=bx[1],bE=bx[6],bD=bx[7],bJ=bC[0],bs=bC[1],bw=bC[6],by=bC[7],Z=(3*bx[2]+bG)/4,br=(3*bx[3]+bF)/4,at=(3*bx[4]+bE)/4,bH=(3*bx[5]+bD)/4,V=(3*bC[2]+bJ)/4,o=(3*bC[3]+bs)/4,t=(3*bC[4]+bw)/4,bA=(3*bC[5]+by)/4,I=Math.min,Y=Math.max;if(!(Y(bG,Z,at,bE)>=I(bJ,V,t,bw)&&I(bG,Z,at,bE)<=Y(bJ,V,t,bw)&&Y(bF,br,bH,bD)>=I(bs,o,bA,by)&&I(bF,br,bH,bD)<=Y(bs,o,bA,by))){return bt}if(!bz.startConnected&&!bz.endConnected){var X=a6.getOverlaps(bx,bC);if(X){for(var G=0;2>G;G++){var e=X[G];b(bt,bz,bx,bu,e[0],null,bC,bI,e[1],null,!0)}return bt}}var Q=a6.isStraight(bx),J=a6.isStraight(bC),H=Q&&J,bB=1e-12,W=bt.length;if((H?g:Q||J?c:f)(bx,bC,bu,bI,bt,bz,0,1,0,1,0,!1,0),H&&bt.length>W){return bt}var s=new aC(bG,bF),U=new aC(bE,bD),K=new aC(bJ,bs),bv=new aC(bw,by);return s.isClose(K,bB)&&b(bt,bz,bx,bu,0,s,bC,bI,0,K),!bz.startConnected&&s.isClose(bv,bB)&&b(bt,bz,bx,bu,0,s,bC,bI,1,bv),!bz.endConnected&&U.isClose(K,bB)&&b(bt,bz,bx,bu,1,U,bC,bI,0,K),U.isClose(bv,bB)&&b(bt,bz,bx,bu,1,U,bC,bI,1,bv),bt},_getSelfIntersection:function(W,bA,bt,bx){var Z=W[0],X=W[1],bs=W[2],U=W[3],bv=W[4],bC=W[5],bB=W[6],bz=W[7],by=new aL(Z,X,bB,bz,!1),R=by.getSide(new aC(bs,U),!0),br=by.getSide(new aC(bv,bC),!0);if(R===br){var bu=(Z-bv)*(U-bz)+(bs-bB)*(bC-X);if(bu*R>0){return bt}}var J=bB-3*bv+3*bs-Z,Q=bv-2*bs+Z,K=bs-Z,bD=bz-3*bC+3*U-X,Y=bC-2*U+X,q=U-X,B=bD*K-J*q,bw=bD*Q-J*Y,G=Y*K-Q*q;if(0>B*B-4*bw*G){var I,at=[],D=aK.solveCubic(J*J+bD*bD,3*(J*Q+bD*Y),2*(Q*Q+Y*Y)+J*K+bD*q,Q*K+Y*q,at,0,1);if(D>0){for(var j=0,V=0;D>j;j++){var H=Math.abs(bA.getCurvatureAt(at[j],!0));H>V&&(V=H,I=at[j])}var F=a6.subdivide(W,I);bx.endConnected=!0,bx.renormalize=function(i,k){return[i*I,k*(1-I)+I]},a6._getIntersections(F[0],F[1],bA,bA,bt,bx)}}return bt},getOverlaps:function(B,M){function G(i){var l=i[6]-i[0],m=i[7]-i[1];return l*l+m*m}var J=Math.abs,D=4e-7,C=2e-7,Q=a6.isStraight(B),F=a6.isStraight(M),A=Q&&F;if(A){var I=G(B)<G(M),O=I?M:B,N=I?B:M,L=new aL(O[0],O[1],O[6],O[7]);if(L.getDistance(new aC(N[0],N[1]))>C||L.getDistance(new aC(N[6],N[7]))>C){return null}}else{if(Q^F){return null}}for(var K=[B,M],z=[],E=0,H=0;2>E&&z.length<2;E+=0===H?0:1,H=1^H){var j=a6.getParameterOf(K[1^E],new aC(K[E][0===H?0:6],K[E][0===H?1:7]));if(null!=j){var q=0===E?[H,j]:[j,H];(0===z.length||J(q[0]-z[0][0])>D&&J(q[1]-z[0][1])>D)&&z.push(q)}if(1===E&&0===z.length){break}}if(2!==z.length){z=null}else{if(!A){var k=a6.getPart(B,z[0][0],z[1][0]),P=a6.getPart(M,z[0][1],z[1][1]);(J(P[2]-k[2])>C||J(P[3]-k[3])>C||J(P[4]-k[4])>C||J(P[5]-k[5])>C)&&(z=null)}}return z}}}}),a2=aF.extend({_class:"CurveLocation",beans:!0,initialize:function bp(b,f,g,a,d){if(f>0.9999996){var c=b.getNext();c&&(f=0,b=c)}this._id=av.get(bp),this._setCurve(b),this._parameter=f,this._point=g||b.getPointAt(f,!0),this._overlap=a,this._distance=d,this._intersection=this._next=this._prev=null},_setCurve:function(a){var b=a._path;this._version=b?b._version:0,this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){this._setCurve(a.getCurve()),this._segment=a,this._parameter=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this.getCurve(),b=this._segment;if(!b){var c=this.getParameter();0===c?b=a._segment1:1===c?b=a._segment2:null!=c&&(b=a.getPartLength(0,c)<a.getPartLength(c,1)?a._segment1:a._segment2),this._segment=b}return b},getCurve:function(){function c(f){var g=f&&f.getCurve();return g&&null!=(b._parameter=g.getParameterOf(b._point))?(b._setCurve(g),b._segment=f,g):an}var d=this._curve,a=d&&d._path,b=this;return a&&a._version!==this._version&&(d=this._parameter=this._curve=this._offset=null),d||c(this._segment)||c(this._segment1)||c(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getParameter:function(){var a=this.getCurve(),b=this._parameter;return a&&null==b?this._parameter=a.getParameterOf(this._point):b},getPoint:function(){return this._point},getOffset:function(){var b=this._offset;if(null==b){b=0;var d=this.getPath(),f=this.getIndex();if(d&&null!=f){for(var a=d.getCurves(),c=0;f>c;c++){b+=a[c].getLength()}}this._offset=b+=this.getCurveOffset()}return b},getCurveOffset:function(){var a=this.getCurve(),b=this.getParameter();return null!=b&&a&&a.getPartLength(0,b)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),b=null;return a&&(b=a.divide(this.getParameter(),!0),b&&this._setSegment(b._segment1)),b},split:function(){var a=this.getCurve();return a?a.split(this.getParameter(),!0):null},equals:function(d,h){var k=this===d,c=2e-7;if(!k&&d instanceof a2&&this.getPath()===d.getPath()&&this.getPoint().isClose(d.getPoint(),c)){var g=this.getCurve(),f=d.getCurve(),b=Math.abs,j=b((g.isLast()&&f.isFirst()?-1:g.getIndex())+this.getParameter()-((f.isLast()&&g.isFirst()?-1:f.getIndex())+d.getParameter()));k=(4e-7>j||(j=b(this.getOffset()-d.getOffset()))<c||b(this.getPath().getLength()-j)<c)&&(h||!this._intersection&&!d._intersection||this._intersection&&this._intersection.equals(d._intersection,!0))}return k},toString:function(){var b=[],d=this.getPoint(),f=ao.instance;d&&b.push("point: "+d);var a=this.getIndex();null!=a&&b.push("index: "+a);var c=this.getParameter();return null!=c&&b.push("parameter: "+f.number(c)),null!=this._distance&&b.push("distance: "+f.number(this._distance)),"{ "+b.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var b=this.getCurve(),c=a.getCurve();return !(b.isStraight()&&c.isStraight()&&b.getLine().intersect(c.getLine()))}return !1},isCrossing:function(){function C(a,c,d){return d>c?a>c&&d>a:a>c&&m>=a||a>=-m&&d>a}var x=this._intersection;if(!x){return !1}var k=this.getParameter(),p=x.getParameter(),b=4e-7,D=1-b;if(k>=b&&D>=k||p>=b&&D>=p){return !this.isTouching()}var A=this.getCurve(),j=A.getPrevious(),q=x.getCurve(),B=q.getPrevious(),m=Math.PI;if(!j||!B){return !1}var z=j.getTangentAt(D,!0).negate().getAngleInRadians(),y=A.getTangentAt(b,!0).getAngleInRadians(),w=B.getTangentAt(D,!0).negate().getAngleInRadians(),v=q.getTangentAt(b,!0).getAngleInRadians();return C(w,z,y)^C(v,z,y)&&C(w,y,z)^C(v,y,z)},isOverlap:function(){return !!this._overlap}},aF.each(a6.evaluateMethods,function(a){var b=a+"At";this[a]=function(){var c=this.getParameter(),d=this.getCurve();return null!=c&&d&&d[b](c,!0)}},{preserve:!0}),new function(){function a(y,p,g){function k(h,d){for(var e=h+d;e>=-1&&b>=e;e+=d){var c=y[(e%b+b)%b];if(!p.getPoint().isClose(c.getPoint(),2e-7)){break}if(p.equals(c)){return c}}return null}for(var b=y.length,z=0,w=b-1;w>=z;){var f,m=z+w>>>1,x=y[m];if(g&&(f=p.equals(x)?x:k(m,-1)||k(m,1))){return p._overlap&&(f._overlap=f._intersection._overlap=!0),f}var j=p.getPath(),v=x.getPath(),q=j===v?p.getIndex()+p.getParameter()-(x.getIndex()+x.getParameter()):j._id-v._id;0>q?w=m-1:z=m+1}return y.splice(z,0,p),p}return{statics:{insert:a,expand:function(d){for(var f=d.slice(),b=0,c=d.length;c>b;b++){a(f,d[b]._intersection,!1)}return f}}}}),ag=ax.extend({_class:"PathItem",initialize:function(){},getIntersections:function(x,K,D,G){var A=this===x||!x,z=this._matrix.orNullIfIdentity(),N=A?z:(D||x._matrix).orNullIfIdentity();if(!A&&!this.getBounds(z).touches(x.getBounds(N))){return[]}for(var C,x,H=this.getCurves(),q=A?H:x.getCurves(),F=H.length,M=A?F:q.length,L=[],J=[],I=0;M>I;I++){L[I]=q[I].getValues(N)}for(var I=0;F>I;I++){var O=H[I],k=A?L[I]:O.getValues(z),B=O.getPath();B!==x&&(x=B,C=[],J.push(C)),A&&a6._getSelfIntersection(k,O,C,{include:K,startConnected:1===F&&O.getPoint1().equals(O.getPoint2())});for(var E=A?I+1:0;M>E;E++){if(G&&C.length){return C}var b=q[E];a6._getIntersections(k,L[E],O,b,C,{include:K,startConnected:A&&O.getPrevious()===b,endConnected:A&&O.getNext()===b})}}C=[];for(var I=0,j=J.length;j>I;I++){C.push.apply(C,J[I])}return C},getCrossings:function(a){return this.getIntersections(a,function(b){return b.isCrossing()})},_asPathItem:function(){return this},setPathData:function(l){function G(a,c){var d=+D[a];return A&&(d+=k[c]),d}function B(a){return new aC(G(a,"x"),G(a+1,"y"))}var D,x,q,J=l.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),A=!1,k=new aC,I=new aC;this.clear();for(var H=0,F=J&&J.length;F>H;H++){var E=J[H],K=E[0],j=K.toLowerCase();D=E.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var z=D&&D.length;switch(A=K===j,"z"!==x||/[mz]/.test(j)||this.moveTo(k=I),j){case"m":case"l":for(var C="m"===j,b=0;z>b;b+=2){this[0===b&&C?"moveTo":"lineTo"](k=B(b))}q=k,C&&(I=k);break;case"h":case"v":for(var h="h"===j?"x":"y",b=0;z>b;b++){k[h]=G(b,h),this.lineTo(k)}q=k;break;case"c":for(var b=0;z>b;b+=6){this.cubicCurveTo(B(b),q=B(b+2),k=B(b+4))}break;case"s":for(var b=0;z>b;b+=4){this.cubicCurveTo(/[cs]/.test(x)?k.multiply(2).subtract(q):k,q=B(b),k=B(b+2)),x=j}break;case"q":for(var b=0;z>b;b+=4){this.quadraticCurveTo(q=B(b),k=B(b+2))}break;case"t":for(var b=0;z>b;b+=2){this.quadraticCurveTo(q=/[qt]/.test(x)?k.multiply(2).subtract(q):k,k=B(b)),x=j}break;case"a":for(var b=0;z>b;b+=7){this.arcTo(k=B(b+5),new ay(+D[b],+D[b+1]),+D[b+2],+D[b+4],+D[b+3])}break;case"z":this.closePath(!0)}x=j}},_canComposite:function(){return !(this.hasFill()&&this.hasStroke())},_contains:function(a){var b=this._getWinding(a,!1,!0);return !!("evenodd"===this.getWindingRule()?1&b:b)}}),bf=ag.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(a){this._closed=!1,this._segments=[],this._version=0;var b=Array.isArray(a)?"object"==typeof a[0]?a:arguments:!a||a.size!==an||a.x===an&&a.point===an?null:arguments;b&&b.length>0?this.setSegments(b):(this._curves=an,this._selectedSegmentState=0,b||"string"!=typeof a||(this.setPathData(a),a=null)),this._initialize(!b&&a)},_equals:function(a){return this._closed===a._closed&&aF.equals(this._segments,a._segments)},clone:function(a){var b=new bf(ax.NO_INSERT);return b.setSegments(this._segments),b._closed=this._closed,this._clockwise!==an&&(b._clockwise=this._clockwise),this._clone(b,a)},_changed:function ad(c){if(ad.base.call(this,c),8&c){var d=this._parent;if(d&&(d._currentPath=an),this._length=this._area=this._clockwise=this._monoCurves=an,16&c){this._version++}else{if(this._curves){for(var a=0,b=this._curves.length;b>a;a++){this._curves[a]._changed()}}}}else{32&c&&(this._bounds=an)}},getStyle:function(){var a=this._parent;return(a instanceof a0?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var b=this.isFullySelected();this._segments.length=0,this._selectedSegmentState=0,this._curves=an,a&&a.length>0&&this._add(aZ.readAll(a)),b&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var b=this._curves,c=this._segments;if(!b){var d=this._countCurves();b=this._curves=Array(d);for(var a=0;d>a;a++){b[a]=new a6(this,c[a],c[a+1]||c[0])}}return b},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var b=this._curves.length=this._countCurves();a&&(this._curves[b-1]=new a6(this,this._segments[b-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(k,E){function x(a,c){a._transformCoordinates(k,I,!1),A=I[0],q=I[1],b?(s.push("M"+C.pair(A,q)),b=!1):(B=I[2],j=I[3],B===A&&j===q&&z===H&&G===w?c||s.push("l"+C.pair(A-H,q-w)):s.push("c"+C.pair(z-H,G-w)+" "+C.pair(B-H,j-w)+" "+C.pair(A-H,q-w))),H=A,w=q,z=I[4],G=I[5]}var A,q,H,w,B,j,z,G,F=this._segments,D=F.length,C=new ao(E),I=Array(6),b=!0,s=[];if(0===D){return""}for(var y=0;D>y;y++){x(F[y])}return this._closed&&D>0&&(x(F[0],!0),s.push("z")),s.join("")}},{isEmpty:function(){return 0===this._segments.length},_transformContent:function(b){for(var c=Array(6),d=0,a=this._segments.length;a>d;d++){this._segments[d]._transformCoordinates(b,c,!0)}return !0},_add:function(y,p){for(var g=this._segments,k=this._curves,b=y.length,z=null==p,p=z?g.length:p,w=0;b>w;w++){var f=y[w];f._path&&(f=y[w]=f.clone()),f._path=this,f._index=p+w,f._selectionState&&this._updateSelection(f,0,f._selectionState)}if(z){g.push.apply(g,y)}else{g.splice.apply(g,[p,0].concat(y));for(var w=p+b,m=g.length;m>w;w++){g[w]._index=w}}if(k){var x=this._countCurves(),j=p+b-1===x?p-1:p,v=j,q=Math.min(j+b,x);y._curves&&(k.splice.apply(k,[j,0].concat(y._curves)),v+=y._curves.length);for(var w=v;q>w;w++){k.splice(w,0,new a6(this,null,null))}this._adjustCurves(j,q)}return this._changed(25),y},_adjustCurves:function(b,f){for(var g,a=this._segments,d=this._curves,c=b;f>c;c++){g=d[c],g._path=this,g._segment1=a[c],g._segment2=a[c+1]||a[0],g._changed()}(g=d[this._closed&&0===b?a.length-1:b-1])&&(g._segment2=a[b]||a[0],g._changed()),(g=d[f])&&(g._segment1=a[f],g._changed())},_countCurves:function(){var a=this._segments.length;return !this._closed&&a>0?a-1:a},add:function(a){return arguments.length>1&&"number"!=typeof a?this._add(aZ.readAll(arguments)):this._add([aZ.read(arguments)])[0]},insert:function(a,b){return arguments.length>2&&"number"!=typeof b?this._add(aZ.readAll(arguments,1),a):this._add([aZ.read(arguments,1)],a)[0]},addSegment:function(){return this._add([aZ.read(arguments)])[0]},insertSegment:function(a){return this._add([aZ.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(aZ.readAll(a))},insertSegments:function(a,b){return this._add(aZ.readAll(b),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(w,f,j){w=w||0,f=aF.pick(f,this._segments.length);var b=this._segments,x=this._curves,q=b.length,e=b.splice(w,f-w),k=e.length;if(!k){return e}for(var v=0;k>v;v++){var g=e[v];g._selectionState&&this._updateSelection(g,g._selectionState,0),g._index=g._path=null}for(var v=w,p=b.length;p>v;v++){b[v]._index=v}if(x){var m=w>0&&f===q+(this._closed?1:0)?w-1:w,x=x.splice(m,k);j&&(e._curves=x.slice(1)),this._adjustCurves(m,m)}return this._changed(25),e},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,b=0,c=a.length;c>b;b++){if(a[b].hasHandles()){return !0}}return !1},clearHandles:function(){for(var a=this._segments,b=0,c=a.length;c>b;b++){a[b].clearHandles()}},getLength:function(){if(null==this._length){for(var b=this.getCurves(),c=0,d=0,a=b.length;a>d;d++){c+=b[d].getLength()}this._length=c}return this._length},getArea:function(){if(null==this._area){for(var b=this._segments,f=b.length,g=f-1,a=0,d=0,c=this._closed?f:g;c>d;d++){a+=a6.getArea(a6.getValues(b[d],b[g>d?d+1:0]))}this._area=a}return this._area},isClockwise:function(){return this._clockwise!==an?this._clockwise:this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse(),this._clockwise=a},isFullySelected:function(){var a=this._segments.length;return this._selected&&a>0&&this._selectedSegmentState===7*a},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelected:function ac(a){a||this._selectSegments(!1),ac.base.call(this,a)},_selectSegments:function(a){var b=this._segments.length;this._selectedSegmentState=a?7*b:0;for(var c=0;b>c;c++){this._segments[c]._selectionState=a?7:0}},_updateSelection:function(b,c,d){b._selectionState=d;var a=this._selectedSegmentState+=d-c;a>0&&this.setSelected(!0)},flatten:function(b){for(var f=new aU(this,64,0.1),g=0,a=f.length/Math.ceil(f.length/b),d=f.length+(this._closed?-a:a)/2,c=[];d>=g;){c.push(new aZ(f.getPointAt(g))),g+=a}this.setSegments(c)},reduce:function(){for(var a=this.getCurves(),b=a.length-1;b>=0;b--){var c=a[b];c.hasHandles()||0!==c.getLength()&&!c.isCollinear(c.getNext())||c.remove()}return this},simplify:function(a){if(this._segments.length>2){var b=new ba(this,a||2.5);this.setSegments(b.fit())}},split:function(d,h){if(null===h){return null}if(1===arguments.length){var k=d;if("number"==typeof k&&(k=this.getLocationAt(k)),!k){return null}d=k.index,h=k.parameter}var c=4e-7,g=1-c;h>=g&&(d++,h--);var f=this.getCurves();if(d>=0&&d<f.length){h>=c&&f[d++].divide(h,!0);var b,j=this.removeSegments(d,this._segments.length,!0);return this._closed?(this.setClosed(!1),b=this):(b=new bf(ax.NO_INSERT),b.insertAbove(this,!0),this._clone(b)),b._add(j,0),this.addSegment(j[0]),b}return null},reverse:function(){this._segments.reverse();for(var c=0,d=this._segments.length;d>c;c++){var a=this._segments[c],b=a._handleIn;a._handleIn=a._handleOut,a._handleOut=b,a._index=c}this._curves=null,this._clockwise!==an&&(this._clockwise=!this._clockwise),this._changed(9)},join:function(d){if(d){var h=d._segments,k=this.getLastSegment(),c=d.getLastSegment();if(!c){return this}k&&k._point.equals(c._point)&&d.reverse();var g=d.getFirstSegment();if(k&&k._point.equals(g._point)){k.setHandleOut(g._handleOut),this._add(h.slice(1))}else{var f=this.getFirstSegment();f&&f._point.equals(g._point)&&d.reverse(),c=d.getLastSegment(),f&&f._point.equals(c._point)?(f.setHandleIn(c._handleIn),this._add(h.slice(0,h.length-1),0)):this._add(h.slice())}d._closed&&this._add([h[0]]),d.remove()}var b=this.getFirstSegment(),j=this.getLastSegment();return b!==j&&b._point.equals(j._point)&&(b.setHandleIn(j._handleIn),j.remove(),this.setClosed(!0)),this},toShape:function(w){function m(d,o){var u=q[d],c=u.getNext(),h=q[o],f=h.getNext();return u._handleOut.isZero()&&c._handleIn.isZero()&&h._handleOut.isZero()&&f._handleIn.isZero()&&c._point.subtract(u._point).isCollinear(f._point.subtract(h._point))}function g(d){var f=q[d],h=f.getPrevious(),c=f.getNext();return h._handleOut.isZero()&&f._handleIn.isZero()&&f._handleOut.isZero()&&c._handleIn.isZero()&&f._point.subtract(h._point).isOrthogonal(c._point.subtract(f._point))}function j(C){var A=q[C],f=A.getNext(),y=A._handleOut,c=f._handleIn,D=0.5522847498307936;if(y.isOrthogonal(c)){var d=A._point,z=f._point,B=new aL(d,y,!0).intersect(new aL(z,c,!0),!0);return B&&aK.isZero(y.getLength()/B.subtract(d).getLength()-D)&&aK.isZero(c.getLength()/B.subtract(z).getLength()-D)}return !1}function a(c,d){return q[c]._point.getDistance(q[d]._point)}if(!this._closed){return null}var x,b,k,v,q=this._segments;if(!this.hasHandles()&&4===q.length&&m(0,2)&&m(1,3)&&g(1)?(x=ai.Rectangle,b=new ay(a(0,3),a(0,1)),v=q[1]._point.add(q[2]._point).divide(2)):8===q.length&&j(0)&&j(2)&&j(4)&&j(6)&&m(1,5)&&m(3,7)?(x=ai.Rectangle,b=new ay(a(1,6),a(0,3)),k=b.subtract(new ay(a(0,7),a(1,2))).divide(2),v=q[3]._point.add(q[4]._point).divide(2)):4===q.length&&j(0)&&j(1)&&j(2)&&j(3)&&(aK.isZero(a(0,2)-a(1,3))?(x=ai.Circle,k=a(0,2)/2):(x=ai.Ellipse,k=new ay(a(2,0)/2,a(3,1)/2)),v=q[1]._point),x){var p=this.getPosition(!0),l=this._clone(new x({center:p,size:b,radius:k,insert:!1}),w,!1);return l.rotate(v.subtract(p).getAngle()+90),l}return null},_hitTestSelf:function(F,V){function N(a,b){return F.subtract(a).divide(b).length<=1}function S(b,a,d){if(!V.selected||a.isSelected()){var c=b._point;if(a!==c&&(a=a.add(c)),N(a,B)){return new aW(d,T,{segment:b,point:a})}}}function J(a,b){return(b||V.segments)&&S(a,a._point,"segment")||!b&&V.handles&&(S(a,a._handleIn,"handle-in")||S(a,a._handleOut,"handle-out"))}function G(a){X.add(a)}function Z(b){if(("round"!==L||"round"!==E)&&(X=new bf({internal:!0,closed:!0}),O||b._index>0&&b._index<K-1?"round"!==L&&(b._handleIn.isZero()||b._handleOut.isZero())&&bf._addBevelJoin(b,L,h,Q,G,!0):"round"!==E&&bf._addSquareCap(b,E,h,G,!0),!X.isEmpty())){var a;return X.contains(F)||(a=X.getNearestLocation(F))&&N(a.getPoint(),q)}return N(b._point,B)}var L,E,Q,X,W,U,T=this,at=this.getStyle(),D=this._segments,K=D.length,O=this._closed,q=V._tolerancePadding,B=q,A=V.stroke&&at.hasStroke(),Y=V.fill&&at.hasFill(),H=V.curves,h=A?at.getStrokeWidth()/2:Y&&V.tolerance>0||H?0:null;if(null!==h&&(h>0?(L=at.getStrokeJoin(),E=at.getStrokeCap(),Q=h*at.getMiterLimit(),B=q.add(new aC(h,h))):L=E="round"),!V.ends||V.segments||O){if(V.segments||V.handles){for(var R=0;K>R;R++){if(U=J(D[R])){return U}}}}else{if(U=J(D[0],!0)||J(D[K-1],!0)){return U}}if(null!==h){if(W=this.getNearestLocation(F)){var z=W.getParameter();0===z||1===z&&K>1?Z(W.getSegment())||(W=null):N(W.getPoint(),B)||(W=null)}if(!W&&"miter"===L&&K>1){for(var R=0;K>R;R++){var j=D[R];if(F.getDistance(j._point)<=Q&&Z(j)){W=j.getLocation();break}}}}return !W&&Y&&this._contains(F)||W&&!A&&!H?new aW("fill",this):W?new aW(A?"stroke":"curve",this,{location:W,point:W.getPoint()}):null}},aF.each(a6.evaluateMethods,function(a){this[a+"At"]=function(c,d){var b=this.getLocationAt(c,d);return b&&b[a]()}},{beans:!1,getLocationOf:function(){for(var b=aC.read(arguments),d=this.getCurves(),f=0,a=d.length;a>f;f++){var c=d[f].getLocationOf(b);if(c){return c}}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(l,j){var d=this.getCurves(),f=0;if(j){var b=~~l,m=d[b];return m?m.getLocationAt(l-b,!0):null}for(var k=0,c=d.length;c>k;k++){var g=f,m=d[k];if(f+=m.getLength(),f>l){return m.getLocationAt(l-g)}}return d.length>0&&l<=this.getLength()?new a2(d[d.length-1],1):null},getNearestLocation:function(){for(var d=aC.read(arguments),h=this.getCurves(),j=1/0,c=null,g=0,f=h.length;f>g;g++){var b=h[g].getNearestLocation(d);b._distance<j&&(j=b._distance,c=b)}return c},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}}),new function(){function a(B,w,k,p){function g(d){var f=z[d],c=z[d+1];(y!=f||x!=c)&&(B.beginPath(),B.moveTo(y,x),B.lineTo(f,c),B.stroke(),B.beginPath(),B.arc(f,c,C,0,2*Math.PI,!0),B.fill())}for(var C=p/2,z=Array(6),j=0,q=w.length;q>j;j++){var A=w[j];A._transformCoordinates(k,z,!1);var m=A._selectionState,y=z[0],x=z[1];if(1&m&&g(2),2&m&&g(4),B.fillRect(y-C,x-C,p,p),!(4&m)){var v=B.fillStyle;B.fillStyle="#ffffff",B.fillRect(y-C+1,x-C+1,p-2,p-2),B.fillStyle=v}}}function b(G,z,m){function q(f){if(m){f._transformCoordinates(m,x,!1),j=x[0],H=x[1]}else{var c=f._point;j=c._x,H=c._y}if(E){G.moveTo(j,H),E=!1}else{if(m){w=x[2],F=x[3]}else{var g=f._handleIn;w=j+g._x,F=H+g._y}w===j&&F===H&&p===C&&B===k?G.lineTo(j,H):G.bezierCurveTo(p,B,w,F,j,H)}if(C=j,k=H,m){p=x[4],B=x[5]}else{var g=f._handleOut;p=C+g._x,B=k+g._y}}for(var j,H,C,k,w,F,p,B,A=z._segments,y=A.length,x=Array(6),E=!0,D=0;y>D;D++){q(A[D])}z._closed&&y>0&&q(A[0])}return{_draw:function(E,k,p){function e(c){return m[(c%z+z)%z]}var F=k.dontStart,A=k.dontFinish||k.clip,j=this.getStyle(),q=j.hasFill(),D=j.hasStroke(),m=j.getDashArray(),z=!paper.support.nativeDash&&D&&m&&m.length;if(F||E.beginPath(),!F&&this._currentPath?E.currentPath=this._currentPath:(q||D&&!z||A)&&(b(E,this,p),this._closed&&E.closePath(),F||(this._currentPath=E.currentPath)),!A&&(q||D)&&(this._setStyles(E),q&&(E.fill(j.getWindingRule()),E.shadowColor="rgba(0,0,0,0)"),D)){if(z){F||E.beginPath();var y,x=new aU(this,32,0.25,p),w=x.length,C=-j.getDashOffset(),B=0;for(C%=w;C>0;){C-=e(B--)+e(B--)}for(;w>C;){y=C+e(B++),(C>0||y>0)&&x.drawPart(E,Math.max(C,0),Math.max(y,0)),C=y+e(B++)}}E.stroke()}},_drawSelected:function(d,c){d.beginPath(),b(d,this,c),d.stroke(),a(d,this._segments,c,paper.settings.handleSize)}}},new function(){function a(c){var g=c.length,h=[],b=[],f=2;h[0]=c[0]/f;for(var d=1;g>d;d++){b[d]=1/f,f=(g-1>d?4:2)-b[d],h[d]=(c[d]-h[d-1])/f}for(var d=1;g>d;d++){h[g-d-1]-=b[g-d]*h[g-d]}return h}return{smooth:function(){var z=this._segments,k=z.length,w=this._closed,b=k,G=0;if(!(2>=k)){w&&(G=Math.min(k,4),b+=2*Math.min(k,G));for(var C=[],j=0;k>j;j++){C[j+G]=z[j]._point}if(w){for(var j=0;G>j;j++){C[j]=z[j+k-G]._point,C[j+k+G]=z[j]._point}}else{b--}for(var F=[],j=1;b-1>j;j++){F[j]=4*C[j]._x+2*C[j+1]._x}F[0]=C[0]._x+2*C[1]._x,F[b-1]=3*C[b-1]._x;for(var t=a(F),j=1;b-1>j;j++){F[j]=4*C[j]._y+2*C[j+1]._y}F[0]=C[0]._y+2*C[1]._y,F[b-1]=3*C[b-1]._y;var B=a(F);if(w){for(var j=0,A=k;G>j;j++,A++){var y=j/G,x=1-y,E=j+G,D=A+G;t[A]=t[j]*y+t[A]*x,B[A]=B[j]*y+B[A]*x,t[D]=t[E]*x+t[D]*y,B[D]=B[E]*x+B[D]*y}b--}for(var h=null,j=G;b-G>=j;j++){var q=z[j-G];h&&q.setHandleIn(h.subtract(q._point)),b>j&&(q.setHandleOut(new aC(t[j],B[j]).subtract(q._point)),h=b-1>j?new aC(2*C[j+1]._x-t[j+1],2*C[j+1]._y-B[j+1]):new aC((C[b]._x+t[b-1])/2,(C[b]._y+B[b-1])/2))}if(w&&h){var q=this._segments[0];q.setHandleIn(h.subtract(q._point))}}}}},new function(){function a(b){var c=b._segments;if(0===c.length){throw Error("Use a moveTo() command first")}return c[c.length-1]}return{moveTo:function(){var b=this._segments;1===b.length&&this.removeSegment(0),b.length||this._add([new aZ(aC.read(arguments))])},moveBy:function(){throw Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new aZ(aC.read(arguments))])},cubicCurveTo:function(){var d=aC.read(arguments),f=aC.read(arguments),b=aC.read(arguments),c=a(this);c.setHandleOut(d.subtract(c._point)),this._add([new aZ(b,f.subtract(b))])},quadraticCurveTo:function(){var c=aC.read(arguments),d=aC.read(arguments),b=a(this)._point;this.cubicCurveTo(c.add(b.subtract(c).multiply(1/3)),c.add(d.subtract(c).multiply(1/3)),d)},curveTo:function(){var g=aC.read(arguments),c=aC.read(arguments),e=aF.pick(aF.read(arguments),0.5),d=1-e,b=a(this)._point,f=g.subtract(b.multiply(d*d)).subtract(c.multiply(e*e)).divide(2*e*d);if(f.isNaN()){throw Error("Cannot put a curve through points with parameter = "+e)}this.quadraticCurveTo(f,c)},arcTo:function(){var bG,bK,bC,bB,bP,bF=a(this),bA=bF._point,bN=aC.read(arguments),bM=aF.peek(arguments),bL=aF.pick(bM,!0);if("boolean"==typeof bL){var bz=bA.add(bN).divide(2),bG=bz.add(bz.subtract(bA).rotate(bL?-90:90))}else{if(aF.remain(arguments)<=2){bG=bN,bN=aC.read(arguments)}else{var bE=ay.read(arguments);if(bE.isZero()){return this.lineTo(bN)}var bH=aF.read(arguments),bL=!!aF.read(arguments),bw=!!aF.read(arguments),bz=bA.add(bN).divide(2),by=bA.subtract(bz).rotate(-bH),bx=by.x,bO=by.y,bs=Math.abs,t=bs(bE.width),bI=bs(bE.height),W=t*t,P=bI*bI,bv=bx*bx,bu=bO*bO,J=Math.sqrt(bv/W+bu/P);if(J>1&&(t*=J,bI*=J,W=t*t,P=bI*bI),J=(W*P-W*bu-P*bv)/(W*bu+P*bv),bs(J)<1e-12&&(J=0),0>J){throw Error("Cannot create an arc with the given arguments")}bK=new aC(t*bO/bI,-bI*bx/t).multiply((bw===bL?-1:1)*Math.sqrt(J)).rotate(bH).add(bz),bP=(new aD).translate(bK).rotate(bH).scale(t,bI),bB=bP._inverseTransform(bA),bC=bB.getDirectedAngle(bP._inverseTransform(bN)),!bL&&bC>0?bC-=360:bL&&0>bC&&(bC+=360)}}if(bG){var l=new aL(bA.add(bG).divide(2),bG.subtract(bA).rotate(90),!0),at=new aL(bG.add(bN).divide(2),bN.subtract(bG).rotate(90),!0),Q=new aL(bA,bN),K=Q.getSide(bG);if(bK=l.intersect(at,!0),!bK){if(!K){return this.lineTo(bN)}throw Error("Cannot create an arc with the given arguments")}bB=bA.subtract(bK),bC=bB.getDirectedAngle(bN.subtract(bK));var bJ=Q.getSide(bK);0===bJ?bC=K*Math.abs(bC):K===bJ&&(bC+=0>bC?360:-360)}for(var bt=Math.abs(bC),G=bt>=360?4:Math.ceil(bt/90),br=bC/G,Y=br*Math.PI/360,bD=4/3*Math.sin(Y)/(1+Math.cos(Y)),g=[],X=0;G>=X;X++){var by=bN,e=null;if(G>X&&(e=bB.rotate(90).multiply(bD),bP?(by=bP._transformPoint(bB),e=bP._transformPoint(bB.add(e)).subtract(by)):by=bK.add(bB)),0===X){bF.setHandleOut(e)}else{var h=bB.rotate(-90).multiply(bD);bP&&(h=bP._transformPoint(bB.add(h)).subtract(by)),g.push(new aZ(by,h,e))}bB=bB.rotate(br)}this._add(g)},lineBy:function(){var b=aC.read(arguments),c=a(this)._point;this.lineTo(c.add(b))},curveBy:function(){var e=aC.read(arguments),b=aC.read(arguments),d=aF.read(arguments),c=a(this)._point;this.curveTo(c.add(e),c.add(b),d)},cubicCurveBy:function(){var d=aC.read(arguments),f=aC.read(arguments),b=aC.read(arguments),c=a(this)._point;this.cubicCurveTo(c.add(d),c.add(f),c.add(b))},quadraticCurveBy:function(){var c=aC.read(arguments),d=aC.read(arguments),b=a(this)._point;this.quadraticCurveTo(b.add(c),b.add(d))},arcBy:function(){var d=a(this)._point,b=d.add(aC.read(arguments)),c=aF.pick(aF.peek(arguments),!0);"boolean"==typeof c?this.arcTo(b,c):this.arcTo(b,d.add(aC.read(arguments)))},closePath:function(b){this.setClosed(!0),b&&this.join()}}},{_getBounds:function(a,b){return bf[a](this._segments,this._closed,this.getStyle(),b)},statics:{getBounds:function(A,w,j,m,b){function B(a){a._transformCoordinates(m,d,!1);for(var c=0;2>c;c++){a6._addBounds(p[c],p[c+4],d[c+2],d[c],c,b?b[c]:0,z,k,x)}var f=p;p=d,d=f}var y=A[0];if(!y){return new aG}for(var d=Array(6),p=y._transformCoordinates(m,Array(6),!1),z=p.slice(0,2),k=z.slice(),x=Array(2),v=1,q=A.length;q>v;v++){B(A[v])}return w&&B(y),new aG(z[0],z[1],k[0]-z[0],k[1]-z[1])},getStrokeBounds:function(F,z,k,q){function b(a){y=y.include(q?q._transformPoint(a,a):a)}function G(a){y=y.unite(d.setCenter(q?q._transformPoint(a._point):a._point))}function B(c,f){var g=c._handleIn,a=c._handleOut;"round"===f||!g.isZero()&&!a.isZero()&&g.isCollinear(a)?G(c):bf._addBevelJoin(c,f,E,C,b)}function j(a,c){"round"===c?G(a):bf._addSquareCap(a,c,E,b)}if(!k.hasStroke()){return bf.getBounds(F,z,k,q)}for(var w=F.length-(z?0:1),E=k.getStrokeWidth()/2,A=bf._getPenPadding(E,q),y=bf.getBounds(F,z,k,q,A),x=k.getStrokeJoin(),D=k.getStrokeCap(),C=E*k.getMiterLimit(),d=new aG(new ay(A).multiply(2)),l=1;w>l;l++){B(F[l],x)}return z?B(F[0],x):w>0&&(j(F[0],D),j(F[F.length-1],D)),y},_getPenPadding:function(y,p){if(!p){return[y,y]}var h=p.shiftless(),k=h.transform(new aC(y,0)),b=h.transform(new aC(0,y)),z=k.getAngleInRadians(),w=k.getLength(),g=b.getLength(),x=Math.sin(z),j=Math.cos(z),v=Math.tan(z),q=-Math.atan(g*v/w),m=Math.atan(g/(v*w));return[Math.abs(w*Math.cos(q)*j-g*Math.sin(q)*x),Math.abs(g*Math.sin(m)*j+w*Math.cos(m)*x)]},_addBevelJoin:function(y,p,h,k,b,z){var w=y.getCurve(),g=w.getPrevious(),x=w.getPointAt(0,!0),j=g.getNormalAt(1,!0),v=w.getNormalAt(0,!0),q=j.getDirectedAngle(v)<0?-h:h;if(j.setLength(q),v.setLength(q),z&&(b(x),b(x.add(j))),"miter"===p){var m=new aL(x.add(j),new aC(-j.y,j.x),!0).intersect(new aL(x.add(v),new aC(-v.y,v.x),!0),!0);if(m&&x.getDistance(m)<=k&&(b(m),!z)){return}}z||b(x.add(j)),b(x.add(v))},_addSquareCap:function(d,h,k,c,g){var f=d._point,b=d.getLocation(),j=b.getNormal().multiply(k);g&&(c(f.subtract(j)),c(f.add(j))),"square"===h&&(f=f.add(j.rotate(0===b.getParameter()?-90:90))),c(f.add(j)),c(f.subtract(j))},getHandleBounds:function(B,P,I,L,F,D){for(var T=Array(6),H=1/0,M=-H,A=H,K=M,Q=0,O=B.length;O>Q;Q++){var N=B[Q];N._transformCoordinates(L,T,!1);for(var U=0;6>U;U+=2){var z=0===U?D:F,G=z?z[0]:0,J=z?z[1]:0,j=T[U],q=T[U+1],k=j-G,R=j+G,E=q-J,d=q+J;H>k&&(H=k),R>M&&(M=R),A>E&&(A=E),d>K&&(K=d)}}return new aG(H,A,M-H,K-A)},getRoughBounds:function(b,f,g,a){var d=g.hasStroke()?g.getStrokeWidth()/2:0,c=d;return d>0&&("miter"===g.getStrokeJoin()&&(c=d*g.getMiterLimit()),"square"===g.getStrokeCap()&&(c=Math.max(c,d*Math.sqrt(2)))),bf.getHandleBounds(b,f,g,a,bf._getPenPadding(d,a),bf._getPenPadding(c,a))}}});bf.inject({statics:new function(){function b(f,j,e){var h=aF.getNamed(e),g=new bf(h&&h.insert===!1&&ax.NO_INSERT);return g._add(f),g._closed=j,g.set(h)}function d(j,l,g){for(var h=Array(4),f=0;4>f;f++){var k=c[f];h[f]=new aZ(k._point.multiply(l).add(j),k._handleIn.multiply(l),k._handleOut.multiply(l))}return b(h,!0,g)}var a=0.5522847498307936,c=[new aZ([-1,0],[0,a],[0,-a]),new aZ([0,-1],[-a,0],[a,0]),new aZ([1,0],[0,-a],[0,a]),new aZ([0,1],[a,0],[-a,0])];return{Line:function(){return b([new aZ(aC.readNamed(arguments,"from")),new aZ(aC.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var f=aC.readNamed(arguments,"center"),e=aF.readNamed(arguments,"radius");return d(f,new ay(e),arguments)},Rectangle:function(){var q,k=aG.readNamed(arguments,"rectangle"),i=ay.readNamed(arguments,"radius",0,{readNull:!0}),x=k.getBottomLeft(!0),v=k.getTopLeft(!0),j=k.getTopRight(!0),l=k.getBottomRight(!0);if(!i||i.isZero()){q=[new aZ(x),new aZ(v),new aZ(j),new aZ(l)]}else{i=ay.min(i,k.getSize(!0).divide(2));var w=i.width,t=i.height,p=w*a,m=t*a;q=[new aZ(x.add(w,0),null,[-p,0]),new aZ(x.subtract(0,t),[0,m]),new aZ(v.add(0,t),null,[0,-m]),new aZ(v.add(w,0),[-p,0],null),new aZ(j.subtract(w,0),null,[p,0]),new aZ(j.add(0,t),[0,-m],null),new aZ(l.subtract(0,t),null,[0,m]),new aZ(l.subtract(w,0),[p,0])]}return b(q,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=ai._readEllipse(arguments);return d(e.center,e.radius,arguments)},Oval:"#Ellipse",Arc:function(){var f=aC.readNamed(arguments,"from"),j=aC.readNamed(arguments,"through"),e=aC.readNamed(arguments,"to"),h=aF.getNamed(arguments),g=new bf(h&&h.insert===!1&&ax.NO_INSERT);return g.moveTo(f),g.arcTo(j,e),g.set(h)},RegularPolygon:function(){for(var g=aC.readNamed(arguments,"center"),j=aF.readNamed(arguments,"sides"),e=aF.readNamed(arguments,"radius"),q=360/j,m=!(j%3),f=new aC(0,m?-e:e),p=m?-1:0.5,h=Array(j),k=0;j>k;k++){h[k]=new aZ(g.add(f.rotate((k+p)*q)))}return b(h,!0,arguments)},Star:function(){for(var p=aC.readNamed(arguments,"center"),h=2*aF.readNamed(arguments,"points"),k=aF.readNamed(arguments,"radius1"),j=aF.readNamed(arguments,"radius2"),f=360/h,m=new aC(0,-1),g=Array(h),e=0;h>e;e++){g[e]=new aZ(p.add(m.rotate(f*e).multiply(e%2?j:k)))}return b(g,!0,arguments)}}}});var a0=ag.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||("string"==typeof a?this.setPathData(a):this.addChildren(Array.isArray(a)?a:arguments))},insertChildren:function bh(g,h,c){for(var f=h.length-1;f>=0;f--){var d=h[f];d instanceof a0&&(h.splice.apply(h,[f,1].concat(d.removeChildren())),d.remove())}h=bh.base.call(this,g,h,c,bf);for(var f=0,b=!c&&h&&h.length;b>f;f++){var d=h[f];d._clockwise===an&&d.setClockwise(0===d._index)}return h},reverse:function(){for(var a=this._children,b=0,c=a.length;c>b;b++){a[b].reverse()}},smooth:function(){for(var a=0,b=this._children.length;b>a;a++){this._children[a].smooth()}},reduce:function bj(){for(var a=this._children,b=a.length-1;b>=0;b--){var c=a[b].reduce();c.isEmpty()&&a.splice(b,1)}if(0===a.length){var c=new bf(ax.NO_INSERT);return c.insertAbove(this),c.setStyle(this._style),this.remove(),c}return bj.base.call(this)},isClockwise:function(){var a=this.getFirstChild();return a&&a.isClockwise()},setClockwise:function(a){this.isClockwise()!==!!a&&this.reverse()},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var b=this._children,c=[],d=0,a=b.length;a>d;d++){c.push.apply(c,b[d].getCurves())}return c},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getFirstCurve()},getArea:function(){for(var b=this._children,c=0,d=0,a=b.length;a>d;d++){c+=b[d].getArea()}return c}},{beans:!0,getPathData:function(d,h){for(var k=this._children,c=[],g=0,f=k.length;f>g;g++){var b=k[g],j=b._matrix;c.push(b.getPathData(d&&!j.isIdentity()?d.chain(j):d,h))}return c.join(" ")}},{_getChildHitTestOptions:function(a){return a["class"]===bf||"path"===a.type?a:new aF(a,{fill:!1})},_draw:function(d,h,j){var c=this._children;if(0!==c.length){if(this._currentPath){d.currentPath=this._currentPath}else{h=h.extend({dontStart:!0,dontFinish:!0}),d.beginPath();for(var g=0,f=c.length;f>g;g++){c[g].draw(d,h,j)}this._currentPath=d.currentPath}if(!h.clip){this._setStyles(d);var b=this._style;b.hasFill()&&(d.fill(b.getWindingRule()),d.shadowColor="rgba(0,0,0,0)"),b.hasStroke()&&d.stroke()}}},_drawSelected:function(d,h,k){for(var c=this._children,g=0,f=c.length;f>g;g++){var b=c[g],j=b._matrix;k[b._id]||b._drawSelected(d,j.isIdentity()?h:h.chain(j))}}},new function(){function a(c,d){var f=c._children;if(d&&0===f.length){throw Error("Use a moveTo() command first")}return f[f.length-1]}var b={moveTo:function(){var c=a(this),d=c&&c.isEmpty()?c:new bf(ax.NO_INSERT);d!==c&&this.addChild(d),d.moveTo.apply(d,arguments)},moveBy:function(){var d=a(this,!0),f=d&&d.getLastSegment(),c=aC.read(arguments);this.moveTo(f?c.add(f._point):c)},closePath:function(c){a(this,!0).closePath(c)}};return aF.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(c){b[c]=function(){var d=a(this,!0);d[c].apply(d,arguments)}}),b});ag.inject(new function(){function j(c,d){var i=c.clone(!1).reduce().transform(null,!0,!0);return d?i.resolveCrossings().reorient():i}function f(d,u,v,c,o){var l=new d(ax.NO_INSERT);return l.addChildren(u,!0),o&&(l=l.reduce()),l.insertAbove(c&&v.isSibling(c)&&v.getIndex()<c.getIndex()?c:v),l.setStyle(v._style),l}function h(A,e,B){function w(s){for(var u=0,v=s.length;v>u;u++){var d=s[u];o.push.apply(o,d._segments),n.push.apply(n,d._getMonoCurves())}}if(!A._children&&!A._closed){return a(A,e,B)}var l=j(A,!0),z=e&&A!==e&&j(e,!0);z&&/^(subtract|exclude)$/.test(B)^z.isClockwise()!==l.isClockwise()&&z.reverse();var r=a2.expand(l.getIntersections(z,function(d){return z&&d.isOverlap()||d.isCrossing()}));b(r);var o=[],n=[];w(l._children||[l]),z&&w(z._children||[z]);for(var y=0,x=r.length;x>y;y++){g(r[y]._segment,l,z,n,B)}for(var y=0,x=o.length;x>y;y++){var c=o[y];null==c._winding&&g(c,l,z,n,B)}return f(a0,m(o,B),A,e,!0)}function a(v,e,C){function A(c){return w.contains(c.getPointAt(c.getLength()/2))^t?(z.unshift(c),!0):an}if(!e||!e._children&&!e._closed||!/^(subtract|intersect)$/.test(C)){return null}for(var n=j(v,!1),w=j(e,!1),B=n.getIntersections(w,function(c){return c.isOverlap()||c.isCrossing()}),t="subtract"===C,z=[],y=B.length-1;y>=0;y--){var x=B[y].split();x&&(A(x)&&x.getFirstSegment().setHandleIn(0,0),n.getLastSegment().setHandleOut(0,0))}return A(n),f(ah,z,v,e)}function q(c,d){for(var i=c;i;){if(i===d){return}i=i._prev}for(;c._next&&c._next!==d;){c=c._next}if(!c._next){for(;d._prev;){d=d._prev}c._next=d,d._prev=c}}function b(L){for(var E,y,A=4e-7,s=1-A,H=!1,x=[],B=L.length-1;B>=0;B--){var K=L[B],z=K._curve,G=K._parameter,F=G;z!==E?H=!z.hasHandles():y>0&&(G/=y);var D;A>G?D=z._segment1:G>s?D=z._segment2:(D=z.divide(G,!0,!0)._segment1,H&&x.push(D)),K._setSegment(D);var C=D._intersection,J=K._intersection;if(C){q(C,J);for(var I=C;I;){q(I._intersection,C),I=I._next}}else{D._intersection=J}E=z,y=F}for(var B=0,w=x.length;w>B;B++){x[B].clearHandles()}}function p(W,bB,bt,by){var Z=2e-7,X=4e-7,bs=1-X,bv=W.x,bD=W.y,bC=0,bA=0,bz=[],bF=Math.abs;if(bt){for(var U=-(1/0),br=1/0,bu=bD-Z,K=bD+Z,R=0,Q=bB.length;Q>R;R++){var bE=bB[R].values;if(a6.solveCubic(bE,0,bv,bz,0,1)>0){for(var Y=bz.length-1;Y>=0;Y--){var B=a6.getPoint(bE,bz[Y]).y;bu>B&&B>U?U=B:B>K&&br>B&&(br=B)}}}U=(U+bD)/2,br=(br+bD)/2,U>-(1/0)&&(bC=p(new aC(bv,U),bB,!1,by)),1/0>br&&(bA=p(new aC(bv,br),bB,!1,by))}else{for(var D,bw,H=bv-Z,J=bv+Z,at=!1,R=0,Q=bB.length;Q>R;R++){var F=bB[R],bE=F.values,u=F.winding;if(u&&(1===u&&bD>=bE[1]&&bD<=bE[7]||bD>=bE[7]&&bD<=bE[1])&&1===a6.solveCubic(bE,1,bD,bz,0,1)){var V=bz[0];if(!(V>bs&&at&&F.next!==bB[R+1]||X>V&&bw>bs&&F.previous===D)){var I=a6.getPoint(bE,V).x,G=a6.getTangent(bE,V).y,bx=!1;aK.isZero(G)&&!a6.isStraight(bE)||X>V&&G*a6.getTangent(F.previous.values,1).y<0||V>bs&&G*a6.getTangent(F.next.values,0).y<0?by&&I>=H&&J>=I&&(++bC,++bA,bx=!0):H>=I?(bC+=u,bx=!0):I>=J&&(bA+=u,bx=!0),F.previous!==bB[R-1]&&(at=X>V&&bx)}D=F,bw=V}}}return Math.max(bF(bC),bF(bA))}function g(D,Q,J,M,G){var E=2e-7,U=[],I=D,N=0,L=0;do{var S=D.getCurve(),R=S.getLength();U.push({segment:D,curve:S,length:R}),N+=R,D=D.getNext()}while(D&&!D._intersection&&D!==I);for(var P=0;3>P;P++){for(var R=N*(P+1)/4,O=0,V=U.length;V>O;O++){var B=U[O],H=B.length;if(H>=R){(E>R||E>H-R)&&(R=H/2);var S=B.curve,K=S._path,u=K._parent,A=S.getPointAt(R),z=S.isHorizontal();u instanceof a0&&(K=u),L+="subtract"===G&&J&&(K===Q&&J._getWinding(A,z)||K===J&&!Q._getWinding(A,z))?0:p(A,M,z);break}R-=H}}for(var T=Math.round(L/3),F=U.length-1;F>=0;F--){U[F].segment._winding=T}}function m(D,O){function I(l,o){if(l._visited){return !1}if(!J){return !0}var r=l._winding,c=l._intersection;return c&&o&&P&&c.isOverlap()&&(r=P[r]||r),J(r)}function K(c){return c===H||c===L}function F(i,o){if(!i._next){return i}for(;i;){var n=i._segment,l=n.getNext(),c=l._intersection;if(K(l)||!n._visited&&!l._visited&&(!J||(!o||I(n))&&(!(o&&c&&c.isOverlap())&&I(l)||!o&&c&&I(c._segment)))){return i}i=i._next}return null}function E(c,i){for(;c;){var l=c._segment;if(K(l)){return l}c=c[i?"_next":"_prev"]}}for(var H,L,C=[],J=k[O],P={unite:{1:2},intersect:{2:1}}[O],N=0,M=D.length;M>N;N++){var R=D[N],B=null,G=!1;if(I(R,!0)){for(H=L=null;!G;){var d=R._intersection,A=B&&R._handleIn;d=d&&(F(d,!0)||F(d,!1))||d;var z=d&&d._segment;if(z&&I(z)&&(R=z),R._visited){if(G=K(R),!G&&d){var Q=E(d,!0)||E(d,!1);Q&&(R=Q,G=!0)}break}B||(B=new bf(ax.NO_INSERT),H=R,L=z),B.add(new aZ(R._point,A,R._handleOut)),R._visited=!0,R=R.getNext(),G=K(R)}G?(B.firstSegment.setHandleIn(R._handleIn),B.setClosed(!0)):B&&(console.error("Boolean operation resulted in open path","segments =",B._segments.length,"length =",B.getLength()),B=null),B&&(B._segments.length>8||!aK.isZero(B.getArea()))&&(C.push(B),B=null)}}return C}var k={unite:function(c){return 1===c||0===c},intersect:function(c){return 2===c},subtract:function(c){return 1===c},exclude:function(c){return 1===c}};return{_getWinding:function(c,d,i){return p(c,this._getMonoCurves(),d,i)},unite:function(c){return h(this,c,"unite")},intersect:function(c){return h(this,c,"intersect")},subtract:function(c){return h(this,c,"subtract")},exclude:function(c){return h(this,c,"exclude")},divide:function(c){return f(ah,[this.subtract(c),this.intersect(c)],this,c,!0)},resolveCrossings:function(){var d=this.getCrossings();if(!d.length){return this}b(a2.expand(d));for(var o=this._children||[this],c=[],n=0,l=o.length;l>n;n++){c.push.apply(c,o[n]._segments)}return f(a0,m(c),this,null,!1)}}}),bf.inject({_getMonoCurves:function(){function D(c){var g=c[1],f=c[7],d={values:c,winding:g===f?0:g>f?-1:1,previous:j,next:null};j&&(j.next=d),m.push(d),j=d}function x(L){if(0!==a6.getLength(L)){var F=L[1],H=L[3],t=L[5],Q=L[7];if(a6.isStraight(L)){D(L)}else{var v=3*(H-t)-F+Q,I=2*(F+t)-4*H,P=H-F,G=4e-7,N=1-G,M=[],K=aK.solveQuadratic(v,I,P,M,G,N);if(0===K){D(L)}else{M.sort();var J=M[0],O=a6.subdivide(L,J);D(O[0]),K>1&&(J=(M[1]-J)/(1-J),O=a6.subdivide(O[1],J),D(O[0])),D(O[1])}}}}var j,m=this._monoCurves;if(!m){m=this._monoCurves=[];for(var a=this.getCurves(),E=this._segments,b=0,p=a.length;p>b;b++){x(a[b].getValues())}if(!this._closed&&E.length>1){var C=E[E.length-1]._point,k=E[0]._point,z=C._x,y=C._y,w=k._x,q=k._y;x([z,y,z,y,w,q,w,q])}if(m.length>0){var B=m[0],A=m[m.length-1];B.previous=A,A.next=B}}return m},getInteriorPoint:function(){var m=this.getBounds(),j=m.getCenter(!0);if(!this.contains(j)){for(var d=this._getMonoCurves(),f=[],b=j.y,p=[],k=0,c=d.length;c>k;k++){var g=d[k].values;if((1===d[k].winding&&b>=g[1]&&b<=g[7]||b>=g[7]&&b<=g[1])&&a6.solveCubic(g,1,b,f,0,1)>0){for(var l=f.length-1;l>=0;l--){p.push(a6.getPoint(g,f[l]).x)}}if(p.length>1){break}}j.x=(p[0]+p[1])/2}return j},reorient:function(){return this.setClockwise(!0),this}}),a0.inject({_getMonoCurves:function(){for(var b=this._children,c=[],d=0,a=b.length;a>d;d++){c.push.apply(c,b[d]._getMonoCurves())}return c},reorient:function(){var d=this.removeChildren().sort(function(a,i){return i.getBounds().getArea()-a.getBounds().getArea()});if(d.length>0){this.addChildren(d);for(var h=d[0].isClockwise(),j=1,c=d.length;c>j;j++){for(var g=d[j].getInteriorPoint(),f=0,b=j-1;b>=0;b--){d[b].contains(g)&&f++}d[j].setClockwise(f%2===0&&h)}}return this}});var aU=aF.extend({_class:"PathIterator",initialize:function(C,x,k,p){function b(a,c){var d=a6.getValues(a,c,p);j.push(d),D(d,a._index,0,1)}function D(G,s,l,g){if(g-l>m&&!a6.isFlatEnough(G,k||0.25)){var F=a6.subdivide(G,0.5),h=(l+g)/2;D(F[0],s,l,h),D(F[1],s,h,g)}else{var E=G[6]-G[0],u=G[7]-G[1],n=Math.sqrt(E*E+u*u);n>0.000001&&(B+=n,q.push({offset:B,value:g,index:s}))}}for(var A,j=[],q=[],B=0,m=1/(x||32),z=C._segments,y=z[0],w=1,v=z.length;v>w;w++){A=z[w],b(y,A),y=A}C._closed&&b(A,z[0]),this.curves=j,this.parts=q,this.length=B,this.index=0},getParameterAt:function(d){for(var h,k=this.index;h=k,!(0==k||this.parts[--k].offset<d);){}for(var c=this.parts.length;c>h;h++){var g=this.parts[h];if(g.offset>=d){this.index=h;var f=this.parts[h-1],b=f&&f.index==g.index?f.value:0,j=f?f.offset:0;return{value:b+(g.value-b)*(d-j)/(g.offset-j),index:g.index}}}var g=this.parts[this.parts.length-1];return{value:1,index:g.index}},drawPart:function(b,d,f){d=this.getParameterAt(d),f=this.getParameterAt(f);for(var a=d.index;a<=f.index;a++){var c=a6.getPart(this.curves[a],a==d.index?d.value:0,a==f.index?f.value:1);a==d.index&&b.moveTo(c[0],c[1]),b.bezierCurveTo.apply(b,c.slice(2))}}},aF.each(a6.evaluateMethods,function(a){this[a+"At"]=function(c,d){var b=this.getParameterAt(c);return a6[a](this.curves[b.index],b.value,d)}},{})),ba=aF.extend({initialize:function(d,h){for(var k,c=this.points=[],g=d._segments,f=0,b=g.length;b>f;f++){var j=g[f].point.clone();k&&k.equals(j)||(c.push(j),k=j)}d._closed&&(this.closed=!0,c.unshift(c[c.length-1]),c.push(c[1])),this.error=h},fit:function(){var a=this.points,b=a.length,c=this.segments=b>0?[new aZ(a[0])]:[];return b>1&&this.fitCubic(0,b-1,a[1].subtract(a[0]).normalize(),a[b-2].subtract(a[b-1]).normalize()),this.closed&&(c.shift(),c.pop()),c},fitCubic:function(z,m,t,b){if(m-z==1){var G=this.points[z],C=this.points[m],k=G.getDistance(C)/3;return this.addCurve([G,G.add(t.normalize(k)),C.add(b.normalize(k)),C]),an}for(var w,F=this.chordLengthParameterize(z,m),q=Math.max(this.error,this.error*this.error),B=!0,A=0;4>=A;A++){var y=this.generateBezier(z,m,F,t,b),x=this.findMaxError(z,m,y,F);if(x.error<this.error&&B){return this.addCurve(y),an}if(w=x.index,x.error>=q){break}B=this.reparameterize(z,m,F,y),q=x.error}var E=this.points[w-1].subtract(this.points[w]),D=this.points[w].subtract(this.points[w+1]),j=E.add(D).divide(2).normalize();this.fitCubic(z,w,t,j),this.fitCubic(w,m,j.negate(),b)},addCurve:function(a){var b=this.segments[this.segments.length-1];b.setHandleOut(a[1].subtract(a[0])),this.segments.push(new aZ(a[3],a[2].subtract(a[3])))},generateBezier:function(U,bz,br,bv,X){for(var V=1e-12,bD=this.points[U],at=this.points[bz],bw=[[0,0],[0,0]],Q=[0,0],bt=0,bB=bz-U+1;bB>bt;bt++){var bA=br[bt],by=1-bA,bx=3*bA*by,bE=by*by*by,N=bx*by,Z=bx*bA,bs=bA*bA*bA,H=bv.normalize(N),L=X.normalize(Z),K=this.points[U+bt].subtract(bD.multiply(bE+N)).subtract(at.multiply(Z+bs));bw[0][0]+=H.dot(H),bw[0][1]+=H.dot(L),bw[1][0]=bw[0][1],bw[1][1]+=L.dot(L),Q[0]+=H.dot(K),Q[1]+=L.dot(K)}var bC,W,q=bw[0][0]*bw[1][1]-bw[1][0]*bw[0][1];if(Math.abs(q)>V){var B=bw[0][0]*Q[1]-bw[1][0]*Q[0],bu=Q[0]*bw[1][1]-Q[1]*bw[0][1];bC=bu/q,W=B/q}else{var J=bw[0][0]+bw[0][1],F=bw[1][0]+bw[1][1];bC=W=Math.abs(J)>V?Q[0]/J:Math.abs(F)>V?Q[1]/F:0}var G,Y,D=at.getDistance(bD),j=V*D;if(j>bC||j>W){bC=W=D/3}else{var R=at.subtract(bD);G=bv.normalize(bC),Y=X.normalize(W),G.dot(R)-Y.dot(R)>D*D&&(bC=W=D/3,G=Y=null)}return[bD,bD.add(G||bv.normalize(bC)),at.add(Y||X.normalize(W)),at]},reparameterize:function(b,f,g,a){for(var d=b;f>=d;d++){g[d-b]=this.findRoot(a,this.points[d],g[d-b])}for(var d=1,c=g.length;c>d;d++){if(g[d]<=g[d-1]){return !1}}return !0},findRoot:function(q,k,d){for(var g=[],b=[],v=0;2>=v;v++){g[v]=q[v+1].subtract(q[v]).multiply(3)}for(var v=0;1>=v;v++){b[v]=g[v+1].subtract(g[v]).multiply(2)}var m=this.evaluate(3,q,d),c=this.evaluate(2,g,d),j=this.evaluate(1,b,d),p=m.subtract(k),f=c.dot(c)+p.dot(j);return Math.abs(f)<0.000001?d:d-p.dot(c)/f},evaluate:function(b,f,g){for(var a=f.slice(),d=1;b>=d;d++){for(var c=0;b-d>=c;c++){a[c]=a[c].multiply(1-g).add(a[c+1].multiply(g))}}return a[0]},chordLengthParameterize:function(b,d){for(var f=[0],a=b+1;d>=a;a++){f[a-b]=f[a-b-1]+this.points[a].getDistance(this.points[a-1])}for(var a=1,c=d-b;c>=a;a++){f[a]/=f[c]}return f},findMaxError:function(m,j,d,f){for(var b=Math.floor((j-m+1)/2),p=0,k=m+1;j>k;k++){var c=this.evaluate(3,d,f[k-m]),g=c.subtract(this.points[k]),l=g.x*g.x+g.y*g.y;l>=p&&(p=l,b=k)}return{error:p,index:b}}}),a3=ax.extend({_class:"TextItem",_boundsSelected:!0,_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(b){this._content="",this._lines=[];var a=b&&aF.isPlainObject(b)&&b.x===an&&b.y===an;this._initialize(a&&b,!a&&aC.read(arguments))},_equals:function(a){return this._content===a._content},_clone:function aa(a,b,c){return a.setContent(this._content),aa.base.call(this,a,b,c)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return !this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),a1=a3.extend({_class:"PointText",initialize:function(){a3.apply(this,arguments)},clone:function(a){return this._clone(new a1(ax.NO_INSERT),a)},getPoint:function(){var a=this._matrix.getTranslation();return new am(a.x,a.y,this,"setPoint")},setPoint:function(){var a=aC.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(d){if(this._content){this._setStyles(d);var h=this._style,k=this._lines,c=h.getLeading(),g=d.shadowColor;d.font=h.getFontStyle(),d.textAlign=h.getJustification();for(var f=0,b=k.length;b>f;f++){d.shadowColor=g;var j=k[f];h.hasFill()&&(d.fillText(j,0,0),d.shadowColor="rgba(0,0,0,0)"),h.hasStroke()&&d.strokeText(j,0,0),d.translate(0,c)}}},_getBounds:function(m,j){var d=this._style,f=this._lines,b=f.length,p=d.getJustification(),k=d.getLeading(),c=this.getView().getTextWidth(d.getFontStyle(),f),g=0;"left"!==p&&(g-=c/("center"===p?2:1));var l=new aG(g,b?-0.75*k:0,c,b*k);return j?j._transformBounds(l,l):l}}),aA=aF.extend(new function(){function g(l){var q,c=l.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(c){q=[0,0,0];for(var p=0;3>p;p++){var n=c[p+1];q[p]=parseInt(1==n.length?n+n:n,16)/255}}else{if(c=l.match(/^rgba?\((.*)\)$/)){q=c[1].split(",");for(var p=0,v=q.length;v>p;p++){var n=+q[p];q[p]=3>p?n/255:n}}else{var m=d[l];if(!m){k||(k=aO.getContext(1,1),k.globalCompositeOperation="copy"),k.fillStyle="rgba(0,0,0,0)",k.fillStyle=l,k.fillRect(0,0,1,1);var a=k.getImageData(0,0,1,1).data;m=d[l]=[a[0]/255,a[1]/255,a[2]/255]}q=m.slice()}}return q}var k,f={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},h={},d={},e=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],b={"rgb-hsb":function(m,q,u){var l=Math.max(m,q,u),p=Math.min(m,q,u),o=l-p,c=0===o?0:60*(l==m?(q-u)/o+(u>q?6:0):l==q?(u-m)/o+2:(m-q)/o+4);return[c,0===l?0:o/l,l]},"hsb-rgb":function(c,o,p){c=(c/60%6+6)%6;var a=Math.floor(c),m=c-a,a=e[a],l=[p,p*(1-o),p*(1-o*m),p*(1-o*(1-m))];return[l[a[0]],l[a[1]],l[a[2]]]},"rgb-hsl":function(y,v,m){var p=Math.max(y,v,m),c=Math.min(y,v,m),z=p-c,w=0===z,l=w?0:60*(p==y?(v-m)/z+(m>v?6:0):p==v?(m-y)/z+2:(y-v)/z+4),q=(p+c)/2,x=w?0:0.5>q?z/(p+c):z/(2-p-c);return[l,x,q]},"hsl-rgb":function(w,u,m){if(w=(w/360%1+1)%1,0===u){return[m,m,m]}for(var p=[w+1/3,w,w-1/3],c=0.5>m?m*(1+u):m+u-m*u,x=2*m-c,v=[],l=0;3>l;l++){var q=p[l];0>q&&(q+=1),q>1&&(q-=1),v[l]=1>6*q?x+6*(c-x)*q:1>2*q?c:2>3*q?x+(c-x)*(2/3-q)*6:x}return v},"rgb-gray":function(a,c,i){return[0.2989*a+0.587*c+0.114*i]},"gray-rgb":function(a){return[a,a,a]},"gray-hsb":function(a){return[0,0,a]},"gray-hsl":function(a){return[0,0,a]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return aF.each(f,function(a,c){h[c]=[],aF.each(a,function(m,n){var i=aF.capitalize(m),p=/^(hue|saturation)$/.test(m),l=h[c][n]="gradient"===m?function(o){var q=this._components[0];return o=be.read(Array.isArray(o)?o:arguments,0,{readNull:!0}),q!==o&&(q&&q._removeOwner(this),o&&o._addOwner(this)),o}:"gradient"===c?function(){return aC.read(arguments,0,{readNull:"highlight"===m,clone:!0})}:function(o){return null==o||isNaN(o)?0:o};this["get"+i]=function(){return this._type===c||p&&/^hs[bl]$/.test(this._type)?this._components[n]:this._convert(c)[n]},this["set"+i]=function(o){this._type===c||p&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(c),this._properties=f[c],this._type=c),this._components[n]=l.call(this,o),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function j(z){var i,H,C,r,G=Array.prototype.slice,q=arguments,A=0;Array.isArray(z)&&(q=z,z=q[0]);var x=null!=z&&typeof z;if("string"===x&&z in f&&(i=z,z=q[1],Array.isArray(z)?(H=z,C=q[2]):(this.__read&&(A=1),q=G.call(q,1),x=typeof z)),!H){if(r="number"===x?q:"object"===x&&null!=z.length?z:null){i||(i=r.length>=3?"rgb":"gray");var t=f[i].length;C=r[t],this.__read&&(A+=r===arguments?t+(null!=C?1:0):1),r.length>t&&(r=G.call(r,0,t))}else{if("string"===x){i="rgb",H=g(z),4===H.length&&(C=H[3],H.length--)}else{if("object"===x){if(z.constructor===j){if(i=z._type,H=z._components.slice(),C=z._alpha,"gradient"===i){for(var F=1,E=H.length;E>F;F++){var c=H[F];c&&(H[F]=c.clone())}}}else{if(z.constructor===be){i="gradient",r=q}else{i="hue" in z?"lightness" in z?"hsl":"hsb":"gradient" in z||"stops" in z||"radial" in z?"gradient":"gray" in z?"gray":"rgb";var o=f[i],B=h[i];this._components=H=[];for(var F=0,E=o.length;E>F;F++){var D=z[o[F]];null==D&&0===F&&"gradient"===i&&"stops" in z&&(D={stops:z.stops,radial:z.radial}),D=B[F].call(this,D),null!=D&&(H[F]=D)}C=z.alpha}}}}}this.__read&&i&&(A=1)}if(this._type=i||"rgb",this._id=av.get(j),!H){this._components=H=[];for(var B=h[this._type],F=0,E=B.length;E>F;F++){var D=B[F].call(this,r&&r[F]);null!=D&&(H[F]=D)}}this._components=H,this._properties=f[this._type],this._alpha=C,this.__read&&(this.__read=A)},_serialize:function(c,l){var a=this.getComponents();return aF.serialize(/^(gray|rgb)$/.test(this._type)?a:[this._type].concat(a),c,!0,l)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(a){var c;return this._type===a?this._components.slice():(c=b[this._type+"-"+a])?c.apply(this,this._components):b["rgb-"+a].apply(this,b[this._type+"-rgb"].apply(this,this._components))},convert:function(a){return new aA(a,this._convert(a),this._alpha)},getType:function(){return this._type},setType:function(a){this._components=this._convert(a),this._properties=f[a],this._type=a},getComponents:function(){var a=this._components.slice();return null!=this._alpha&&a.push(this._alpha),a},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(a){var c=aF.isPlainValue(a,!0)?aA.read(arguments):a;return c===this||c&&this._class===c._class&&this._type===c._type&&this._alpha===c._alpha&&aF.equals(this._components,c._components)||!1},toString:function(){for(var m=this._properties,q=[],u="gradient"===this._type,l=ao.instance,p=0,c=m.length;c>p;p++){var s=this._components[p];null!=s&&q.push(m[p]+": "+(u?s:l.number(s)))}return null!=this._alpha&&q.push("alpha: "+l.number(this._alpha)),"{ "+q.join(", ")+" }"},toCSS:function(c){function l(i){return Math.round(255*(0>i?0:i>1?1:i))}var m=this._convert("rgb"),a=c||null==this._alpha?1:this._alpha;return m=[l(m[0]),l(m[1]),l(m[2])],1>a&&m.push(0>a?0:a),c?"#"+((1<<24)+(m[0]<<16)+(m[1]<<8)+m[2]).toString(16).slice(1):(4==m.length?"rgba(":"rgb(")+m.join(",")+")"},toCanvasStyle:function(E){if(this._canvasStyle){return this._canvasStyle}if("gradient"!==this._type){return this._canvasStyle=this.toCSS()}var z,q=this._components,w=q[0],m=w._stops,F=q[1],C=q[2];if(w._radial){var p=C.getDistance(F),x=q[3];if(x){var D=x.subtract(F);D.getLength()>p&&(x=F.add(D.normalize(p-0.1)))}var v=x||F;z=E.createRadialGradient(v.x,v.y,0,F.x,F.y,p)}else{z=E.createLinearGradient(F.x,F.y,C.x,C.y)}for(var B=0,A=m.length;A>B;B++){var y=m[B];z.addColorStop(y._rampPoint,y._color.toCanvasStyle())}return this._canvasStyle=z},transform:function(c){if("gradient"===this._type){for(var m=this._components,o=1,a=m.length;a>o;o++){var l=m[o];c._transformPoint(l,l,!0)}this._changed()}},statics:{_types:f,random:function(){var a=Math.random;return new aA(a(),a(),a())}}})},new function(){var a={add:function(b,c){return b+c},subtract:function(b,c){return b-c},multiply:function(b,c){return b*c},divide:function(b,c){return b/c}};return aF.each(a,function(b,c){this[c]=function(j){j=aA.read(arguments);for(var k=this._type,f=this._components,h=j._convert(k),g=0,d=f.length;d>g;g++){h[g]=b(f[g],h[g])}return new aA(k,h,null!=this._alpha?b(this._alpha,j.getAlpha()):null)}},{})}),be=aF.extend({_class:"Gradient",initialize:function(a,b){this._id=av.get(),a&&this._set(a)&&(a=b=null),this._stops||this.setStops(a||["white","black"]),null==this._radial&&this.setRadial("string"==typeof b&&"radial"===b||b||!1)},_serialize:function(a,b){return b.add(this,function(){return aF.serialize([this._stops,this._radial],a,!0,b)})},_changed:function(){for(var a=0,b=this._owners&&this._owners.length;b>a;a++){this._owners[a]._changed()}},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var b=this._owners?this._owners.indexOf(a):-1;-1!=b&&(this._owners.splice(b,1),0===this._owners.length&&(this._owners=an))},clone:function(){for(var a=[],b=0,c=this._stops.length;c>b;b++){a[b]=this._stops[b].clone()}return new be(a,this._radial)},getStops:function(){return this._stops},setStops:function(c){if(this.stops){for(var d=0,a=this._stops.length;a>d;d++){this._stops[d]._owner=an}}if(c.length<2){throw Error("Gradient stop list needs to contain at least two stops.")}this._stops=aX.readAll(c,0,{clone:!0});for(var d=0,a=this._stops.length;a>d;d++){var b=this._stops[d];b._owner=this,b._defaultRamp&&b.setRampPoint(d/(a-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this){return !0}if(a&&this._class===a._class&&this._stops.length===a._stops.length){for(var b=0,c=this._stops.length;c>b;b++){if(!this._stops[b].equals(a._stops[b])){return !1}}return !0}return !1}}),aX=aF.extend({_class:"GradientStop",initialize:function(c,d){if(c){var a,b;d===an&&Array.isArray(c)?(a=c[0],b=c[1]):c.color?(a=c.color,b=c.rampPoint):(a=c,b=d),this.setColor(a),this.setRampPoint(b)}},clone:function(){return new aX(this._color.clone(),this._rampPoint)},_serialize:function(a,b){return aF.serialize([this._color,this._rampPoint],a,!0,b)},_changed:function(){this._owner&&this._owner._changed(65)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(a){this._defaultRamp=null==a,this._rampPoint=a||0,this._changed()},getColor:function(){return this._color},setColor:function(a){this._color=aA.read(arguments),this._color===a&&(this._color=a.clone()),this._color._owner=this,this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._rampPoint==a._rampPoint||!1}}),bb=aF.extend(new function(){var d={fillColor:an,strokeColor:an,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],windingRule:"nonzero",shadowColor:an,shadowBlur:0,shadowOffset:new aC,selectedColor:an,fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,font:"sans-serif",leading:null,justification:"left"},a={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},c={beans:!0},b={_defaults:d,_textDefaults:new aF(d,{fillColor:new aA}),beans:!0};return aF.each(d,function(p,g){var k=/Color$/.test(g),h="shadowOffset"===g,e=aF.capitalize(g),m=a[g],j="set"+e,i="get"+e;b[j]=function(t){var u=this._owner,f=u&&u._children;if(f&&f.length>0&&!(u instanceof a0)){for(var q=0,o=f.length;o>q;q++){f[q]._style[j](t)}}else{var l=this._values[g];l!==t&&(k&&(l&&(l._owner=an),t&&t.constructor===aA&&(t._owner&&(t=t.clone()),t._owner=u)),this._values[g]=t,u&&u._changed(m||65))}},b[i]=function(x){var o,u=this._owner,q=u&&u._children;if(!q||0===q.length||x||u instanceof a0){var o=this._values[g];if(o===an){o=this._defaults[g],o&&o.clone&&(o=o.clone())}else{var f=k?aA:h?aC:null;!f||o&&o.constructor===f||(this._values[g]=o=f.read([o],0,{readNull:!0,clone:!0}),o&&k&&(o._owner=u))}return o}for(var w=0,v=q.length;v>w;w++){var t=q[w]._style[i]();if(0===w){o=t}else{if(!aF.equals(o,t)){return an}}}return o},c[i]=function(f){return this._style[i](f)},c[j]=function(f){this._style[j](f)}}),ax.inject(c),b},{_class:"Style",initialize:function(a,b,c){this._values={},this._owner=b,this._project=b&&b._project||c||paper.project,b instanceof a3&&(this._defaults=this._textDefaults),a&&this.set(a)},set:function(b){var d=b instanceof bb,f=d?b._values:b;if(f){for(var a in f){if(a in this._defaults){var c=f[a];this[a]=c&&d&&c.clone?c.clone():c}}}},equals:function(a){return a===this||a&&this._class===a._class&&aF.equals(this._values,a._values)||!1},hasFill:function(){return !!this.getFillColor()},hasStroke:function(){return !!this.getStrokeColor()&&this.getStrokeWidth()>0},hasShadow:function(){return !!this.getShadowColor()&&this.getShadowBlur()>0},getView:function(){return this._project.getView()},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function bo(){var a=bo.base.call(this),b=this.getFontSize();return/pt|em|%|px/.test(b)&&(b=this.getView().getPixelSize(b)),null!=a?a:1.2*b}}),a9=new function(){function a(l,j,d,f){for(var b=["","webkit","moz","Moz","ms","o"],m=j[0].toUpperCase()+j.substring(1),k=0;6>k;k++){var c=b[k],g=c?c+m:j;if(g in l){if(!d){return l[g]}l[g]=f;break}}}return{getStyles:function(b){var c=b&&9!==b.nodeType?b.ownerDocument:b,d=c&&c.defaultView;return d&&d.getComputedStyle(b,"")},getBounds:function(m,j){var d,f=m.ownerDocument,b=f.body,p=f.documentElement;try{d=m.getBoundingClientRect()}catch(k){d={left:0,top:0,width:0,height:0}}var c=d.left-(p.clientLeft||b.clientLeft||0),g=d.top-(p.clientTop||b.clientTop||0);if(!j){var l=f.defaultView;c+=l.pageXOffset||p.scrollLeft||b.scrollLeft,g+=l.pageYOffset||p.scrollTop||b.scrollTop}return new aG(c,g,d.width,d.height)},getViewportBounds:function(c){var d=c.ownerDocument,f=d.defaultView,b=d.documentElement;return new aG(0,0,f.innerWidth||b.clientWidth,f.innerHeight||b.clientHeight)},getOffset:function(b,c){return a9.getBounds(b,c).getPoint()},getSize:function(b){return a9.getBounds(b,!0).getSize()},isInvisible:function(b){return a9.getSize(b).equals(new ay(0,0))},isInView:function(b){return !a9.isInvisible(b)&&a9.getViewportBounds(b).intersects(a9.getBounds(b,!0))},getPrefixed:function(b,c){return a(b,c)},setPrefixed:function(d,f,b){if("object"==typeof f){for(var c in f){a(d,c,!0,f[c])}}else{a(d,f,!0,b)}}}},ar={add:function(d,h){for(var j in h){for(var c=h[j],g=j.split(/[\s,]+/g),f=0,b=g.length;b>f;f++){d.addEventListener(g[f],c,!1)}}},remove:function(d,h){for(var j in h){for(var c=h[j],g=j.split(/[\s,]+/g),f=0,b=g.length;b>f;f++){d.removeEventListener(g[f],c,!1)}}},getPoint:function(a){var b=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new aC(b.pageX||b.clientX+document.documentElement.scrollLeft,b.pageY||b.clientY+document.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,b){return ar.getPoint(a).subtract(a9.getOffset(b||ar.getTarget(a)))},stop:function(a){a.stopPropagation(),a.preventDefault()}};ar.requestAnimationFrame=new function(){function c(){for(var j=d.length-1;j>=0;j--){var k=d[j],i=k[0],a=k[1];(!a||("true"==aB.getAttribute(a,"keepalive")||b)&&a9.isInView(a))&&(d.splice(j,1),i())}h&&(d.length?h(c):f=!1)}var g,h=a9.getPrefixed(window,"requestAnimationFrame"),f=!1,d=[],b=!0;return ar.add(window,{focus:function(){b=!0},blur:function(){b=!1}}),function(j,e){d.push([j,e]),h?f||(h(c),f=!0):g||(g=setInterval(c,1000/60))}};var aS=aF.extend(aw,{_class:"View",initialize:function aJ(m,i){function f(a){return i[a]||parseInt(i.getAttribute(a),10)}function b(){var a=a9.getSize(i);return a.isNaN()||a.isZero()?new ay(f("width"),f("height")):a}this._project=m,this._scope=m._scope,this._element=i;var p;this._pixelRatio||(this._pixelRatio=window.devicePixelRatio||1),this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="view-"+aJ._id++),ar.add(i,this._viewEvents);var k="none";if(a9.setPrefixed(i.style,{userSelect:k,touchAction:k,touchCallout:k,contentZooming:k,userDrag:k,tapHighlightColor:"rgba(0,0,0,0)"}),aB.hasAttribute(i,"resize")){var d=this;ar.add(window,this._windowEvents={resize:function(){d.setViewSize(b())}})}if(this._setViewSize(p=b()),aB.hasAttribute(i,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var g=this._stats.domElement,l=g.style,j=a9.getOffset(i);l.position="absolute",l.left=j.x+"px",l.top=j.y+"px",document.body.appendChild(g)}aJ._views.push(this),aJ._viewsById[this._id]=this,this._viewSize=p,(this._matrix=new aD)._owner=this,this._zoom=1,aJ._focused||(aJ._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(aS._focused===this&&(aS._focused=null),aS._views.splice(aS._views.indexOf(this),1),delete aS._viewsById[this._id],this._project._view===this&&(this._project._view=null),ar.remove(this._element,this._viewEvents),ar.remove(window,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0):!1},_events:aF.each(["onResize","onMouseDown","onMouseUp","onMouseMove"],function(a){this[a]={install:function(b){this._installEvent(b)},uninstall:function(b){this._uninstallEvent(b)}}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,_requestFrame:function(){var a=this;ar.requestAnimationFrame(function(){a._requested=!1,a._animate&&(a._requestFrame(),a._handleFrame())},this._element),this._requested=!0},_handleFrame:function(){paper=this._scope;var a=Date.now()/1000,b=this._before?a-this._before:0;this._before=a,this._handlingFrame=!0,this.emit("frame",new aF({delta:b,time:this._time+=b,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.update()},_animateItem:function(a,b){var c=this._frameItems;b?(c[a._id]={item:a,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete c[a._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(b){for(var c in this._frameItems){var a=this._frameItems[c];a.item.emit("frame",new aF(b,{time:a.time+=b.delta,count:a.count++}))}},_update:function(){this._project._needsUpdate=!0,this._handlingFrame||(this._animate?this._handleFrame():this.update())},_changed:function(a){1&a&&(this._project._needsUpdate=!0)},_transform:function(a){this._matrix.concatenate(a),this._bounds=null,this._update()},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var a=this._viewSize;return new aH(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=ay.read(arguments),b=a.subtract(this._viewSize);b.isZero()||(this._viewSize.set(a.width,a.height),this._setViewSize(a),this._bounds=null,this.emit("resize",{size:a,delta:b}),this._update())},_setViewSize:function(a){var b=this._element;b.width=a.width,b.height=a.height},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new aG(new aC,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=aC.read(arguments);this.scrollBy(a.subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(a){this._transform((new aD).scale(a/this._zoom,this.getCenter())),this._zoom=a},isVisible:function(){return a9.isInView(this._element)},scrollBy:function(){this._transform((new aD).translate(aC.read(arguments).negate()))},play:function(){this._animate=!0,this._requested||this._requestFrame()},pause:function(){this._animate=!1},draw:function(){this.update()},projectToView:function(){return this._matrix._transformPoint(aC.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(aC.read(arguments))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,b){return"string"==typeof b&&(b=document.getElementById(b)),new a7(a,b)}}},new function(){function C(a){var c=ar.getTarget(a);return c.getAttribute&&aS._viewsById[c.getAttribute("id")]}function x(a,c){return a.viewToProject(ar.getOffset(c,a._element))}function k(){if(!aS._focused||!aS._focused.isVisible()){for(var a=0,c=aS._views.length;c>a;a++){var d=aS._views[a];if(d&&d.isVisible()){aS._focused=A=d;break}}}}function p(c,d,f){c._handleEvent("mousemove",d,f);var a=c._scope.tool;return a&&a._handleEvent(m&&a.responds("mousedrag")?"mousedrag":"mousemove",d,f),c.update(),a}var b,D,A,j,q,B,m=!1,z=window.navigator;z.pointerEnabled||z.msPointerEnabled?(j="pointerdown MSPointerDown",q="pointermove MSPointerMove",B="pointerup pointercancel MSPointerUp MSPointerCancel"):(j="touchstart",q="touchmove",B="touchend touchcancel","ontouchstart" in window&&z.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(j+=" mousedown",q+=" mousemove",B+=" mouseup"));var y={"selectstart dragstart":function(a){m&&a.preventDefault()}},w={mouseout:function(a){var d=aS._focused,c=ar.getRelatedTarget(a);!d||c&&"HTML"!==c.nodeName||p(d,x(d,a),a)},scroll:k};y[j]=function(d){var a=aS._focused=C(d),c=x(a,d);m=!0,a._handleEvent("mousedown",c,d),(b=a._scope.tool)&&b._handleEvent("mousedown",c,d),a.update()},w[q]=function(e){var d=aS._focused;if(!m){var a=C(e);a?(d!==a&&p(d,x(d,e),e),D=d,d=aS._focused=A=a):A&&A===d&&(d=aS._focused=D,k())}if(d){var f=x(d,e);(m||d.getBounds().contains(f))&&(b=p(d,f,e))}},w[B]=function(c){var d=aS._focused;if(d&&m){var a=x(d,c);m=!1,d._handleEvent("mouseup",a,c),b&&b._handleEvent("mouseup",a,c),d.update()}},ar.add(document,w),ar.add(window,{load:k});var v={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:y,_handleEvent:function(){},_installEvent:function(a){var c=this._eventCounters;if(c){for(var d in v){c[d]=(c[d]||0)+(v[d][a]||0)}}},_uninstallEvent:function(a){var c=this._eventCounters;if(c){for(var d in v){c[d]-=v[d][a]||0}}},statics:{updateFocus:k}}}),a7=aS.extend({_class:"CanvasView",initialize:function(a,d){if(!(d instanceof HTMLCanvasElement)){var f=ay.read(arguments,1);if(f.isZero()){throw Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1))}d=aO.getCanvas(f)}if(this._context=d.getContext("2d"),this._eventCounters={},this._pixelRatio=1,!/^off|false$/.test(aB.getAttribute(d,"hidpi"))){var c=window.devicePixelRatio||1,b=a9.getPrefixed(this._context,"backingStorePixelRatio")||1;this._pixelRatio=c/b}aS.call(this,a,d)},_setViewSize:function(c){var g=this._element,h=this._pixelRatio,f=c.width,d=c.height;if(g.width=f*h,g.height=d*h,1!==h){if(!aB.hasAttribute(g,"resize")){var b=g.style;b.width=f+"px",b.height=d+"px"}this._context.scale(h,h)}},getPixelSize:function(d){var h,j=paper.browser;if(j&&j.firefox){var c=this._element.parentNode,g=document.createElement("div");g.style.fontSize=d,c.appendChild(g),h=parseFloat(a9.getStyles(g).fontSize),c.removeChild(g)}else{var f=this._context,b=f.font;f.font=d+" serif",h=parseFloat(f.font),f.font=b}return h},getTextWidth:function(d,h){var j=this._context,c=j.font,g=0;j.font=d;for(var f=0,b=h.length;b>f;f++){g=Math.max(g,j.measureText(h[f]).width)}return j.font=c,g},update:function(b){var c=this._project;if(!c||!b&&!c._needsUpdate){return !1}var d=this._context,a=this._viewSize;return d.clearRect(0,0,a.width+1,a.height+1),c.draw(d,this._matrix,this._pixelRatio),c._needsUpdate=!1,!0}},new function(){function k(y,v,w,l,B,z){function t(a){return a.responds(v)&&(x||(x=new a8(v,w,l,B,z?l.subtract(z):null)),a.emit(v,x)&&x.isStopped)?(w.preventDefault(),!0):an}for(var x,A=B;A;){if(t(A)){return !0}A=A.getParent()}return t(y)?!0:!1}var d,g,b,q,m,c,j,p,f;return{_handleEvent:function(h,o,n){if(this._eventCounters[h]){var l=this._project,i=l.hitTest(o,{tolerance:0,fill:!0,stroke:!0}),e=i&&i.item,a=!1;switch(h){case"mousedown":for(a=k(this,h,n,o,e),p=m==e&&Date.now()-f<300,q=m=e,d=g=b=o,j=!a&&e;j&&!j.responds("mousedrag");){j=j._parent}break;case"mouseup":a=k(this,h,n,o,e,d),j&&(g&&!g.equals(o)&&k(this,"mousedrag",n,o,j,g),e!==j&&(b=o,k(this,"mousemove",n,o,e,b))),!a&&e&&e===q&&(f=Date.now(),k(this,p&&q.responds("doubleclick")?"doubleclick":"click",n,d,e),p=!1),q=j=null;break;case"mousemove":j&&(a=k(this,"mousedrag",n,o,j,g)),a||(e!==c&&(b=o),a=k(this,h,n,o,e,b)),g=b=o,e!==c&&(k(this,"mouseleave",n,o,c),c=e,k(this,"mouseenter",n,o,e))}return a}}}}),aN=aF.extend({_class:"Event",initialize:function(a){this.event=a},isPrevented:!1,isStopped:!1,preventDefault:function(){this.isPrevented=!0,this.event.preventDefault()},stopPropagation:function(){this.isStopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return aR.modifiers}}),aT=aN.extend({_class:"KeyEvent",initialize:function(b,c,d,a){aN.call(this,a),this.type=b?"keydown":"keyup",this.key=c,this.character=d},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),aR=new function(){function d(o,E,D,n){var x,t=D?String.fromCharCode(D):"",r=g[E],q=r||t.toLowerCase(),C=o?"keydown":"keyup",B=aS._focused,a=B&&B.isVisible()&&B._scope,h=a&&a.tool;if(e[q]=o,o?j[E]=D:delete j[E],r&&(x=aF.camelize(r)) in b){b[x]=o;var z=paper.browser;if("command"===x&&z&&z.mac){if(o){k={}}else{for(var A in k){A in j&&d(!1,A,k[A],n)}k=null}}}else{o&&k&&(k[E]=D)}h&&h.responds(C)&&(paper=a,h.emit(C,new aT(o,q,t,n)),B&&B.update())}var k,c,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},f={9:!0,13:!0,32:!0},b=new aF({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),j={},e={};return ar.add(document,{keydown:function(a){var h=a.which||a.keyCode;h in g||b.command?d(!0,h,h in f||b.command?h:0,a):c=h},keypress:function(a){null!=c&&(d(!0,c,a.which||a.keyCode,a),c=null)},keyup:function(a){var h=a.which||a.keyCode;h in j&&d(!1,h,j[h],a)}}),ar.add(window,{blur:function(a){for(var h in j){d(!1,h,j[h],a)}}}),{modifiers:b,isDown:function(a){return !!e[a]}}},a8=aN.extend({_class:"MouseEvent",initialize:function(b,d,f,a,c){aN.call(this,d),this.type=b,this.point=f,this.target=a,this.delta=c},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),bk=aN.extend({_class:"ToolEvent",_item:null,initialize:function(a,b,c){this.tool=a,this.type=b,this.event=c},_choosePoint:function(a,b){return a?a:b?b.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return !this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return !this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var b=a.item,c=b._parent;/^(Group|CompoundPath)$/.test(c._class);){b=c,c=c._parent}this._item=b}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),aP=ap.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(a){ap.call(this),this._firstMove=!0,this._count=0,this._downCount=0,this._set(a)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,null!=a&&null!=this._maxDistance&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,null!=this._minDistance&&null!=a&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_updateEvent:function(m,j,d,f,b,p,k){if(!b){if(null!=d||null!=f){var c=null!=d?d:0,g=j.subtract(this._point),l=g.getLength();if(c>l){return !1}if(null!=f&&0!=f){if(l>f){j=this._point.add(g.normalize(f))}else{if(k){return !1}}}}if(p&&j.equals(this._point)){return !1}}switch(this._lastPoint=b&&"mousemove"==m?j:this._point,this._point=j,m){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=b?0:this._count+1,!0},_fireEvent:function(d,h){var k=paper.project._removeSets;if(k){"mouseup"===d&&(k.mousedrag=null);var c=k[d];if(c){for(var g in c){var f=c[g];for(var b in k){var j=k[b];j&&j!=c&&delete j[f._id]}f.remove()}k[d]=null}}return this.responds(d)&&this.emit(d,new bk(this,d,h))},_handleEvent:function(b,f,g){paper=this._scope;var a=!1;switch(b){case"mousedown":this._updateEvent(b,f,null,null,!0,!1,!1),a=this._fireEvent(b,g);break;case"mousedrag":for(var d=!1,c=!1;this._updateEvent(b,f,this.minDistance,this.maxDistance,!1,d,c);){a=this._fireEvent(b,g)||a,d=!0,c=!0}break;case"mouseup":!f.equals(this._point)&&this._updateEvent("mousedrag",f,this.minDistance,this.maxDistance,!1,!1,!1)&&(a=this._fireEvent("mousedrag",g)),this._updateEvent(b,f,null,this.maxDistance,!1,!1,!1),a=this._fireEvent(b,g)||a,this._updateEvent(b,f,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(b,f,this.minDistance,this.maxDistance,this._firstMove,!0,!1);){a=this._fireEvent(b,g)||a,this._firstMove=!1}}return a&&g.preventDefault(),a}}),a5={request:function(d,f,a,c){c=c===an?!0:c;var b=new (window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return b.open(d.toUpperCase(),f,c),"overrideMimeType" in b&&b.overrideMimeType("text/plain"),b.onreadystatechange=function(){if(4===b.readyState){var e=b.status;if(0!==e&&200!==e){throw Error("Could not load "+f+" (Error "+e+")")}a.call(b,b.responseText)}},b.send(null)}},aO={canvases:[],getCanvas:function(b,d){var f,a=!0;"object"==typeof b&&(d=b.height,b=b.width),f=this.canvases.length?this.canvases.pop():document.createElement("canvas");var c=f.getContext("2d");return f.width===b&&f.height===d?a&&c.clearRect(0,0,b+1,d+1):(f.width=b,f.height=d),c.save(),f},getContext:function(a,b){return this.getCanvas(a,b).getContext("2d")},release:function(a){var b=a.canvas?a.canvas:a;b.getContext("2d").restore(),this.canvases.push(b)}},a4=new function(){function z(a,c,d){return 0.2989*a+0.587*c+0.114*d}function E(t,f,m,c){var x=c-z(t,f,m);K=t+x,J=f+x,O=m+x;var c=z(K,J,O),v=k(K,J,O),d=C(K,J,O);if(0>v){var p=c-v;K=c+(K-c)*c/p,J=c+(J-c)*c/p,O=c+(O-c)*c/p}if(d>255){var w=255-c,g=d-c;K=c+(K-c)*w/g,J=c+(J-c)*w/g,O=c+(O-c)*w/g}}function H(a,c,d){return C(a,c,d)-k(a,c,d)}function B(f,l,p,d){var h,g=[f,l,p],c=C(f,l,p),m=k(f,l,p);m=m===f?0:m===l?1:2,c=c===f?0:c===l?1:2,h=0===k(m,c)?1===C(m,c)?2:1:0,g[c]>g[m]?(g[h]=(g[h]-g[m])*d/(g[c]-g[m]),g[c]=d):g[h]=g[c]=0,g[m]=0,K=g[0],J=g[1],O=g[2]}var A,N,D,I,q,G,M,L,K,J,O,k=Math.min,C=Math.max,F=Math.abs,b={multiply:function(){K=q*A/255,J=G*N/255,O=M*D/255},screen:function(){K=q+A-q*A/255,J=G+N-G*N/255,O=M+D-M*D/255},overlay:function(){K=128>q?2*q*A/255:255-2*(255-q)*(255-A)/255,J=128>G?2*G*N/255:255-2*(255-G)*(255-N)/255,O=128>M?2*M*D/255:255-2*(255-M)*(255-D)/255},"soft-light":function(){var a=A*q/255;K=a+q*(255-(255-q)*(255-A)/255-a)/255,a=N*G/255,J=a+G*(255-(255-G)*(255-N)/255-a)/255,a=D*M/255,O=a+M*(255-(255-M)*(255-D)/255-a)/255},"hard-light":function(){K=128>A?2*A*q/255:255-2*(255-A)*(255-q)/255,J=128>N?2*N*G/255:255-2*(255-N)*(255-G)/255,O=128>D?2*D*M/255:255-2*(255-D)*(255-M)/255},"color-dodge":function(){K=0===q?0:255===A?255:k(255,255*q/(255-A)),J=0===G?0:255===N?255:k(255,255*G/(255-N)),O=0===M?0:255===D?255:k(255,255*M/(255-D))},"color-burn":function(){K=255===q?255:0===A?0:C(0,255-255*(255-q)/A),J=255===G?255:0===N?0:C(0,255-255*(255-G)/N),O=255===M?255:0===D?0:C(0,255-255*(255-M)/D)},darken:function(){K=A>q?q:A,J=N>G?G:N,O=D>M?M:D},lighten:function(){K=q>A?q:A,J=G>N?G:N,O=M>D?M:D},difference:function(){K=q-A,0>K&&(K=-K),J=G-N,0>J&&(J=-J),O=M-D,0>O&&(O=-O)},exclusion:function(){K=q+A*(255-q-q)/255,J=G+N*(255-G-G)/255,O=M+D*(255-M-M)/255},hue:function(){B(A,N,D,H(q,G,M)),E(K,J,O,z(q,G,M))},saturation:function(){B(q,G,M,H(A,N,D)),E(K,J,O,z(q,G,M))},luminosity:function(){E(q,G,M,z(A,N,D))},color:function(){E(A,N,D,z(q,G,M))},add:function(){K=k(q+A,255),J=k(G+N,255),O=k(M+D,255)},subtract:function(){K=C(q-A,0),J=C(G-N,0),O=C(M-D,0)},average:function(){K=(q+A)/2,J=(G+N)/2,O=(M+D)/2},negation:function(){K=255-F(255-A-q),J=255-F(255-N-G),O=255-F(255-D-M)}},j=this.nativeModes=aF.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(a){this[a]=!0},{}),e=aO.getContext(1,1);aF.each(b,function(c,f){var g="darken"===f,a=!1;e.save();try{e.fillStyle=g?"#300":"#a00",e.fillRect(0,0,1,1),e.globalCompositeOperation=f,e.globalCompositeOperation===f&&(e.fillStyle=g?"#a00":"#300",e.fillRect(0,0,1,1),a=e.getImageData(0,0,1,1).data[0]!==g?170:51)}catch(d){}e.restore(),j[f]=a}),aO.release(e),this.process=function(T,u,f,o,a){var R=u.canvas,d="normal"===T;if(d||j[T]){f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=o,d||(f.globalCompositeOperation=T),f.drawImage(R,a.x,a.y),f.restore()}else{var g=b[T];if(!g){return}for(var y=f.getImageData(a.x,a.y,R.width,R.height),w=y.data,c=u.getImageData(0,0,R.width,R.height).data,l=0,s=w.length;s>l;l+=4){A=c[l],q=w[l],N=c[l+1],G=w[l+1],D=c[l+2],M=w[l+2],I=c[l+3],L=w[l+3],g();var h=I*o/255,Q=1-h;w[l]=h*K+Q*q,w[l+1]=h*J+Q*G,w[l+2]=h*O+Q*M,w[l+3]=I*o+Q*L}f.putImageData(y,a.x,a.y)}}},aY=aF.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"},function(a,b){return !b&&(a instanceof ag||a instanceof ai||a instanceof a3)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]},function(b,d){var a=aF.capitalize(d),c=b[2];this[d]={type:b[1],property:d,attribute:b[0],toSVG:c,fromSVG:c&&aF.each(c,function(f,g){this[f]=g},{}),exportFilter:b[3],get:"get"+a,set:"set"+a}},{}),aV={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};return new function(){function q(c,f){for(var g in f){var b=f[g],d=aV[g];"number"==typeof b&&(b=K.number(b)),d?c.setAttributeNS(d,g,b):c.setAttribute(g,b)}return c}function B(b,c){return q(document.createElementNS("http://www.w3.org/2000/svg",b),c)}function E(C,f,p){var b=new aF,M=C.getTranslation();if(f){C=C.shiftless();var d=C._inverseTransform(M);b[p?"cx":"x"]=d.x,b[p?"cy":"y"]=d.y,M=null}if(!C.isIdentity()){var w=C.decompose();if(w&&!w.shearing){var y=[],g=w.rotation,x=w.scaling;M&&!M.isZero()&&y.push("translate("+K.point(M)+")"),aK.isZero(x.x-1)&&aK.isZero(x.y-1)||y.push("scale("+K.point(x)+")"),g&&y.push("rotate("+K.number(g)+")"),b.transform=y.join(" ")}else{b.transform="matrix("+C.getValues().join(",")+")"}}return b}function v(n,b){for(var y=E(n._matrix),w=n._children,f=B("g",y),i=0,x=w.length;x>i;i++){var g=w[i],t=k(g,b);if(t){if(g.isClipMask()){var p=B("clipPath");p.appendChild(t),z(g,p,"clip"),q(f,{"clip-path":"url(#"+p.id+")"})}else{f.appendChild(t)}}}return f}function A(c,g){var f=E(c._matrix,!0),d=c.getSize(),b=c.getImage();return f.x-=d.width/2,f.y-=d.height/2,f.width=d.width,f.height=d.height,f.href=g.embedImages===!1&&b&&b.src||c.toDataURL(),B("image",f)}function F(N,x){var b=x.matchShapes;if(b){var O=N.toShape(!1);if(O){return m(O,x)}}var M,i=N._segments,p=E(N._matrix);if(0===i.length){return null}if(b&&!N.hasHandles()){if(i.length>=3){M=N._closed?"polygon":"polyline";for(var n=[],C=0,y=i.length;y>C;C++){n.push(K.point(i[C]._point))}p.points=n.join(" ")}else{M="line";var w=i[0]._point,u=i[i.length-1]._point;p.set({x1:w.x,y1:w.y,x2:u.x,y2:u.y})}}else{M="path",p.d=N.getPathData(null,x.precision)}return B(M,p)}function m(c){var i=c._type,g=c._radius,f=E(c._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var b=c._size,l=b.width,d=b.height;f.x-=l/2,f.y-=d/2,f.width=l,f.height=d,g.isZero()&&(g=null)}return g&&("circle"===i?f.r=g:(f.rx=g.width,f.ry=g.height)),B(i,f)}function D(b,f){var d=E(b._matrix),c=b.getPathData(null,f.precision);return c&&(d.d=c),B("path",d)}function J(c,i){var g=E(c._matrix,!0),f=c.getSymbol(),b=L(f,"symbol"),l=f.getDefinition(),d=l.getBounds();return b||(b=B("symbol",{viewBox:K.rectangle(d)}),b.appendChild(k(l,i)),z(f,b,"symbol")),g.href="#"+b.id,g.x+=d.x,g.y+=d.y,g.width=K.number(d.width),g.height=K.number(d.height),g.overflow="visible",B("use",g)}function I(R){var M=L(R,"color");if(!M){var w,b=R.getGradient(),S=b._radial,P=R.getOrigin().transform(),n=R.getDestination().transform();if(S){w={cx:P.x,cy:P.y,r:P.getDistance(n)};var x=R.getHighlight();x&&(x=x.transform(),w.fx=x.x,w.fy=x.y)}else{w={x1:P.x,y1:P.y,x2:n.x,y2:n.y}}w.gradientUnits="userSpaceOnUse",M=B((S?"radial":"linear")+"Gradient",w);for(var Q=b._stops,p=0,O=Q.length;O>p;p++){var N=Q[p],C=N._color,y=C.getAlpha();w={offset:N._rampPoint,"stop-color":C.toCSS(!0)},1>y&&(w["stop-opacity"]=y),M.appendChild(B("stop",w))}z(R,M,"color")}return"url(#"+M.id+")"}function H(b){var c=B("text",E(b._matrix,!0));return c.textContent=b._content,c}function G(g,c,f){var d={},b=!f&&g.getParent();return null!=g._name&&(d.id=g._name),aF.each(aY,function(n){var l=n.get,u=n.type,w=g[l]();if(n.exportFilter?n.exportFilter(g,w):!b||!aF.equals(b[l](),w)){if("color"===u&&null!=w){var p=w.getAlpha();1>p&&(d[n.attribute+"-opacity"]=p)}d[n.attribute]=null==w?"none":"number"===u?K.number(w):"color"===u?w.gradient?I(w,g):w.toCSS(!0):"array"===u?w.join(","):"lookup"===u?n.toSVG[w]:w}}),1===d.opacity&&delete d.opacity,g._visible||(d.visibility="hidden"),q(c,d)}function L(b,c){return s||(s={ids:{},svgs:{}}),b&&s.svgs[c+"-"+b._id]}function z(c,d,f){s||L();var b=s.ids[f]=(s.ids[f]||0)+1;d.id=f+"-"+b,s.svgs[f+"-"+c._id]=d}function e(c,g){var b=c,f=null;if(s){b="svg"===c.nodeName.toLowerCase()&&c;for(var d in s.svgs){f||(b||(b=B("svg"),b.appendChild(c)),f=b.insertBefore(B("defs"),b.firstChild)),f.appendChild(s.svgs[d])}s=null}return g.asString?(new XMLSerializer).serializeToString(b):b}function k(d,h,l){var c=a[d._class],g=c&&c(d,h);if(g){var f=h.onExport;f&&(g=f(d,g,h)||g);var b=JSON.stringify(d._data);b&&"{}"!==b&&"null"!==b&&g.setAttribute("data-paper-data",b)}return g&&G(d,g,l)}function j(b){return b||(b={}),K=new ao(b.precision),b}var K,s,a={Group:v,Layer:v,Raster:A,Path:F,Shape:m,CompoundPath:D,PlacedSymbol:J,PointText:H};ax.inject({exportSVG:function(b){return b=j(b),e(k(this,b,!0),b)}}),al.inject({exportSVG:function(p){p=j(p);var g=this.layers,b=this.getView(),w=b.getViewSize(),i=B("svg",{x:0,y:0,width:w.width,height:w.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),c=i,f=b._matrix;f.isIdentity()||(c=i.appendChild(B("g",E(f))));for(var n=0,d=g.length;d>n;n++){c.appendChild(k(g[n],p,!0))}return e(i,p)}})},new function(){function g(c,o,u,a){var k=aV[o],f=k?c.getAttributeNS(k,o):c.getAttribute(o);return"null"===f&&(f=null),null==f?a?null:u?"":0:u?f:parseFloat(f)}function l(c,k,a,f){return k=g(c,k,!1,f),a=g(c,a,!1,f),!f||null!=k&&null!=a?new aC(k,a):null}function b(c,k,a,f){return k=g(c,k,!1,f),a=g(c,a,!1,f),!f||null!=k&&null!=a?new ay(k,a):null}function B(a,c,f){return"none"===a?null:"number"===c?parseFloat(a):"array"===c?a?a.split(/[\s,]+/g).map(parseFloat):[]:"color"===c?j(a)||a:"lookup"===c?f[a]:a}function v(N,I,C,E){var k=N.childNodes,O="clippath"===I,L=new ah,w=L._project,F=w._currentStyle,M=[];if(O||(L=d(L,N,E),w._currentStyle=L._style.clone()),E){for(var D=N.querySelectorAll("defs"),K=0,J=D.length;J>K;K++){m(D[K],C,!1)}}for(var K=0,J=k.length;J>K;K++){var H,G=k[K];1!==G.nodeType||"defs"===G.nodeName.toLowerCase()||!(H=m(G,C,!1))||H instanceof au||M.push(H)}return L.addChildren(M),O&&(L=d(L.reduce(),N,E)),w._currentStyle=F,(O||"defs"===I)&&(L.remove(),L=null),L}function e(k,w){for(var C=k.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),f=[],u=0,o=C.length;o>u;u+=2){f.push(new aC(parseFloat(C[u]),parseFloat(C[u+1])))}var c=new bf(f);return"polygon"===w&&c.closePath(),c}function A(a){var c=a.getAttribute("d"),f={pathData:c};return(c.match(/m/gi)||[]).length>1||/z\S+/i.test(c)?new a0(f):new bf(f)}function t(J,E){var i,K=(g(J,"href",!0)||"").substring(1),H="radialgradient"===E;if(K){i=q[K].getGradient()}else{for(var k=J.childNodes,w=[],I=0,n=k.length;n>I;I++){var G=k[I];1===G.nodeType&&w.push(d(new aX,G))}i=new be(w,H)}var F,D,C;return H?(F=l(J,"cx","cy"),D=F.add(g(J,"r"),0),C=l(J,"fx","fy",!0)):(F=l(J,"x1","y1"),D=l(J,"x2","y2")),d(new aA(i,F,D,C),J),null}function p(M,H,C,E){for(var k=(E.getAttribute(C)||"").split(/\)\s*/g),N=new aD,K=0,w=k.length;w>K;K++){var F=k[K];if(!F){break}for(var L=F.split(/\(\s*/),D=L[0],J=L[1].split(/[\s,]+/g),I=0,G=J.length;G>I;I++){J[I]=parseFloat(J[I])}switch(D){case"matrix":N.concatenate(new aD(J[0],J[1],J[2],J[3],J[4],J[5]));break;case"rotate":N.rotate(J[0],J[1],J[2]);break;case"translate":N.translate(J[0],J[1]);break;case"scale":N.scale(J);break;case"skewX":N.skew(J[0],0);break;case"skewY":N.skew(0,J[0])}}M.transform(N)}function z(c,f,k){var a=c["fill-opacity"===k?"getFillColor":"getStrokeColor"]();a&&a.setAlpha(parseFloat(f))}function y(C,f,u){var k=C.attributes[f],c=k&&k.value;if(!c){var w=aF.camelize(f);c=C.style[w],c||u.node[w]===u.parent[w]||(c=u.node[w])}return c?"none"===c?null:c:an}function d(k,a,f){var c={node:a9.getStyles(a)||{},parent:!f&&a9.getStyles(a.parentNode)||{}};return aF.each(x,function(n,i){var s=y(a,i,c);s!==an&&(k=aF.pick(n(k,s,i,a,c),k))}),k}function j(a){var c=a&&a.match(/\((?:#|)([^)']+)/);return c&&q[c[1]]}function m(M,C,E){function k(a){paper=K;var i=m(a,C,E),f=C.onLoad,c=K.project&&K.getView();f&&f.call(this,i),c.update()}if(!M){return null}C?"function"==typeof C&&(C={onLoad:C}):C={};var N=M,K=paper;if(E){if("string"!=typeof M||/^.*</.test(M)){if("undefined"!=typeof File&&M instanceof File){var w=new FileReader;return w.onload=function(){k(w.result)},w.readAsText(M)}}else{if(N=document.getElementById(M),!N){return a5.request("get",M,k)}M=null}}if("string"==typeof M&&(N=(new DOMParser).parseFromString(M,"image/svg+xml")),!N.nodeName){throw Error("Unsupported SVG source: "+M)}var F,L=N.nodeName.toLowerCase(),D=h[L],J=N.getAttribute&&N.getAttribute("data-paper-data"),I=K.settings,H=I.applyMatrix;if(I.applyMatrix=!1,F=D&&D(N,L,C,E)||null,I.applyMatrix=H,F){"#document"===L||F instanceof ah||(F=d(F,N,E));var G=C.onImport;G&&(F=G(N,F,C)||F),C.expandShapes&&F instanceof ai&&(F.remove(),F=F.toPath()),J&&(F._data=JSON.parse(J))}return E&&(q={},F&&aF.pick(C.applyMatrix,H)&&F.matrix.apply(!0,!0)),F}var h={"#document":function(G,D,k,w){for(var c=G.childNodes,H=0,E=c.length;E>H;H++){var f=c[H];if(1===f.nodeType){var C=f.nextSibling;document.body.appendChild(f);var F=m(f,k,w);return C?G.insertBefore(f,C):G.appendChild(f),F}}},g:v,svg:v,clippath:v,polygon:e,polyline:e,path:A,lineargradient:t,radialgradient:t,image:function(a){var c=new aI(g(a,"href",!0));return c.on("load",function(){var f=b(a,"width","height");this.setSize(f);var i=this._matrix._transformPoint(l(a,"x","y").add(f.divide(2)));this.translate(i)}),c},symbol:function(c,f,k,a){return new au(v(c,f,k,a),!0)},defs:v,use:function(a){var i=(g(a,"href",!0)||"").substring(1),f=q[i],c=l(a,"x","y");return f?f instanceof au?f.place(c):f.clone().translate(c):null},circle:function(a){return new ai.Circle(l(a,"cx","cy"),g(a,"r"))},ellipse:function(a){return new ai.Ellipse({center:l(a,"cx","cy"),radius:b(a,"rx","ry")})},rect:function(a){var f=l(a,"x","y"),i=b(a,"width","height"),c=b(a,"rx","ry");return new ai.Rectangle(new aG(f,i),c)},line:function(a){return new bf.Line(l(a,"x1","y1"),l(a,"x2","y2"))},text:function(a){var c=new a1(l(a,"x","y").add(l(a,"dx","dy")));return c.setContent(a.textContent.trim()||""),c}},x=aF.set(aF.each(aY,function(a){this[a.attribute]=function(f,k){if(f[a.set](B(k,a.type,a.fromSVG)),"color"===a.type&&f instanceof ai){var c=f[a.get]();c&&c.transform((new aD).translate(f.getPosition(!0).negate()))}}},{}),{id:function(a,c){q[c]=a,a.setName&&a.setName(c)},"clip-path":function(a,c){var f=j(c);if(f){if(f=f.clone(),f.setClipMask(!0),!(a instanceof ah)){return new ah(f,a)}a.insertChild(0,f)}},gradientTransform:p,transform:p,"fill-opacity":z,"stroke-opacity":z,visibility:function(a,c){a.setVisible("visible"===c)},display:function(a,c){a.setVisible(null!==c)},"stop-color":function(a,c){a.setColor&&a.setColor(c)},"stop-opacity":function(a,c){a._color&&a._color.setAlpha(parseFloat(c))},offset:function(a,c){var f=c.match(/(.*)%$/);a.setRampPoint(f?f[1]/100:parseFloat(c))},viewBox:function(I,E,r,w,G){var k=new aG(B(E,"array")),C=b(w,"width","height",!0);if(I instanceof ah){var H=C?k.getSize().divide(C):1,s=(new aD).translate(k.getPoint()).scale(H);I.transform(s.inverted())}else{if(I instanceof au){C&&k.setSize(C);var F="visible"!=y(w,"overflow",G),D=I._definition;F&&!k.contains(D.getBounds())&&(F=new ai.Rectangle(k).transform(D._matrix),F.setClipMask(!0),D.addChild(F))}}}}),q={};ax.inject({importSVG:function(a,c){return this.addChild(m(a,c,!0))}}),al.inject({importSVG:function(a,c){return this.activate(),m(a,c,!0)}})},aF.exports.PaperScript=function(){function z(c,f,g){var a=x[f];if(c&&c[a]){var d=c[a](g);return"!="===f?!d:d}switch(f){case"+":return c+g;case"-":return c-g;case"*":return c*g;case"/":return c/g;case"%":return c%g;case"==":return c==g;case"!=":return c!=g}}function i(a,c){var d=w[a];if(d&&c&&c[d]){return c[d]()}switch(a){case"+":return +c;case"-":return -c}}function b(a,c){return j.acorn.parse(a,c)}function A(O,I,B){function E(c){for(var d=0,f=N.length;f>d;d++){var a=N[d];if(a[0]>=c){break}c+=a[1]}return c}function P(a){return O.substring(E(a.range[0]),E(a.range[1]))}function M(a,c){return O.substring(E(a.range[1]),E(c.range[0]))}function v(g,t){for(var f=E(g.range[0]),d=E(g.range[1]),c=0,p=N.length-1;p>=0;p--){if(f>N[p][0]){c=p+1;break}}N.splice(c,0,[f,t.length-d+f]),O=O.substring(0,f)+t+O.substring(d)}function F(at,V){if(at){for(var s in at){if("range"!==s&&"loc"!==s){var S=at[s];if(Array.isArray(S)){for(var a=0,Z=S.length;Z>a;a++){F(S[a],at)}}else{S&&"object"==typeof S&&F(S,at)}}}switch(at.type){case"UnaryExpression":if(at.operator in w&&"Literal"!==at.argument.type){var R=P(at.argument);v(at,'$__("'+at.operator+'", '+R+")")}break;case"BinaryExpression":if(at.operator in x&&"Literal"!==at.left.type){var X=P(at.left),W=P(at.right),U=M(at.left,at.right),T=at.operator;v(at,"__$__("+X+","+U.replace(RegExp("\\"+T),'"'+T+'"')+", "+W+")")}break;case"UpdateExpression":case"AssignmentExpression":var o=V&&V.type;if(!("ForStatement"===o||"BinaryExpression"===o&&/^[=!<>]/.test(V.operator)||"MemberExpression"===o&&V.computed)){if("UpdateExpression"===at.type){var R=P(at.argument),Q="__$__("+R+', "'+at.operator[0]+'", 1)',Y=R+" = "+Q;at.prefix||"AssignmentExpression"!==o&&"VariableDeclarator"!==o||(P(V.left||V.id)===R&&(Y=Q),Y=R+"; "+Y),v(at,Y)}else{if(/^.=$/.test(at.operator)&&"Literal"!==at.left.type){var X=P(at.left),W=P(at.right);v(at,X+" = __$__("+X+', "'+at.operator[0]+'", '+W+")")}}}}}}if(!O){return""}B=B||{},I=I||"";var N=[],D=null,K=paper.browser,J=K.versionNumber,H=/\r\n|\n|\r/gm;if(K.chrome&&J>=30||K.webkit&&J>=537.76||K.firefox&&J>=23){var G=0;if(0===window.location.href.indexOf(I)){var r=document.getElementsByTagName("html")[0].innerHTML;G=r.substr(0,r.indexOf(O)+1).match(H).length+1}var C=["AAAA"];C.length=(O.match(H)||[]).length+1+G,D={version:3,file:I,names:[],mappings:C.join(";AACA"),sourceRoot:"",sources:[I]};var L=B.source||!I&&O;L&&(D.sourcesContent=[L])}return F(b(O,{ranges:!0})),D&&(O=Array(G+1).join("\n")+O+"\n//# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(D))))+"\n//# sourceURL="+(I||"paperscript")),O}function q(D,n,J,t){function N(a,c){for(var d in a){!c&&/^_/.test(d)||!RegExp("([\\b\\s\\W]|^)"+d.replace(/\$/g,"\\$")+"\\b").test(D)||(M.push(d),L.push(a[d]))}}paper=n;var C,H=n.getView(),G=/\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(D)?new aP:null,F=G?G._events:[],E=["onFrame","onResize"].concat(F),M=[],L=[];D=A(D,J,t),N({__$__:z,$__:i,paper:n,view:H,tool:G},!0),N(n),E=aF.each(E,function(a){RegExp("\\s+"+a+"\\b").test(D)&&(M.push(a),this.push(a+": "+a))},[]).join(", "),E&&(D+="\nreturn { "+E+" };");var s=paper.browser;if(s.chrome||s.firefox){var B=document.createElement("script"),I=document.head||document.getElementsByTagName("head")[0];s.firefox&&(D="\n"+D),B.appendChild(document.createTextNode("paper._execute = function("+M+") {"+D+"\n}")),I.appendChild(B),C=paper._execute,delete paper._execute,I.removeChild(B)}else{C=Function(M,D)}var K=C.apply(n,L)||{};aF.each(F,function(a){var c=K[a];c&&(G[a]=c)}),H&&(K.onResize&&H.setOnResize(K.onResize),H.emit("resize",{size:H.size,delta:new aC}),K.onFrame&&H.setOnFrame(K.onFrame),H.update())}function h(a){if(/^text\/(?:x-|)paperscript$/.test(a.type)&&"true"!==aB.getAttribute(a,"ignore")){var g=aB.getAttribute(a,"canvas"),u=document.getElementById(g),f=a.src||a.getAttribute("data-src"),d=aB.hasAttribute(a,"async"),p="data-paper-scope";if(!u){throw Error('Unable to find canvas with id "'+g+'"')}var c=aB.get(u.getAttribute(p))||(new aB).setup(u);return u.setAttribute(p,c._id),f?a5.request("get",f,function(n){q(n,c,f)},d):q(a.innerHTML,c,a.baseURI),a.setAttribute("data-paper-ignore","true"),c}}function y(){aF.each(document.getElementsByTagName("script"),h)}function m(a){return a?h(a):y()}var l,k,j=this;!function(a,c){return"object"==typeof l&&"object"==typeof module?c(l):"function"==typeof k&&k.amd?k(["exports"],c):void c(a.acorn||(a.acorn={}))}(this,function(cM){function c4(a){cG=a||{};for(var c in br){Object.prototype.hasOwnProperty.call(cG,c)||(cG[c]=br[c])}b4=cG.sourceFile||null}function cT(c,d){var f=bH(cw,c);d+=" ("+f.line+":"+f.column+")";var a=new SyntaxError(d);throw a.pos=c,a.loc=f,a.raisedAt=cz,a}function c0(f){function p(a){if(1==a.length){return u+="return str === "+JSON.stringify(a[0])+";"}u+="switch(str){";for(var n=0;n<a.length;++n){u+="case "+JSON.stringify(a[n])+":"}u+="return true}return false;"}f=f.split(" ");var u="",d=[];f:for(var o=0;o<f.length;++o){for(var g=0;g<d.length;++g){if(d[g][0].length==f[o].length){d[g].push(f[o]);continue f}}d.push([f[o]])}if(d.length>3){d.sort(function(a,n){return n.length-a.length}),u+="switch(str.length){";for(var o=0;o<d.length;++o){var c=d[o];u+="case "+c[0].length+":",p(c)}u+="}"}else{p(f)}return Function("str",u)}function cO(){this.line=bO,this.column=cz-bw}function cN(){bO=1,cz=bw=0,d6=!0,cL()}function da(a,c){dY=cz,cG.locations&&(d7=new cO),df=a,cL(),bU=c,d6=a.beforeExpr}function cS(){var c=cG.onComment&&cG.locations&&new cO,f=cz,a=cw.indexOf("*/",cz+=2);if(-1===a&&cT(cz-2,"Unterminated comment"),cz=a+2,cG.locations){c9.lastIndex=f;for(var d;(d=c9.exec(cw))&&d.index<cz;){++bO,bw=d.index+d[0].length}}cG.onComment&&cG.onComment(!0,cw.slice(f+2,a),f,cz,c,cG.locations&&new cO)}function c1(){for(var a=cz,c=cG.onComment&&cG.locations&&new cO,d=cw.charCodeAt(cz+=2);cd>cz&&10!==d&&13!==d&&8232!==d&&8233!==d;){++cz,d=cw.charCodeAt(cz)}cG.onComment&&cG.onComment(!1,cw.slice(a+2,cz),a,cz,c,cG.locations&&new cO)}function cL(){for(;cd>cz;){var a=cw.charCodeAt(cz);if(32===a){++cz}else{if(13===a){++cz;var c=cw.charCodeAt(cz);10===c&&++cz,cG.locations&&(++bO,bw=cz)}else{if(10===a||8232===a||8233===a){++cz,cG.locations&&(++bO,bw=cz)}else{if(a>8&&14>a){++cz}else{if(47===a){var c=cw.charCodeAt(cz+1);if(42===c){cS()}else{if(47!==c){break}c1()}}else{if(160===a){++cz}else{if(!(a>=5760&&cf.test(String.fromCharCode(a)))){break}++cz}}}}}}}}function cW(){var a=cw.charCodeAt(cz+1);return a>=48&&57>=a?dn(!0):(++cz,da(bD))}function c7(){var a=cw.charCodeAt(cz+1);return d6?(++cz,cH()):61===a?cI(bs,2):cI(dB,1)}function c6(){var a=cw.charCodeAt(cz+1);return 61===a?cI(bs,2):cI(bJ,1)}function c3(a){var c=cw.charCodeAt(cz+1);return c===a?cI(124===a?cl:dT,2):61===c?cI(bs,2):cI(124===a?ci:d2,1)}function c2(){var a=cw.charCodeAt(cz+1);return 61===a?cI(bs,2):cI(b1,1)}function db(a){var c=cw.charCodeAt(cz+1);return c===a?45==c&&62==cw.charCodeAt(cz+2)&&cx.test(cw.slice(cg,cz))?(cz+=3,c1(),cL(),cF()):cI(bB,2):61===c?cI(bs,2):cI(bS,1)}function cJ(a){var c=cw.charCodeAt(cz+1),d=1;return c===a?(d=62===a&&62===cw.charCodeAt(cz+2)?3:2,61===cw.charCodeAt(cz+d)?cI(bs,d+1):cI(ca,d)):33==c&&60==a&&45==cw.charCodeAt(cz+2)&&45==cw.charCodeAt(cz+3)?(cz+=4,c1(),cL(),cF()):(61===c&&(d=61===cw.charCodeAt(cz+2)?3:2),cI(cu,d))}function cQ(a){var c=cw.charCodeAt(cz+1);return 61===c?cI(bI,61===cw.charCodeAt(cz+2)?3:2):cI(61===a?bY:dO,1)}function cV(a){switch(a){case 46:return cW();case 40:return ++cz,da(bx);case 41:return ++cz,da(bL);case 59:return ++cz,da(d1);case 44:return ++cz,da(cD);case 91:return ++cz,da(cZ);case 93:return ++cz,da(cA);case 123:return ++cz,da(cj);case 125:return ++cz,da(b8);case 58:return ++cz,da(d3);case 63:return ++cz,da(bu);case 48:var c=cw.charCodeAt(cz+1);if(120===c||88===c){return dM()}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return dn(!1);case 34:case 39:return du(a);case 47:return c7(a);case 37:case 42:return c6();case 124:case 38:return c3(a);case 94:return c2();case 43:case 45:return db(a);case 60:case 62:return cJ(a);case 61:case 33:return cQ(a);case 126:return cI(dO,1)}return !1}function cF(c){if(c?cz=dV+1:dV=cz,cG.locations&&(bz=new cO),c){return cH()}if(cz>=cd){return da(by)}var f=cw.charCodeAt(cz);if(co(f)||92===f){return dy()}var a=cV(f);if(a===!1){var d=String.fromCharCode(f);if("\\"===d||d8.test(d)){return dy()}cT(cz,"Unexpected character '"+d+"'")}return a}function cI(a,c){var d=cw.slice(cz,cz+c);cz+=c,da(a,d)}function cH(){for(var c,g,a="",f=cz;;){cz>=cd&&cT(f,"Unterminated regular expression");var d=cw.charAt(cz);if(cx.test(d)&&cT(f,"Unterminated regular expression"),c){c=!1}else{if("["===d){g=!0}else{if("]"===d&&g){g=!1}else{if("/"===d&&!g){break}}}c="\\"===d}++cz}var a=cw.slice(f,cz);++cz;var n=dD();return n&&!/^[gmsiy]*$/.test(n)&&cT(f,"Invalid regexp flag"),da(b5,RegExp(a,n))}function c8(f,u){for(var B=cz,d=0,p=0,g=null==u?1/0:u;g>p;++p){var c,v=cw.charCodeAt(cz);if(c=v>=97?v-97+10:v>=65?v-65+10:v>=48&&57>=v?v-48:1/0,c>=f){break}++cz,d=d*f+c}return cz===B||null!=u&&cz-B!==u?null:d}function dM(){cz+=2;var a=c8(16);return null==a&&cT(dV+2,"Expected hexadecimal number"),co(cw.charCodeAt(cz))&&cT(cz,"Identifier directly after number"),da(cp,a)}function dn(c){var n=cz,a=!1,g=48===cw.charCodeAt(cz);c||null!==c8(10)||cT(n,"Invalid number"),46===cw.charCodeAt(cz)&&(++cz,c8(10),a=!0);var f=cw.charCodeAt(cz);(69===f||101===f)&&(f=cw.charCodeAt(++cz),(43===f||45===f)&&++cz,null===c8(10)&&cT(n,"Invalid number"),a=!0),co(cw.charCodeAt(cz))&&cT(cz,"Identifier directly after number");var p,d=cw.slice(n,cz);return a?p=parseFloat(d):g&&1!==d.length?/[89]/.test(d)||dX?cT(n,"Invalid number"):p=parseInt(d,8):p=parseInt(d,10),da(cp,p)}function du(c){cz++;for(var f="";;){cz>=cd&&cT(dV,"Unterminated string constant");var a=cw.charCodeAt(cz);if(a===c){return ++cz,da(bF,f)}if(92===a){a=cw.charCodeAt(++cz);var d=/^[0-7]+/.exec(cw.slice(cz,cz+3));for(d&&(d=d[0]);d&&parseInt(d,8)>255;){d=d.slice(0,d.length-1)}if("0"===d&&(d=null),++cz,d){dX&&cT(cz-2,"Octal literal in strict mode"),f+=String.fromCharCode(parseInt(d,8)),cz+=d.length-1}else{switch(a){case 110:f+="\n";break;case 114:f+="\r";break;case 120:f+=String.fromCharCode(cX(2));break;case 117:f+=String.fromCharCode(cX(4));break;case 85:f+=String.fromCharCode(cX(8));break;case 116:f+="	";break;case 98:f+="\b";break;case 118:f+="";break;case 102:f+="\f";break;case 48:f+="\x00";break;case 13:10===cw.charCodeAt(cz)&&++cz;case 10:cG.locations&&(bw=cz,++bO);break;default:f+=String.fromCharCode(a)}}}else{(13===a||10===a||8232===a||8233===a)&&cT(dV,"Unterminated string constant"),f+=String.fromCharCode(a),++cz}}}function cX(a){var c=c8(16,a);return null===c&&cT(dV,"Bad character escape sequence"),c}function dD(){bC=!1;for(var f,o=!0,d=cz;;){var n=cw.charCodeAt(cz);if(cC(n)){bC&&(f+=cw.charAt(cz)),++cz}else{if(92!==n){break}bC||(f=cw.slice(d,cz)),bC=!0,117!=cw.charCodeAt(++cz)&&cT(cz,"Expecting Unicode escape sequence \\uXXXX"),++cz;var g=cX(4),c=String.fromCharCode(g);c||cT(cz-1,"Invalid Unicode escape"),(o?co(g):cC(g))||cT(cz-4,"Invalid Unicode escape"),f+=c}o=!1}return bC?f:cw.slice(d,cz)}function dy(){var a=dD(),c=b3;return bC||(d0(a)?c=d9[a]:(cG.forbidReserved&&(3===cG.ecmaVersion?bQ:bA)(a)||dX&&cv(a))&&cT(dV,"The keyword '"+a+"' is reserved")),da(c,a)}function cE(){ds=dV,cg=dY,dL=d7,cF()}function dP(a){if(dX=a,cz=cg,cG.locations){for(;bw>cz;){bw=cw.lastIndexOf("\n",bw-2)+1,--bO}}cL(),cF()}function dv(){this.type=null,this.start=dV,this.end=null}function dm(){this.start=bz,this.end=null,null!==b4&&(this.source=b4)}function dI(){var a=new dv;return cG.locations&&(a.loc=new dm),cG.ranges&&(a.range=[dV,0]),a}function dz(a){var c=new dv;return c.start=a.start,cG.locations&&(c.loc=new dm,c.loc.start=a.loc.start),cG.ranges&&(c.range=[a.range[0],0]),c}function dx(a,c){return a.type=c,a.end=cg,cG.locations&&(a.loc.end=dL),cG.ranges&&(a.range[1]=cg),a}function cY(a){return cG.ecmaVersion>=5&&"ExpressionStatement"===a.type&&"Literal"===a.expression.type&&"use strict"===a.expression.value}function dN(a){return df===a?(cE(),!0):void 0}function dq(){return !cG.strictSemicolons&&(df===by||df===b8||cx.test(cw.slice(cg,dV)))}function dK(){dN(d1)||dq()||cP()}function dG(a){df===a?cE():cP()}function cP(){cT(dV,"Unexpected token")}function dk(a){"Identifier"!==a.type&&"MemberExpression"!==a.type&&cT(a.start,"Assigning to rvalue"),dX&&"Identifier"===a.type&&dj(a.name)&&cT(a.start,"Assigning to "+a.name+" in strict mode")}function dE(c){ds=cg=cz,cG.locations&&(dL=new cO),cc=dX=null,bW=[],cF();var d=c||dI(),f=!0;for(c||(d.body=[]);df!==by;){var a=dd();d.body.push(a),f&&cY(a)&&dP(!0),f=!1}return dx(d,"Program")}function dd(){(df===dB||df===bs&&"/="==bU)&&cF(!0);var I=df,D=dI();switch(I){case bM:case c5:cE();var v=I===bM;dN(d1)||dq()?D.label=null:df!==b3?cP():(D.label=d5(),dK());for(var g=0;g<bW.length;++g){var J=bW[g];if(null==D.label||J.name===D.label.name){if(null!=J.kind&&(v||"loop"===J.kind)){break}if(D.label&&v){break}}}return g===bW.length&&cT(D.start,"Unsyntactic "+I.keyword),dx(D,v?"BreakStatement":"ContinueStatement");case dU:return cE(),dK(),dx(D,"DebuggerStatement");case dH:return cE(),bW.push(bK),D.body=dd(),bW.pop(),dG(dQ),D.test=dl(),dK(),dx(D,"DoWhileStatement");case dp:if(cE(),bW.push(bK),dG(bx),df===d1){return dF(D,null)}if(df===cr){var G=dI();return cE(),dh(G,!0),dx(G,"VariableDeclaration"),1===G.declarations.length&&dN(bT)?dZ(D,G):dF(D,G)}var G=dC(!1,!0);return dN(bT)?(dk(G),dZ(D,G)):dF(D,G);case cs:return cE(),bV(D,!0);case cR:return cE(),D.test=dl(),D.consequent=dd(),D.alternate=dN(cB)?dd():null,dx(D,"IfStatement");case ck:return cc||cT(dV,"'return' outside of function"),cE(),dN(d1)||dq()?D.argument=null:(D.argument=dC(),dK()),dx(D,"ReturnStatement");case cy:cE(),D.discriminant=dl(),D.cases=[],dG(cj),bW.push(b0);for(var n,B;df!=b8;){if(df===bv||df===b9){var H=df===bv;n&&dx(n,"SwitchCase"),D.cases.push(n=dI()),n.consequent=[],cE(),H?n.test=dC():(B&&cT(ds,"Multiple default clauses"),B=!0,n.test=null),dG(d3)}else{n||cP(),n.consequent.push(dd())}}return n&&dx(n,"SwitchCase"),cE(),bW.pop(),dx(D,"SwitchStatement");case bG:return cE(),cx.test(cw.slice(cg,dV))&&cT(cg,"Illegal newline after throw"),D.argument=dC(),dK(),dx(D,"ThrowStatement");case b2:if(cE(),D.block=di(),D.handler=null,df===cq){var p=dI();cE(),dG(bx),p.param=d5(),dX&&dj(p.param.name)&&cT(p.param.start,"Binding "+p.param.name+" in strict mode"),dG(bL),p.guard=null,p.body=di(),D.handler=dx(p,"CatchClause")}return D.guardedHandlers=bE,D.finalizer=dN(d4)?di():null,D.handler||D.finalizer||cT(D.start,"Missing catch or finally clause"),dx(D,"TryStatement");case cr:return cE(),dh(D),dK(),dx(D,"VariableDeclaration");case dQ:return cE(),D.test=dl(),bW.push(bK),D.body=dd(),bW.pop(),dx(D,"WhileStatement");case bR:return dX&&cT(dV,"'with' in strict mode"),cE(),D.object=dl(),D.body=dd(),dx(D,"WithStatement");case cj:return di();case d1:return cE(),dx(D,"EmptyStatement");default:var F=bU,E=dC();if(I===b3&&"Identifier"===E.type&&dN(d3)){for(var g=0;g<bW.length;++g){bW[g].name===F&&cT(E.start,"Label '"+F+"' is already declared")}var C=df.isLoop?"loop":df===cy?"switch":null;return bW.push({name:F,kind:C}),D.body=dd(),bW.pop(),D.label=E,dx(D,"LabeledStatement")}return D.expression=E,dK(),dx(D,"ExpressionStatement")}}function dl(){dG(bx);var a=dC();return dG(bL),a}function di(c){var g,o=dI(),a=!0,f=!1;for(o.body=[],dG(cj);!dN(b8);){var d=dd();o.body.push(d),a&&c&&cY(d)&&(g=f,dP(f=!0)),a=!1}return f&&!g&&dP(!1),dx(o,"BlockStatement")}function dF(a,c){return a.init=c,dG(d1),a.test=df===d1?null:dC(),dG(d1),a.update=df===bL?null:dC(),dG(bL),a.body=dd(),bW.pop(),dx(a,"ForStatement")}function dZ(a,c){return a.left=c,a.right=dC(),dG(bL),a.body=dd(),bW.pop(),dx(a,"ForInStatement")}function dh(c,d){for(c.declarations=[],c.kind="var";;){var a=dI();if(a.id=d5(),dX&&dj(a.id.name)&&cT(a.id.start,"Binding "+a.id.name+" in strict mode"),a.init=dN(bY)?dC(!0,d):null,c.declarations.push(dx(a,"VariableDeclarator")),!dN(cD)){break}}return c}function dC(c,d){var f=dg(d);if(!c&&df===cD){var a=dz(f);for(a.expressions=[f];dN(cD);){a.expressions.push(dg(d))}return dx(a,"SequenceExpression")}return f}function dg(a){var c=dA(a);if(df.isAssign){var d=dz(c);return d.operator=bU,d.left=c,cE(),d.right=dg(a),dk(c),dx(d,"AssignmentExpression")}return c}function dA(a){var c=dr(a);if(dN(bu)){var d=dz(c);return d.test=c,d.consequent=dC(!0),dG(d3),d.alternate=dC(!0,a),dx(d,"ConditionalExpression")}return c}function dr(a){return bX(cn(),-1,a)}function bX(c,g,o){var a=df.binop;if(null!=a&&(!o||df!==bT)&&a>g){var f=dz(c);f.left=c,f.operator=bU,cE(),f.right=bX(cn(),a,o);var d=dx(f,/&&|\|\|/.test(f.operator)?"LogicalExpression":"BinaryExpression");return bX(d,g,o)}return c}function cn(){if(df.prefix){var c=dI(),d=df.isUpdate;return c.operator=bU,c.prefix=!0,d6=!0,cE(),c.argument=cn(),d?dk(c.argument):dX&&"delete"===c.operator&&"Identifier"===c.argument.type&&cT(c.start,"Deleting local variable in strict mode"),dx(c,d?"UpdateExpression":"UnaryExpression")}for(var a=dw();df.postfix&&!dq();){var c=dz(a);c.operator=bU,c.prefix=!1,c.argument=a,dk(a),cE(),a=dx(c,"UpdateExpression")}return a}function dw(){return bN(ch())}function bN(a,c){if(dN(bD)){var d=dz(a);return d.object=a,d.property=d5(!0),d.computed=!1,bN(dx(d,"MemberExpression"),c)}if(dN(cZ)){var d=dz(a);return d.object=a,d.property=dC(),d.computed=!0,dG(cA),bN(dx(d,"MemberExpression"),c)}if(!c&&dN(bx)){var d=dz(a);return d.callee=a,d.arguments=bP(bL,!1),bN(dx(d,"CallExpression"),c)}return a}function ch(){switch(df){case cb:var c=dI();return cE(),dx(c,"ThisExpression");case b3:return d5();case cp:case bF:case b5:var c=dI();return c.value=bU,c.raw=cw.slice(dV,dY),cE(),dx(c,"Literal");case dW:case dc:case bZ:var c=dI();return c.value=df.atomValue,c.raw=df.keyword,cE(),dx(c,"Literal");case bx:var d=bz,f=dV;cE();var a=dC();return a.start=f,a.end=dY,cG.locations&&(a.loc.start=d,a.loc.end=d7),cG.ranges&&(a.range=[f,dY]),dG(bL),a;case cZ:var c=dI();return cE(),c.elements=bP(cA,!0,!0),dx(c,"ArrayExpression");case cj:return dR();case cs:var c=dI();return cE(),bV(c,!1);case cm:return b6();default:cP()}}function b6(){var a=dI();return cE(),a.callee=bN(ch(),!0),a.arguments=dN(bx)?bP(bL,!1):bE,dx(a,"NewExpression")}function dR(){var B=dI(),n=!0,f=!1;for(B.properties=[],cE();!dN(b8);){if(n){n=!1}else{if(dG(cD),cG.allowTrailingCommas&&dN(b8)){break}}var c,C={key:cU()},p=!1;if(dN(d3)?(C.value=dC(!0),c=C.kind="init"):cG.ecmaVersion>=5&&"Identifier"===C.key.type&&("get"===C.key.name||"set"===C.key.name)?(p=f=!0,c=C.kind=C.key.name,C.key=cU(),df!==bx&&cP(),C.value=bV(dI(),!1)):cP(),"Identifier"===C.key.type&&(dX||f)){for(var d=0;d<B.properties.length;++d){var g=B.properties[d];if(g.key.name===C.key.name){var v=c==g.kind||p&&"init"===g.kind||"init"===c&&("get"===g.kind||"set"===g.kind);v&&!dX&&"init"===c&&"init"===g.kind&&(v=!1),v&&cT(C.key.start,"Redefinition of property")}}}B.properties.push(C)}return dx(B,"ObjectExpression")}function cU(){return df===cp||df===bF?ch():d5(!0)}function bV(f,u){df===b3?f.id=d5():u?cP():f.id=null,f.params=[];var d=!0;for(dG(bx);!dN(bL);){d?d=!1:dG(cD),f.params.push(d5())}var p=cc,n=bW;if(cc=!0,bW=[],f.body=di(!0),cc=p,bW=n,dX||f.body.body.length&&cY(f.body.body[0])){for(var c=f.id?-1:0;c<f.params.length;++c){var v=0>c?f.id:f.params[c];if((cv(v.name)||dj(v.name))&&cT(v.start,"Defining '"+v.name+"' in strict mode"),c>=0){for(var g=0;c>g;++g){v.name===f.params[g].name&&cT(v.start,"Argument name clash in strict mode")}}}}return dx(f,u?"FunctionDeclaration":"FunctionExpression")}function bP(c,f,g){for(var a=[],d=!0;!dN(c);){if(d){d=!1}else{if(dG(cD),f&&cG.allowTrailingCommas&&dN(c)){break}}g&&df===cD?a.push(null):a.push(dC(!0))}return a}function d5(a){var c=dI();return c.name=df===b3?bU:a&&!cG.forbidReserved&&df.keyword||cP(),d6=!1,cE(),dx(c,"Identifier")}cM.version="0.4.0";var cG,cw,cd,b4;cM.parse=function(a,c){return cw=a+"",cd=cw.length,c4(c),cN(),dE(cG.program)};var br=cM.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},bH=cM.getLineInfo=function(c,f){for(var g=1,a=0;;){c9.lastIndex=a;var d=c9.exec(c);if(!(d&&d.index<f)){break}++g,a=d.index+d[0].length}return{line:g,column:f-a}};cM.tokenize=function(c,f){function a(g){return cF(g),d.start=dV,d.end=dY,d.startLoc=bz,d.endLoc=d7,d.type=df,d.value=bU,d}cw=c+"",cd=cw.length,c4(f),cN();var d={};return a.jumpTo=function(g,o){if(cz=g,cG.locations){bO=1,bw=c9.lastIndex=0;for(var p;(p=c9.exec(cw))&&p.index<g;){++bO,bw=p.index+p[0].length}}d6=o,cL()},a};var cz,dV,dY,bz,d7,df,bU,d6,bO,bw,ds,cg,dL,cc,bW,dX,bE=[],cp={type:"num"},b5={type:"regexp"},bF={type:"string"},b3={type:"name"},by={type:"eof"},bM={keyword:"break"},bv={keyword:"case",beforeExpr:!0},cq={keyword:"catch"},c5={keyword:"continue"},dU={keyword:"debugger"},b9={keyword:"default"},dH={keyword:"do",isLoop:!0},cB={keyword:"else",beforeExpr:!0},d4={keyword:"finally"},dp={keyword:"for",isLoop:!0},cs={keyword:"function"},cR={keyword:"if"},ck={keyword:"return",beforeExpr:!0},cy={keyword:"switch"},bG={keyword:"throw",beforeExpr:!0},b2={keyword:"try"},cr={keyword:"var"},dQ={keyword:"while",isLoop:!0},bR={keyword:"with"},cm={keyword:"new",beforeExpr:!0},cb={keyword:"this"},dW={keyword:"null",atomValue:null},dc={keyword:"true",atomValue:!0},bZ={keyword:"false",atomValue:!1},bT={keyword:"in",binop:7,beforeExpr:!0},d9={"break":bM,"case":bv,"catch":cq,"continue":c5,"debugger":dU,"default":b9,"do":dH,"else":cB,"finally":d4,"for":dp,"function":cs,"if":cR,"return":ck,"switch":cy,"throw":bG,"try":b2,"var":cr,"while":dQ,"with":bR,"null":dW,"true":dc,"false":bZ,"new":cm,"in":bT,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":cb,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},cZ={type:"[",beforeExpr:!0},cA={type:"]"},cj={type:"{",beforeExpr:!0},b8={type:"}"},bx={type:"(",beforeExpr:!0},bL={type:")"},cD={type:",",beforeExpr:!0},d1={type:";",beforeExpr:!0},d3={type:":",beforeExpr:!0},bD={type:"."},bu={type:"?",beforeExpr:!0},dB={binop:10,beforeExpr:!0},bY={isAssign:!0,beforeExpr:!0},bs={isAssign:!0,beforeExpr:!0},bS={binop:9,prefix:!0,beforeExpr:!0},bB={postfix:!0,prefix:!0,isUpdate:!0},dO={prefix:!0,beforeExpr:!0},cl={binop:1,beforeExpr:!0},dT={binop:2,beforeExpr:!0},ci={binop:3,beforeExpr:!0},b1={binop:4,beforeExpr:!0},d2={binop:5,beforeExpr:!0},bI={binop:6,beforeExpr:!0},cu={binop:7,beforeExpr:!0},ca={binop:8,beforeExpr:!0},bJ={binop:10,beforeExpr:!0};cM.tokTypes={bracketL:cZ,bracketR:cA,braceL:cj,braceR:b8,parenL:bx,parenR:bL,comma:cD,semi:d1,colon:d3,dot:bD,question:bu,slash:dB,eq:bY,name:b3,eof:by,num:cp,regexp:b5,string:bF};for(var b7 in d9){cM.tokTypes["_"+b7]=d9[b7]}var bC,bQ=c0("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),bA=c0("class enum extends super const export import"),cv=c0("implements interface let package private protected public static yield"),dj=c0("eval arguments"),d0=c0("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),cf=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dS="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",cK="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",d8=RegExp("["+dS+"]"),dJ=RegExp("["+dS+cK+"]"),cx=/[\n\r\u2028\u2029]/,c9=/\r\n|[\n\r\u2028\u2029]/g,co=cM.isIdentifierStart=function(a){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:a>=170&&d8.test(String.fromCharCode(a))},cC=cM.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:a>=170&&dJ.test(String.fromCharCode(a))},bK={kind:"loop"},b0={kind:"switch"}});var x={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"equals","!=":"equals"},w={"-":"__negate","+":null},e=aF.each(["add","subtract","multiply","divide","modulo","negate"],function(a){this["__"+a]="#"+a},{});return aC.inject(e),ay.inject(e),aA.inject(e),"complete"===document.readyState?setTimeout(y):ar.add(window,{load:y}),{compile:A,execute:q,load:m,parse:b}}.call(this),paper=new (aB.inject(aF.exports,{enumerable:!0,Base:aF,Numerical:aK,Key:aR})),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper};(function(){var v=this;var k=v._;var I=Array.prototype,g=Object.prototype,n=Function.prototype;var L=I.push,l=I.slice,c=g.toString,j=g.hasOwnProperty;var s=Array.isArray,e=Object.keys,J=n.bind,B=Object.create;var E=function(){};var P=function(Q){if(Q instanceof P){return Q}if(!(this instanceof P)){return new P(Q)}this._wrapped=Q};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=P}exports._=P}else{v._=P}P.VERSION="1.8.3";var b=function(R,Q,S){if(Q===void 0){return R}switch(S==null?3:S){case 1:return function(T){return R.call(Q,T)};case 2:return function(U,T){return R.call(Q,U,T)};case 3:return function(U,T,V){return R.call(Q,U,T,V)};case 4:return function(T,V,U,W){return R.call(Q,T,V,U,W)}}return function(){return R.apply(Q,arguments)}};var F=function(R,Q,S){if(R==null){return P.identity}if(P.isFunction(R)){return b(R,Q,S)}if(P.isObject(R)){return P.matcher(R)}return P.property(R)};P.iteratee=function(R,Q){return F(R,Q,Infinity)};var p=function(R,Q){return function(Z){var X=arguments.length;if(X<2||Z==null){return Z}for(var T=1;T<X;T++){var Y=arguments[T],W=R(Y),S=W.length;for(var V=0;V<S;V++){var U=W[V];if(!Q||Z[U]===void 0){Z[U]=Y[U]}}}return Z}};var C=function(R){if(!P.isObject(R)){return{}}if(B){return B(R)}E.prototype=R;var Q=new E;E.prototype=null;return Q};var M=function(Q){return function(R){return R==null?void 0:R[Q]}};var K=Math.pow(2,53)-1;var O=M("length");var D=function(R){var Q=O(R);return typeof Q=="number"&&Q>=0&&Q<=K};P.each=P.forEach=function(U,V,R){V=b(V,R);var Q,T;if(D(U)){for(Q=0,T=U.length;Q<T;Q++){V(U[Q],Q,U)}}else{var S=P.keys(U);for(Q=0,T=S.length;Q<T;Q++){V(U[S[Q]],S[Q],U)}}return U};P.map=P.collect=function(V,X,S){X=F(X,S);var U=!D(V)&&P.keys(V),T=(U||V).length,R=Array(T);for(var Q=0;Q<T;Q++){var W=U?U[Q]:Q;R[Q]=X(V[W],W,V)}return R};function z(Q){function R(W,Y,S,V,T,U){for(;T>=0&&T<U;T+=Q){var X=V?V[T]:T;S=Y(S,W[X],X,W)}return S}return function(X,Y,S,U){Y=b(Y,U,4);var W=!D(X)&&P.keys(X),V=(W||X).length,T=Q>0?0:V-1;if(arguments.length<3){S=X[W?W[T]:T];T+=Q}return R(X,Y,S,W,T,V)}}P.reduce=P.foldl=P.inject=z(1);P.reduceRight=P.foldr=z(-1);P.find=P.detect=function(T,Q,S){var R;if(D(T)){R=P.findIndex(T,Q,S)}else{R=P.findKey(T,Q,S)}if(R!==void 0&&R!==-1){return T[R]}};P.filter=P.select=function(T,Q,S){var R=[];Q=F(Q,S);P.each(T,function(W,U,V){if(Q(W,U,V)){R.push(W)}});return R};P.reject=function(S,Q,R){return P.filter(S,P.negate(F(Q)),R)};P.every=P.all=function(V,Q,S){Q=F(Q,S);var U=!D(V)&&P.keys(V),T=(U||V).length;for(var R=0;R<T;R++){var W=U?U[R]:R;if(!Q(V[W],W,V)){return false}}return true};P.some=P.any=function(V,Q,S){Q=F(Q,S);var U=!D(V)&&P.keys(V),T=(U||V).length;for(var R=0;R<T;R++){var W=U?U[R]:R;if(Q(V[W],W,V)){return true}}return false};P.contains=P.includes=P.include=function(T,S,Q,R){if(!D(T)){T=P.values(T)}if(typeof Q!="number"||R){Q=0}return P.indexOf(T,S,Q)>=0};P.invoke=function(S,T){var Q=l.call(arguments,2);var R=P.isFunction(T);return P.map(S,function(V){var U=R?T:V[T];return U==null?U:U.apply(V,Q)})};P.pluck=function(R,Q){return P.map(R,P.property(Q))};P.where=function(R,Q){return P.filter(R,P.matcher(Q))};P.findWhere=function(R,Q){return P.find(R,P.matcher(Q))};P.max=function(T,V,Q){var Y=-Infinity,W=-Infinity,X,S;if(V==null&&T!=null){T=D(T)?T:P.values(T);for(var U=0,R=T.length;U<R;U++){X=T[U];if(X>Y){Y=X}}}else{V=F(V,Q);P.each(T,function(ab,Z,aa){S=V(ab,Z,aa);if(S>W||S===-Infinity&&Y===-Infinity){Y=ab;W=S}})}return Y};P.min=function(T,V,Q){var Y=Infinity,W=Infinity,X,S;if(V==null&&T!=null){T=D(T)?T:P.values(T);for(var U=0,R=T.length;U<R;U++){X=T[U];if(X<Y){Y=X}}}else{V=F(V,Q);P.each(T,function(ab,Z,aa){S=V(ab,Z,aa);if(S<W||S===Infinity&&Y===Infinity){Y=ab;W=S}})}return Y};P.shuffle=function(U){var V=D(U)?U:P.values(U);var T=V.length;var Q=Array(T);for(var R=0,S;R<T;R++){S=P.random(0,R);if(S!==R){Q[R]=Q[S]}Q[S]=V[R]}return Q};P.sample=function(R,S,Q){if(S==null||Q){if(!D(R)){R=P.values(R)}return R[P.random(R.length-1)]}return P.shuffle(R).slice(0,Math.max(0,S))};P.sortBy=function(R,S,Q){S=F(S,Q);return P.pluck(P.map(R,function(V,T,U){return{value:V,index:T,criteria:S(V,T,U)}}).sort(function(W,V){var U=W.criteria;var T=V.criteria;if(U!==T){if(U>T||U===void 0){return 1}if(U<T||T===void 0){return -1}}return W.index-V.index}),"value")};var q=function(Q){return function(T,U,S){var R={};U=F(U,S);P.each(T,function(X,V){var W=U(X,V,T);Q(R,X,W)});return R}};P.groupBy=q(function(Q,S,R){if(P.has(Q,R)){Q[R].push(S)}else{Q[R]=[S]}});P.indexBy=q(function(Q,S,R){Q[R]=S});P.countBy=q(function(Q,S,R){if(P.has(Q,R)){Q[R]++}else{Q[R]=1}});P.toArray=function(Q){if(!Q){return[]}if(P.isArray(Q)){return l.call(Q)}if(D(Q)){return P.map(Q,P.identity)}return P.values(Q)};P.size=function(Q){if(Q==null){return 0}return D(Q)?Q.length:P.keys(Q).length};P.partition=function(U,Q,S){Q=F(Q,S);var T=[],R=[];P.each(U,function(W,V,X){(Q(W,V,X)?T:R).push(W)});return[T,R]};P.first=P.head=P.take=function(S,R,Q){if(S==null){return void 0}if(R==null||Q){return S[0]}return P.initial(S,S.length-R)};P.initial=function(S,R,Q){return l.call(S,0,Math.max(0,S.length-(R==null||Q?1:R)))};P.last=function(S,R,Q){if(S==null){return void 0}if(R==null||Q){return S[S.length-1]}return P.rest(S,Math.max(0,S.length-R))};P.rest=P.tail=P.drop=function(S,R,Q){return l.call(S,R==null||Q?1:R)};P.compact=function(Q){return P.filter(Q,P.identity)};var x=function(W,S,X,aa){var R=[],Z=0;for(var U=aa||0,Q=O(W);U<Q;U++){var Y=W[U];if(D(Y)&&(P.isArray(Y)||P.isArguments(Y))){if(!S){Y=x(Y,S,X)}var T=0,V=Y.length;R.length+=V;while(T<V){R[Z++]=Y[T++]}}else{if(!X){R[Z++]=Y}}}return R};P.flatten=function(R,Q){return x(R,Q,false)};P.without=function(Q){return P.difference(Q,l.call(arguments,1))};P.uniq=P.unique=function(X,T,W,R){if(!P.isBoolean(T)){R=W;W=T;T=false}if(W!=null){W=F(W,R)}var Z=[];var Q=[];for(var V=0,S=O(X);V<S;V++){var Y=X[V],U=W?W(Y,V,X):Y;if(T){if(!V||Q!==U){Z.push(Y)}Q=U}else{if(W){if(!P.contains(Q,U)){Q.push(U);Z.push(Y)}}else{if(!P.contains(Z,Y)){Z.push(Y)}}}}return Z};P.union=function(){return P.uniq(x(arguments,true,true))};P.intersection=function(W){var Q=[];var V=arguments.length;for(var S=0,U=O(W);S<U;S++){var T=W[S];if(P.contains(Q,T)){continue}for(var R=1;R<V;R++){if(!P.contains(arguments[R],T)){break}}if(R===V){Q.push(T)}}return Q};P.difference=function(R){var Q=x(arguments,true,true,1);return P.filter(R,function(S){return !P.contains(Q,S)})};P.zip=function(){return P.unzip(arguments)};P.unzip=function(T){var S=T&&P.max(T,O).length||0;var Q=Array(S);for(var R=0;R<S;R++){Q[R]=P.pluck(T,R)}return Q};P.object=function(U,R){var Q={};for(var S=0,T=O(U);S<T;S++){if(R){Q[U[S]]=R[S]}else{Q[U[S][0]]=U[S][1]}}return Q};function u(Q){return function(V,R,T){R=F(R,T);var U=O(V);var S=Q>0?0:U-1;for(;S>=0&&S<U;S+=Q){if(R(V[S],S,V)){return S}}return -1}}P.findIndex=u(1);P.findLastIndex=u(-1);P.sortedIndex=function(X,V,W,S){W=F(W,S,1);var U=W(V);var Q=0,T=O(X);while(Q<T){var R=Math.floor((Q+T)/2);if(W(X[R])<U){Q=R+1}else{T=R}}return Q};function f(Q,R,S){return function(X,W,T){var U=0,V=O(X);if(typeof T=="number"){if(Q>0){U=T>=0?T:Math.max(T+V,U)}else{V=T>=0?Math.min(T+1,V):T+V+1}}else{if(S&&T&&V){T=S(X,W);return X[T]===W?T:-1}}if(W!==W){T=R(l.call(X,U,V),P.isNaN);return T>=0?T+U:-1}for(T=Q>0?U:V-1;T>=0&&T<V;T+=Q){if(X[T]===W){return T}}return -1}}P.indexOf=f(1,P.findIndex,P.sortedIndex);P.lastIndexOf=f(-1,P.findLastIndex);P.range=function(V,S,U){if(S==null){S=V||0;V=0}U=U||1;var T=Math.max(Math.ceil((S-V)/U),0);var R=Array(T);for(var Q=0;Q<T;Q++,V+=U){R[Q]=V}return R};var y=function(V,S,U,W,T){if(!(W instanceof S)){return V.apply(U,T)}var R=C(V.prototype);var Q=V.apply(R,T);if(P.isObject(Q)){return Q}return R};P.bind=function(T,R){if(J&&T.bind===J){return J.apply(T,l.call(arguments,1))}if(!P.isFunction(T)){throw new TypeError("Bind must be called on a function")}var Q=l.call(arguments,2);var S=function(){return y(T,S,R,this,Q.concat(l.call(arguments)))};return S};P.partial=function(R){var S=l.call(arguments,1);var Q=function(){var T=0,W=S.length;var U=Array(W);for(var V=0;V<W;V++){U[V]=S[V]===P?arguments[T++]:S[V]}while(T<arguments.length){U.push(arguments[T++])}return y(R,Q,this,this,U)};return Q};P.bindAll=function(T){var R,S=arguments.length,Q;if(S<=1){throw new Error("bindAll must be passed function names")}for(R=1;R<S;R++){Q=arguments[R];T[Q]=P.bind(T[Q],T)}return T};P.memoize=function(R,Q){var S=function(V){var U=S.cache;var T=""+(Q?Q.apply(this,arguments):V);if(!P.has(U,T)){U[T]=R.apply(this,arguments)}return U[T]};S.cache={};return S};P.delay=function(R,S){var Q=l.call(arguments,2);return setTimeout(function(){return R.apply(null,Q)},S)};P.defer=P.partial(P.delay,P,1);P.throttle=function(R,T,X){var Q,V,Y;var W=null;var U=0;if(!X){X={}}var S=function(){U=X.leading===false?0:P.now();W=null;Y=R.apply(Q,V);if(!W){Q=V=null}};return function(){var Z=P.now();if(!U&&X.leading===false){U=Z}var aa=T-(Z-U);Q=this;V=arguments;if(aa<=0||aa>T){if(W){clearTimeout(W);W=null}U=Z;Y=R.apply(Q,V);if(!W){Q=V=null}}else{if(!W&&X.trailing!==false){W=setTimeout(S,aa)}}return Y}};P.debounce=function(S,U,R){var X,W,Q,V,Y;var T=function(){var Z=P.now()-V;if(Z<U&&Z>=0){X=setTimeout(T,U-Z)}else{X=null;if(!R){Y=S.apply(Q,W);if(!X){Q=W=null}}}};return function(){Q=this;W=arguments;V=P.now();var Z=R&&!X;if(!X){X=setTimeout(T,U)}if(Z){Y=S.apply(Q,W);Q=W=null}return Y}};P.wrap=function(Q,R){return P.partial(R,Q)};P.negate=function(Q){return function(){return !Q.apply(this,arguments)}};P.compose=function(){var Q=arguments;var R=Q.length-1;return function(){var T=R;var S=Q[R].apply(this,arguments);while(T--){S=Q[T].call(this,S)}return S}};P.after=function(R,Q){return function(){if(--R<1){return Q.apply(this,arguments)}}};P.before=function(S,R){var Q;return function(){if(--S>0){Q=R.apply(this,arguments)}if(S<=1){R=null}return Q}};P.once=P.partial(P.before,2);var G=!{toString:null}.propertyIsEnumerable("toString");var a=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function d(U,T){var Q=a.length;var R=U.constructor;var S=(P.isFunction(R)&&R.prototype)||g;var V="constructor";if(P.has(U,V)&&!P.contains(T,V)){T.push(V)}while(Q--){V=a[Q];if(V in U&&U[V]!==S[V]&&!P.contains(T,V)){T.push(V)}}}P.keys=function(S){if(!P.isObject(S)){return[]}if(e){return e(S)}var R=[];for(var Q in S){if(P.has(S,Q)){R.push(Q)}}if(G){d(S,R)}return R};P.allKeys=function(S){if(!P.isObject(S)){return[]}var R=[];for(var Q in S){R.push(Q)}if(G){d(S,R)}return R};P.values=function(U){var T=P.keys(U);var S=T.length;var Q=Array(S);for(var R=0;R<S;R++){Q[R]=U[T[R]]}return Q};P.mapObject=function(V,X,S){X=F(X,S);var U=P.keys(V),T=U.length,R={},W;for(var Q=0;Q<T;Q++){W=U[Q];R[W]=X(V[W],W,V)}return R};P.pairs=function(U){var S=P.keys(U);var R=S.length;var T=Array(R);for(var Q=0;Q<R;Q++){T[Q]=[S[Q],U[S[Q]]]}return T};P.invert=function(U){var Q={};var T=P.keys(U);for(var R=0,S=T.length;R<S;R++){Q[U[T[R]]]=T[R]}return Q};P.functions=P.methods=function(S){var R=[];for(var Q in S){if(P.isFunction(S[Q])){R.push(Q)}}return R.sort()};P.extend=p(P.allKeys);P.extendOwn=P.assign=p(P.keys);P.findKey=function(W,Q,T){Q=F(Q,T);var V=P.keys(W),S;for(var R=0,U=V.length;R<U;R++){S=V[R];if(Q(W[S],S,W)){return S}}};P.pick=function(S,W,Q){var aa={},T=S,V,Z;if(T==null){return aa}if(P.isFunction(W)){Z=P.allKeys(T);V=b(W,Q)}else{Z=x(arguments,false,false,1);V=function(ac,ab,ad){return ab in ad};T=Object(T)}for(var U=0,R=Z.length;U<R;U++){var Y=Z[U];var X=T[Y];if(V(X,Y,T)){aa[Y]=X}}return aa};P.omit=function(S,T,Q){if(P.isFunction(T)){T=P.negate(T)}else{var R=P.map(x(arguments,false,false,1),String);T=function(V,U){return !P.contains(R,U)}}return P.pick(S,T,Q)};P.defaults=p(P.allKeys,true);P.create=function(R,S){var Q=C(R);if(S){P.extendOwn(Q,S)}return Q};P.clone=function(Q){if(!P.isObject(Q)){return Q}return P.isArray(Q)?Q.slice():P.extend({},Q)};P.tap=function(R,Q){Q(R);return R};P.isMatch=function(R,Q){var V=P.keys(Q),U=V.length;if(R==null){return !U}var W=Object(R);for(var T=0;T<U;T++){var S=V[T];if(Q[S]!==W[S]||!(S in W)){return false}}return true};var N=function(Y,X,R,T){if(Y===X){return Y!==0||1/Y===1/X}if(Y==null||X==null){return Y===X}if(Y instanceof P){Y=Y._wrapped}if(X instanceof P){X=X._wrapped}var V=c.call(Y);if(V!==c.call(X)){return false}switch(V){case"[object RegExp]":case"[object String]":return""+Y===""+X;case"[object Number]":if(+Y!==+Y){return +X!==+X}return +Y===0?1/+Y===1/X:+Y===+X;case"[object Date]":case"[object Boolean]":return +Y===+X}var S=V==="[object Array]";if(!S){if(typeof Y!="object"||typeof X!="object"){return false}var W=Y.constructor,U=X.constructor;if(W!==U&&!(P.isFunction(W)&&W instanceof W&&P.isFunction(U)&&U instanceof U)&&("constructor" in Y&&"constructor" in X)){return false}}R=R||[];T=T||[];var Q=R.length;while(Q--){if(R[Q]===Y){return T[Q]===X}}R.push(Y);T.push(X);if(S){Q=Y.length;if(Q!==X.length){return false}while(Q--){if(!N(Y[Q],X[Q],R,T)){return false}}}else{var aa=P.keys(Y),Z;Q=aa.length;if(P.keys(X).length!==Q){return false}while(Q--){Z=aa[Q];if(!(P.has(X,Z)&&N(Y[Z],X[Z],R,T))){return false}}}R.pop();T.pop();return true};P.isEqual=function(R,Q){return N(R,Q)};P.isEmpty=function(Q){if(Q==null){return true}if(D(Q)&&(P.isArray(Q)||P.isString(Q)||P.isArguments(Q))){return Q.length===0}return P.keys(Q).length===0};P.isElement=function(Q){return !!(Q&&Q.nodeType===1)};P.isArray=s||function(Q){return c.call(Q)==="[object Array]"};P.isObject=function(R){var Q=typeof R;return Q==="function"||Q==="object"&&!!R};P.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(Q){P["is"+Q]=function(R){return c.call(R)==="[object "+Q+"]"}});if(!P.isArguments(arguments)){P.isArguments=function(Q){return P.has(Q,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){P.isFunction=function(Q){return typeof Q=="function"||false}}P.isFinite=function(Q){return isFinite(Q)&&!isNaN(parseFloat(Q))};P.isNaN=function(Q){return P.isNumber(Q)&&Q!==+Q};P.isBoolean=function(Q){return Q===true||Q===false||c.call(Q)==="[object Boolean]"};P.isNull=function(Q){return Q===null};P.isUndefined=function(Q){return Q===void 0};P.has=function(R,Q){return R!=null&&j.call(R,Q)};P.noConflict=function(){v._=k;return this};P.identity=function(Q){return Q};P.constant=function(Q){return function(){return Q}};P.noop=function(){};P.property=M;P.propertyOf=function(Q){return Q==null?function(){}:function(R){return Q[R]}};P.matcher=P.matches=function(Q){Q=P.extendOwn({},Q);return function(R){return P.isMatch(R,Q)}};P.times=function(U,T,S){var Q=Array(Math.max(0,U));T=b(T,S,1);for(var R=0;R<U;R++){Q[R]=T(R)}return Q};P.random=function(R,Q){if(Q==null){Q=R;R=0}return R+Math.floor(Math.random()*(Q-R+1))};P.now=Date.now||function(){return new Date().getTime()};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var m=P.invert(r);var w=function(U){var R=function(V){return U[V]};var T="(?:"+P.keys(U).join("|")+")";var S=RegExp(T);var Q=RegExp(T,"g");return function(V){V=V==null?"":""+V;return S.test(V)?V.replace(Q,R):V}};P.escape=w(r);P.unescape=w(m);P.result=function(Q,S,T){var R=Q==null?void 0:Q[S];if(R===void 0){R=T}return P.isFunction(R)?R.call(Q):R};var A=0;P.uniqueId=function(Q){var R=++A+"";return Q?Q+R:R};P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\u2028|\u2029/g;var H=function(Q){return"\\"+h[Q]};P.template=function(Z,T,W){if(!T&&W){T=W}T=P.defaults({},T,P.templateSettings);var U=RegExp([(T.escape||t).source,(T.interpolate||t).source,(T.evaluate||t).source].join("|")+"|$","g");var V=0;var Q="__p+='";Z.replace(U,function(ab,ac,aa,ae,ad){Q+=Z.slice(V,ad).replace(i,H);V=ad+ab.length;if(ac){Q+="'+\n((__t=("+ac+"))==null?'':_.escape(__t))+\n'"}else{if(aa){Q+="'+\n((__t=("+aa+"))==null?'':__t)+\n'"}else{if(ae){Q+="';\n"+ae+"\n__p+='"}}}return ab});Q+="';\n";if(!T.variable){Q="with(obj||{}){\n"+Q+"}\n"}Q="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Q+"return __p;\n";try{var S=new Function(T.variable||"obj","_",Q)}catch(X){X.source=Q;throw X}var Y=function(aa){return S.call(this,aa,P)};var R=T.variable||"obj";Y.source="function("+R+"){\n"+Q+"}";return Y};P.chain=function(R){var Q=P(R);Q._chain=true;return Q};var o=function(Q,R){return Q._chain?P(R).chain():R};P.mixin=function(Q){P.each(P.functions(Q),function(R){var S=P[R]=Q[R];P.prototype[R]=function(){var T=[this._wrapped];L.apply(T,arguments);return o(this,S.apply(P,T))}})};P.mixin(P);P.each(["pop","push","reverse","shift","sort","splice","unshift"],function(Q){var R=I[Q];P.prototype[Q]=function(){var S=this._wrapped;R.apply(S,arguments);if((Q==="shift"||Q==="splice")&&S.length===0){delete S[0]}return o(this,S)}});P.each(["concat","join","slice"],function(Q){var R=I[Q];P.prototype[Q]=function(){return o(this,R.apply(this._wrapped,arguments))}});P.prototype.value=function(){return this._wrapped};P.prototype.valueOf=P.prototype.toJSON=P.prototype.value;P.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return P})}}.call(this));